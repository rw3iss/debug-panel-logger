"use strict";var DevDebugPanel=(()=>{var Ke=Object.create;var V=Object.defineProperty;var Qe=Object.getOwnPropertyDescriptor;var Ze=Object.getOwnPropertyNames;var et=Object.getPrototypeOf,tt=Object.prototype.hasOwnProperty;var Ne=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),nt=(o,e)=>{for(var t in e)V(o,t,{get:e[t],enumerable:!0})},Oe=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ze(e))!tt.call(o,i)&&i!==t&&V(o,i,{get:()=>e[i],enumerable:!(n=Qe(e,i))||n.enumerable});return o};var Me=(o,e,t)=>(t=o!=null?Ke(et(o)):{},Oe(e||!o||!o.__esModule?V(t,"default",{value:o,enumerable:!0}):t,o)),it=o=>Oe(V({},"__esModule",{value:!0}),o);var ke=Ne((W,te)=>{(function(o,e){typeof W=="object"&&typeof te=="object"?te.exports=e():typeof define=="function"&&define.amd?define("EventBus",[],e):typeof W=="object"?W.EventBus=e():o.EventBus=e()})(W,function(){var o={};o=function(){this.listeners={}},o.prototype={addEventListener:function(t,n,i){for(var r=[],s=arguments.length,a=0;a<s;a++)r.push(arguments[a]);r=r.length>3?r.splice(3,r.length-1):[],typeof this.listeners[t]<"u"?this.listeners[t].push({scope:i,callback:n,args:r}):this.listeners[t]=[{scope:i,callback:n,args:r}]},removeEventListener:function(t,n,i){if(typeof this.listeners[t]<"u"){for(var r=this.listeners[t].length,s=[],a=0;a<r;a++){var l=this.listeners[t][a];l.scope==i&&l.callback==n||s.push(l)}this.listeners[t]=s}},hasEventListener:function(t,n,i){if(typeof this.listeners[t]<"u"){var r=this.listeners[t].length;if(n===void 0&&i===void 0)return r>0;for(var s=0;s<r;s++){var a=this.listeners[t][s];if((!i||a.scope==i)&&a.callback==n)return!0}}return!1},dispatch:function(t,n){for(var i={type:t,target:n},r=[],s=arguments.length,a=0;a<s;a++)r.push(arguments[a]);if(r=r.length>2?r.splice(2,r.length-1):[],r=[i].concat(r),typeof this.listeners[t]<"u")for(var l=this.listeners[t].slice(),c=l.length,a=0;a<c;a++){var d=l[a];if(d&&d.callback){var f=r.concat(d.args);d.callback.apply(d.scope,f)}}},getEvents:function(){var t="";for(var n in this.listeners)for(var i=this.listeners[n].length,r=0;r<i;r++){var s=this.listeners[n][r];t+=s.scope&&s.scope.className?s.scope.className:"anonymous",t+=" listen for '"+n+`'
`}return t}};var e=new o;return e})});var $e=Ne((St,Fe)=>{Fe.exports=B;B.default=B;B.stable=Ie;B.stableStringify=Ie;var Y="[...]",He="[Circular]",A=[],D=[];function _e(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function B(o,e,t,n){typeof n>"u"&&(n=_e()),ne(o,"",0,[],void 0,0,n);var i;try{D.length===0?i=JSON.stringify(o,e,t):i=JSON.stringify(o,ze(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;A.length!==0;){var r=A.pop();r.length===4?Object.defineProperty(r[0],r[1],r[3]):r[0][r[1]]=r[2]}}return i}function H(o,e,t,n){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:o}),A.push([n,t,e,i])):D.push([e,t,o]):(n[t]=o,A.push([n,t,e]))}function ne(o,e,t,n,i,r,s){r+=1;var a;if(typeof o=="object"&&o!==null){for(a=0;a<n.length;a++)if(n[a]===o){H(He,o,e,i);return}if(typeof s.depthLimit<"u"&&r>s.depthLimit){H(Y,o,e,i);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){H(Y,o,e,i);return}if(n.push(o),Array.isArray(o))for(a=0;a<o.length;a++)ne(o[a],a,a,n,o,r,s);else{var l=Object.keys(o);for(a=0;a<l.length;a++){var c=l[a];ne(o[c],c,a,n,o,r,s)}}n.pop()}}function st(o,e){return o<e?-1:o>e?1:0}function Ie(o,e,t,n){typeof n>"u"&&(n=_e());var i=ie(o,"",0,[],void 0,0,n)||o,r;try{D.length===0?r=JSON.stringify(i,e,t):r=JSON.stringify(i,ze(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;A.length!==0;){var s=A.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return r}function ie(o,e,t,n,i,r,s){r+=1;var a;if(typeof o=="object"&&o!==null){for(a=0;a<n.length;a++)if(n[a]===o){H(He,o,e,i);return}try{if(typeof o.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&r>s.depthLimit){H(Y,o,e,i);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){H(Y,o,e,i);return}if(n.push(o),Array.isArray(o))for(a=0;a<o.length;a++)ie(o[a],a,a,n,o,r,s);else{var l={},c=Object.keys(o).sort(st);for(a=0;a<c.length;a++){var d=c[a];ie(o[d],d,a,n,o,r,s),l[d]=o[d]}if(typeof i<"u")A.push([i,e,o]),i[e]=l;else return l}n.pop()}}function ze(o){return o=typeof o<"u"?o:function(e,t){return t},function(e,t){if(D.length>0)for(var n=0;n<D.length;n++){var i=D[n];if(i[1]===e&&i[0]===t){t=i[2],D.splice(n,1);break}}return o.call(this,e,t)}}});var Lt={};nt(Lt,{DebugPanel:()=>ee,JsonView:()=>F,ScreenPosition:()=>Ae,debug:()=>Ue,getWindowSize:()=>M,makeDraggable:()=>q,makeResizable:()=>K});var rt='.debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .2s ease-in-out,visibility .2s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#1a1a1a;padding:6px 6px 0 6px;gap:3px;cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#2d2d2d;color:#888;padding:7px 8px;border:none;border-top-left-radius:6px;border-top-right-radius:6px;cursor:pointer;position:relative;box-shadow:inset 0 -2px 4px rgba(0,0,0,.3);font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#353535;color:#aaa}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:linear-gradient(to bottom, #3f6d9c, #24384d);color:#fff;box-shadow:0 -3px 8px rgba(0,102,204,.4),inset 0 1px 0 hsla(0,0%,100%,.2);z-index:1}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0px 15px;background:#0d0d0d}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:5px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:12px;font-weight:bold;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease-in-out,background .2s ease-in-out}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;background:rgba(85,170,255,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#28f}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;background:rgba(223,161,152,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{background:#f22}.debug-panel .debug-toolbar{display:flex;width:100%;align-items:center;justify-content:flex-end;gap:8px;padding:8px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap}.debug-panel .debug-toolbar .debug-keyboard-hint{margin-right:auto;color:#999;font-size:11px;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:5px;max-width:100px;min-width:40px;flex-shrink:1;padding:5px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;max-width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{background:#d9534f;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar{container-type:inline-size}@container (max-width: 350px){.debug-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel .debug-toolbar .debug-keyboard-hint{display:none}.debug-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}}.debug-panel.narrow-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel.narrow-panel .debug-toolbar .debug-keyboard-hint{margin-right:0;text-align:center}.debug-panel.narrow-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .2s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-state{position:relative;flex:1 0 100%;display:flex;flex-direction:column;margin-bottom:5px;margin-left:10px}.debug-state .json-toggle{position:absolute;top:2px;left:-22px;margin:0 10px 0 0;border:none;background:none;cursor:pointer;color:#888;font-size:14px;padding:0;width:20px;height:20px;transition:color .2s}.debug-state .json-toggle:hover{color:#fff}.debug-state .json-toggle:focus{outline:none}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 0;color:#ccc}.debug-state .debug-state-label:hover{color:#fff;cursor:pointer;text-decoration:underline}.debug-state .json-wrapper{position:relative;padding:5px;margin-left:-15px;background:#292929;border-radius:4px;border-left:3px solid #28a745}.debug-state .json-wrapper .debug-state-hover-actions{position:absolute;top:4px;right:4px;display:flex;gap:6px;opacity:0;transition:opacity .2s ease-in-out;z-index:10}.debug-state .json-wrapper:hover .debug-state-hover-actions{opacity:1}.debug-state .json-wrapper .debug-state-action-button{background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:16px;width:28px;height:28px;border-radius:4px;display:flex;align-items:center;justify-content:center;padding:0;transition:background .2s ease-in-out,transform .1s ease-in-out}.debug-state .json-wrapper .debug-state-action-button:hover{transform:scale(1.1)}.debug-state .json-wrapper .debug-state-action-button:active{transform:scale(0.95)}.debug-state .json-wrapper .debug-state-action-button:focus{outline:none}.debug-state .json-wrapper .debug-state-copy-button{background:rgba(85,170,255,.8)}.debug-state .json-wrapper .debug-state-copy-button:hover{background:#28f}.debug-state .json-wrapper .debug-state-delete-button{background:rgba(255,85,85,.8)}.debug-state .json-wrapper .debug-state-delete-button:hover{background:#f22}.debug-state.collapsed .json-wrapper{display:none}';if(typeof document<"u"){let o=document.createElement("style");o.textContent=rt,document.head.appendChild(o)}var ot=".json-node{position:relative;margin-left:20px;padding-left:0;font-size:12px;line-height:1.2em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:2px 0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe}.json-node .json-key.clickable{cursor:pointer}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;word-break:break-word;flex:1}.json-node .json-toggle{position:absolute;top:0px;left:-22px;border:none;background:none;cursor:pointer;color:#888;font-size:12px;padding:0;width:20px;height:20px;transition:color .2s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .collapsed .json-properties{display:none}";if(typeof document<"u"){let o=document.createElement("style");o.textContent=ot,document.head.appendChild(o)}var Z=Me(ke(),1),Ge=Me($e(),1);function at(o){var e;let t=/^\/(.*)\/([gimyu]*)$/.exec(o.toString());if(!t)throw new Error("Invalid RegExp");return new RegExp((e=t[1])!==null&&e!==void 0?e:"",t[2])}function N(o){if(typeof o!="object")return o;if(o===null)return null;if(Array.isArray(o))return o.map(N);if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return at(o);let e={};for(let t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=N(o[t]));return e}function Pe(o,e){if(o.length===0)throw new Error(e||"Expected a non-empty array")}var We=o=>o[o.length-1];var j=class{setResult(e){return this.result=e,this.hasResult=!0,this}exit(){return this.exiting=!0,this}push(e,t){return e.parent=this,typeof t<"u"&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?(Pe(this.children),We(this.children).next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}};var re=class extends j{constructor(e,t){super(),this.left=e,this.right=t,this.pipe="diff"}prepareDeltaResult(e){var t,n,i,r;if(typeof e=="object"&&(!((t=this.options)===null||t===void 0)&&t.omitRemovedValues&&Array.isArray(e)&&e.length>1&&(e.length===2||e[2]===0||e[2]===3)&&(e[0]=0),!((n=this.options)===null||n===void 0)&&n.cloneDiffValues)){let s=typeof((i=this.options)===null||i===void 0?void 0:i.cloneDiffValues)=="function"?(r=this.options)===null||r===void 0?void 0:r.cloneDiffValues:N;typeof e[0]=="object"&&(e[0]=s(e[0])),typeof e[1]=="object"&&(e[1]=s(e[1]))}return e}setResult(e){return this.prepareDeltaResult(e),super.setResult(e)}},C=re;var oe=class extends j{constructor(e,t){super(),this.left=e,this.delta=t,this.pipe="patch"}},_=oe;var se=class extends j{constructor(e){super(),this.delta=e,this.pipe="reverse"}},I=se;var ae=class{constructor(e){this.name=e,this.filters=[]}process(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");let t=this.debug,n=this.filters.length,i=e;for(let r=0;r<n;r++){let s=this.filters[r];if(s&&(t&&this.log(`filter: ${s.filterName}`),s(i),typeof i=="object"&&i.exiting)){i.exiting=!1;break}}!i.next&&this.resultCheck&&this.resultCheck(i)}log(e){console.log(`[jsondiffpatch] ${this.name} pipe, ${e}`)}append(...e){return this.filters.push(...e),this}prepend(...e){return this.filters.unshift(...e),this}indexOf(e){if(!e)throw new Error("a filter name is required");for(let t=0;t<this.filters.length;t++){let n=this.filters[t];if(n?.filterName===e)return t}throw new Error(`filter not found: ${e}`)}list(){return this.filters.map(e=>e.filterName)}after(e,...t){let n=this.indexOf(e);return this.filters.splice(n+1,0,...t),this}before(e,...t){let n=this.indexOf(e);return this.filters.splice(n,0,...t),this}replace(e,...t){let n=this.indexOf(e);return this.filters.splice(n,1,...t),this}remove(e){let t=this.indexOf(e);return this.filters.splice(t,1),this}clear(){return this.filters.length=0,this}shouldHaveResult(e){return e===!1?(this.resultCheck=null,this):this.resultCheck?this:(this.resultCheck=t=>{if(!t.hasResult){console.log(t);let n=new Error(`${this.name} failed`);throw n.noResult=!0,n}},this)}},G=ae;var le=class{constructor(e){this.selfOptions=e||{},this.pipes={}}options(e){return e&&(this.selfOptions=e),this.selfOptions}pipe(e,t){let n=t;if(typeof e=="string"){if(typeof n>"u")return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}if(!n)throw new Error(`pipe is not defined: ${e}`);return n.processor=this,n}process(e,t){let n=e;n.options=this.options();let i=t||e.pipe||"default",r;for(;i;)typeof n.nextAfterChildren<"u"&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),typeof i=="string"&&(i=this.pipe(i)),i.process(n),r=i,i=null,n&&n.next&&(n=n.next,i=n.pipe||r);return n.hasResult?n.result:void 0}},Be=le;var lt=(o,e,t,n)=>o[t]===e[n],dt=(o,e,t,n)=>{var i,r,s;let a=o.length,l=e.length,c,d,f=new Array(a+1);for(c=0;c<a+1;c++){let p=new Array(l+1);for(d=0;d<l+1;d++)p[d]=0;f[c]=p}for(f.match=t,c=1;c<a+1;c++){let p=f[c];if(p===void 0)throw new Error("LCS matrix row is undefined");let u=f[c-1];if(u===void 0)throw new Error("LCS matrix row is undefined");for(d=1;d<l+1;d++)t(o,e,c-1,d-1,n)?p[d]=((i=u[d-1])!==null&&i!==void 0?i:0)+1:p[d]=Math.max((r=u[d])!==null&&r!==void 0?r:0,(s=p[d-1])!==null&&s!==void 0?s:0)}return f},ct=(o,e,t,n)=>{let i=e.length,r=t.length,s={sequence:[],indices1:[],indices2:[]};for(;i!==0&&r!==0;){if(o.match===void 0)throw new Error("LCS matrix match function is undefined");if(o.match(e,t,i-1,r-1,n))s.sequence.unshift(e[i-1]),s.indices1.unshift(i-1),s.indices2.unshift(r-1),--i,--r;else{let l=o[i];if(l===void 0)throw new Error("LCS matrix row is undefined");let c=l[r-1];if(c===void 0)throw new Error("LCS matrix value is undefined");let d=o[i-1];if(d===void 0)throw new Error("LCS matrix row is undefined");let f=d[r];if(f===void 0)throw new Error("LCS matrix value is undefined");c>f?--r:--i}}return s},ut=(o,e,t,n)=>{let i=n||{},r=dt(o,e,t||lt,i);return ct(r,o,e,i)},qe={get:ut};var O=3;function pt(o,e,t,n){for(let i=0;i<t;i++){let r=o[i];for(let s=0;s<n;s++){let a=e[s];if(i!==s&&r===a)return!0}}return!1}function U(o,e,t,n,i){let r=o[t],s=e[n];if(r===s)return!0;if(typeof r!="object"||typeof s!="object")return!1;let a=i.objectHash;if(!a)return i.matchByPosition&&t===n;i.hashCache1=i.hashCache1||[];let l=i.hashCache1[t];if(typeof l>"u"&&(i.hashCache1[t]=l=a(r,t)),typeof l>"u")return!1;i.hashCache2=i.hashCache2||[];let c=i.hashCache2[n];return typeof c>"u"&&(i.hashCache2[n]=c=a(s,n)),typeof c>"u"?!1:l===c}var de=function(e){var t,n,i,r,s;if(!e.leftIsArray)return;let a={objectHash:(t=e.options)===null||t===void 0?void 0:t.objectHash,matchByPosition:(n=e.options)===null||n===void 0?void 0:n.matchByPosition},l=0,c=0,d,f,p,u=e.left,h=e.right,g=u.length,b=h.length,m;for(g>0&&b>0&&!a.objectHash&&typeof a.matchByPosition!="boolean"&&(a.matchByPosition=!pt(u,h,g,b));l<g&&l<b&&U(u,h,l,l,a);)d=l,m=new C(u[d],h[d]),e.push(m,d),l++;for(;c+l<g&&c+l<b&&U(u,h,g-1-c,b-1-c,a);)f=g-1-c,p=b-1-c,m=new C(u[f],h[p]),e.push(m,p),c++;let y;if(l+c===g){if(g===b){e.setResult(void 0).exit();return}for(y=y||{_t:"a"},d=l;d<b-c;d++)y[d]=[h[d]],e.prepareDeltaResult(y[d]);e.setResult(y).exit();return}if(l+c===b){for(y=y||{_t:"a"},d=l;d<g-c;d++){let w=`_${d}`;y[w]=[u[d],0,0],e.prepareDeltaResult(y[w])}e.setResult(y).exit();return}a.hashCache1=void 0,a.hashCache2=void 0;let T=u.slice(l,g-c),v=h.slice(l,b-c),x=qe.get(T,v,U,a),E=[];for(y=y||{_t:"a"},d=l;d<g-c;d++)if(x.indices1.indexOf(d-l)<0){let w=`_${d}`;y[w]=[u[d],0,0],e.prepareDeltaResult(y[w]),E.push(d)}let $=!0;!((i=e.options)===null||i===void 0)&&i.arrays&&e.options.arrays.detectMove===!1&&($=!1);let P=!1;!((s=(r=e.options)===null||r===void 0?void 0:r.arrays)===null||s===void 0)&&s.includeValueOnMove&&(P=!0);let k=E.length;for(d=l;d<b-c;d++){let w=x.indices2.indexOf(d-l);if(w<0){let L=!1;if($&&k>0)for(let J=0;J<k;J++){f=E[J];let X=f===void 0?void 0:y[`_${f}`];if(f!==void 0&&X&&U(T,v,f-l,d-l,a)){X.splice(1,2,d,O),X.splice(1,2,d,O),P||(X[0]=""),p=d,m=new C(u[f],h[p]),e.push(m,p),E.splice(J,1),L=!0;break}}L||(y[d]=[h[d]],e.prepareDeltaResult(y[d]))}else{if(x.indices1[w]===void 0)throw new Error(`Invalid indexOnArray2: ${w}, seq.indices1: ${x.indices1}`);if(f=x.indices1[w]+l,x.indices2[w]===void 0)throw new Error(`Invalid indexOnArray2: ${w}, seq.indices2: ${x.indices2}`);p=x.indices2[w]+l,m=new C(u[f],h[p]),e.push(m,p)}}e.setResult(y).exit()};de.filterName="arrays";var Je={numerically(o,e){return o-e},numericallyBy(o){return(e,t)=>e[o]-t[o]}},ce=function(e){var t;if(!e.nested)return;let n=e.delta;if(n._t!=="a")return;let i,r,s=n,a=e.left,l=[],c=[],d=[];for(i in s)if(i!=="_t")if(i[0]==="_"){let u=i;if(s[u]!==void 0&&(s[u][2]===0||s[u][2]===O))l.push(Number.parseInt(i.slice(1),10));else throw new Error(`only removal or move can be applied at original array indices, invalid diff type: ${(t=s[u])===null||t===void 0?void 0:t[2]}`)}else{let u=i;s[u].length===1?c.push({index:Number.parseInt(u,10),value:s[u][0]}):d.push({index:Number.parseInt(u,10),delta:s[u]})}for(l=l.sort(Je.numerically),i=l.length-1;i>=0;i--){if(r=l[i],r===void 0)continue;let u=s[`_${r}`],h=a.splice(r,1)[0];u?.[2]===O&&c.push({index:u[1],value:h})}c=c.sort(Je.numericallyBy("index"));let f=c.length;for(i=0;i<f;i++){let u=c[i];u!==void 0&&a.splice(u.index,0,u.value)}let p=d.length;if(p>0)for(i=0;i<p;i++){let u=d[i];if(u===void 0)continue;let h=new _(a[u.index],u.delta);e.push(h,u.index)}if(!e.children){e.setResult(a).exit();return}e.exit()};ce.filterName="arrays";var ue=function(e){if(!e||!e.children||e.delta._t!=="a")return;let n=e.left,i=e.children.length;for(let r=0;r<i;r++){let s=e.children[r];if(s===void 0)continue;let a=s.childName;n[a]=s.result}e.setResult(n).exit()};ue.filterName="arraysCollectChildren";var pe=function(e){if(!e.nested){let i=e.delta;if(i[2]===O){let r=i;e.newName=`_${r[1]}`,e.setResult([r[0],Number.parseInt(e.childName.substring(1),10),O]).exit()}return}let t=e.delta;if(t._t!=="a")return;let n=t;for(let i in n){if(i==="_t")continue;let r=new I(n[i]);e.push(r,i)}e.exit()};pe.filterName="arrays";var ft=(o,e,t)=>{if(typeof e=="string"&&e[0]==="_")return Number.parseInt(e.substring(1),10);if(Array.isArray(t)&&t[2]===0)return`_${e}`;let n=+e;for(let i in o){let r=o[i];if(Array.isArray(r))if(r[2]===O){let s=Number.parseInt(i.substring(1),10),a=r[1];if(a===+e)return s;s<=n&&a>n?n++:s>=n&&a<n&&n--}else r[2]===0?Number.parseInt(i.substring(1),10)<=n&&n++:r.length===1&&Number.parseInt(i,10)<=n&&n--}return n},fe=o=>{if(!o||!o.children)return;let e=o.delta;if(e._t!=="a")return;let t=e,n=o.children.length,i={_t:"a"};for(let r=0;r<n;r++){let s=o.children[r];if(s===void 0)continue;let a=s.newName;if(typeof a>"u"){if(s.childName===void 0)throw new Error("child.childName is undefined");a=ft(t,s.childName,s.result)}i[a]!==s.result&&(i[a]=s.result)}o.setResult(i).exit()};fe.filterName="arraysCollectChildren";var he=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};he.filterName="dates";var ge=o=>{if(!o||!o.children)return;let e=o.children.length,t=o.result;for(let n=0;n<e;n++){let i=o.children[n];if(i!==void 0&&!(typeof i.result>"u")){if(t=t||{},i.childName===void 0)throw new Error("diff child.childName is undefined");t[i.childName]=i.result}}t&&o.leftIsArray&&(t._t="a"),o.setResult(t).exit()};ge.filterName="collectChildren";var be=o=>{var e;if(o.leftIsArray||o.leftType!=="object")return;let t=o.left,n=o.right,i=(e=o.options)===null||e===void 0?void 0:e.propertyFilter;for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r)||i&&!i(r,o))continue;let s=new C(t[r],n[r]);o.push(s,r)}for(let r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&!(i&&!i(r,o))&&typeof t[r]>"u"){let s=new C(void 0,n[r]);o.push(s,r)}if(!o.children||o.children.length===0){o.setResult(void 0).exit();return}o.exit()};be.filterName="objects";var me=function(e){if(!e.nested)return;let t=e.delta;if(t._t)return;let n=t;for(let i in n){let r=new _(e.left[i],n[i]);e.push(r,i)}e.exit()};me.filterName="objects";var ye=function(e){if(!e||!e.children||e.delta._t)return;let n=e.left,i=e.children.length;for(let r=0;r<i;r++){let s=e.children[r];if(s===void 0)continue;let a=s.childName;Object.prototype.hasOwnProperty.call(e.left,a)&&s.result===void 0?delete n[a]:n[a]!==s.result&&(n[a]=s.result)}e.setResult(n).exit()};ye.filterName="collectChildren";var ve=function(e){if(!e.nested||e.delta._t)return;let n=e.delta;for(let i in n){let r=new I(n[i]);e.push(r,i)}e.exit()};ve.filterName="objects";var xe=o=>{if(!o||!o.children||o.delta._t)return;let t=o.children.length,n={};for(let i=0;i<t;i++){let r=o.children[i];if(r===void 0)continue;let s=r.childName;n[s]!==r.result&&(n[s]=r.result)}o.setResult(n).exit()};xe.filterName="collectChildren";var we=null;function Xe(o,e){var t;if(!we){let n;if(!((t=o?.textDiff)===null||t===void 0)&&t.diffMatchPatch)n=new o.textDiff.diffMatchPatch;else{if(!e)return null;let i=new Error("The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.");throw i.diff_match_patch_not_found=!0,i}we={diff:(i,r)=>n.patch_toText(n.patch_make(i,r)),patch:(i,r)=>{let s=n.patch_apply(n.patch_fromText(r),i);for(let a of s[1])if(!a){let l=new Error("text patch failed");throw l.textPatchFailed=!0,l}return s[0]}}}return we}var Ee=function(e){var t,n;if(e.leftType!=="string")return;let i=e.left,r=e.right,s=((n=(t=e.options)===null||t===void 0?void 0:t.textDiff)===null||n===void 0?void 0:n.minLength)||60;if(i.length<s||r.length<s){e.setResult([i,r]).exit();return}let a=Xe(e.options);if(!a){e.setResult([i,r]).exit();return}let l=a.diff;e.setResult([l(i,r),0,2]).exit()};Ee.filterName="texts";var Le=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==2)return;let n=t,i=Xe(e.options,!0).patch;e.setResult(i(e.left,n[0])).exit()};Le.filterName="texts";var mt=o=>{var e,t,n;let i=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,r=o.split(`
`);for(let s=0;s<r.length;s++){let a=r[s];if(a===void 0)continue;let l=a.slice(0,1);if(l==="@"){let c=i.exec(a);if(c!==null){let d=s;r[d]=`@@ -${c[3]},${c[4]} +${c[1]},${c[2]} @@`}}else if(l==="+"){if(r[s]=`-${(e=r[s])===null||e===void 0?void 0:e.slice(1)}`,((t=r[s-1])===null||t===void 0?void 0:t.slice(0,1))==="+"){let c=r[s];r[s]=r[s-1],r[s-1]=c}}else l==="-"&&(r[s]=`+${(n=r[s])===null||n===void 0?void 0:n.slice(1)}`)}return r.join(`
`)},Ce=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==2)return;let n=t;e.setResult([mt(n[0]),0,2]).exit()};Ce.filterName="texts";var Te=function(e){if(e.left===e.right){e.setResult(void 0).exit();return}if(typeof e.left>"u"){if(typeof e.right=="function")throw new Error("functions are not supported");e.setResult([e.right]).exit();return}if(typeof e.right>"u"){e.setResult([e.left,0,0]).exit();return}if(typeof e.left=="function"||typeof e.right=="function")throw new Error("functions are not supported");if(e.leftType=e.left===null?"null":typeof e.left,e.rightType=e.right===null?"null":typeof e.right,e.leftType!==e.rightType){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="boolean"||e.leftType==="number"){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="object"&&(e.leftIsArray=Array.isArray(e.left)),e.rightType==="object"&&(e.rightIsArray=Array.isArray(e.right)),e.leftIsArray!==e.rightIsArray){e.setResult([e.left,e.right]).exit();return}e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit())};Te.filterName="trivial";var je=function(e){if(typeof e.delta>"u"){e.setResult(e.left).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(t.length===1){e.setResult(t[0]).exit();return}if(t.length===2){if(e.left instanceof RegExp){let n=/^\/(.*)\/([gimyu]+)$/.exec(t[1]);if(n?.[1]){e.setResult(new RegExp(n[1],n[2])).exit();return}}e.setResult(t[1]).exit();return}t.length===3&&t[2]===0&&e.setResult(void 0).exit()};je.filterName="trivial";var Se=function(e){if(typeof e.delta>"u"){e.setResult(e.delta).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(t.length===1){e.setResult([t[0],0,0]).exit();return}if(t.length===2){e.setResult([t[1],t[0]]).exit();return}t.length===3&&t[2]===0&&e.setResult([t[0]]).exit()};Se.filterName="trivial";var Re=class{constructor(e){this.processor=new Be(e),this.processor.pipe(new G("diff").append(ge,Te,he,Ee,be,de).shouldHaveResult()),this.processor.pipe(new G("patch").append(ye,ue,je,Le,me,ce).shouldHaveResult()),this.processor.pipe(new G("reverse").append(xe,fe,Se,Ce,ve,pe).shouldHaveResult())}options(e){return this.processor.options(e)}diff(e,t){return this.processor.process(new C(e,t))}patch(e,t){return this.processor.process(new _(e,t))}reverse(e){return this.processor.process(new I(e))}unpatch(e,t){return this.patch(e,this.reverse(t))}clone(e){return N(e)}},De=Re;var z;function Ve(o,e){return z||(z=new De),z.diff(o,e)}function Ye(o,e){return z||(z=new De),z.patch(o,e)}var S="\u25BA",R="\u25BC";var wt=()=>({expandAll:!1,expandObjects:[],useViewState:!0}),F=class{constructor(e,t,n){this.viewStates={};this.json=e,this.parentContainer=t,this.options=Object.assign({},wt(),n||{}),this.render()}render(){this.parentContainer.innerHTML="";let e=this.drawJsonNode(this.json);this.parentContainer.appendChild(e)}toggleExpandNode(e,t,n){let i=e.classList.contains("collapsed");e.classList.toggle("collapsed",!i),this.viewStates[t]=!i,n&&(n.textContent=i?S:R)}drawJsonNode(e,t=""){let n=document.createElement("div");n.classList.add("json-node");let i=document.createElement("div");i.classList.add("json-properties");for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let s=`${t}${r}`,a=document.createElement("div");a.classList.add("json-property"),a.setAttribute("data-path",s);let l=document.createElement("span");l.classList.add("json-key"),l.textContent=r+": ";let c=document.createElement("div");c.classList.add("json-value");let d=e[r],f=typeof d=="object"&&d!==null,p=Array.isArray(d);if(f){l.classList.add("clickable"),p?l.textContent=`${r} (${d.length})`:l.textContent=r;let u=p&&d.length>0?!0:Object.keys(d).length>0;a.classList.add("object");let h=document.createElement("button");h.classList.add("json-toggle");let g=this.drawJsonNode(d,s+"/");if(this.options.expandAll)h.textContent=R;else{let b=!1;p&&u?b=!0:this.options.expandObjs?.forEach(m=>{new RegExp(m).test(s)&&(b=!0)}),this.options.useViewState&&typeof this.viewStates[s]<"u"&&(b=!this.viewStates[s]),b?h.textContent=R:(h.textContent=S,g.classList.add("collapsed"))}h.onclick=()=>this.toggleExpandNode(g,s,h),l.onclick=()=>this.toggleExpandNode(g,s,h),a.appendChild(h),c.appendChild(g)}else c.textContent=String(d);a.appendChild(l),a.appendChild(c),i.appendChild(a)}return n.appendChild(i),n}updateJson(e){let t=Ve(this.json,e);t&&(Ye(this.json,t),this.patchDOM(t))}patchDOM(e,t=""){for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let i=e[n],r=t?`${t}${n}`:n;if(n==="_t")continue;let s=this.parentContainer.querySelector(`.json-property[data-path="${r}"]`);Array.isArray(i)?i.length===2?this.updateValueNode(s,r,this.getValueAtPath(this.json,r)):i.length===3&&i[1]===0&&i[2]===0?s&&s.remove():i.length===1&&this.addPropertyNode(r,i[0]):typeof i=="object"&&this.patchDOM(i,r+"/")}}getValueAtPath(e,t){let n=t.split("/").filter(r=>r),i=e;for(let r of n){if(i==null)return;i=i[r]}return i}updateValueNode(e,t,n){if(!e)return;let i=e.querySelector(".json-value");if(!i)return;if(typeof n=="object"&&n!==null){let s=t.split("/").filter(u=>u).pop()||"",a=t.substring(0,t.lastIndexOf(s));i.innerHTML="",e.classList.add("object");let l=e.querySelector(".json-key"),c=Array.isArray(n);l&&(l.classList.add("clickable"),c?l.textContent=`${s} (${n.length})`:l.textContent=s);let d=e.querySelector(".json-toggle");d||(d=document.createElement("button"),d.classList.add("json-toggle"),e.insertBefore(d,l));let f=this.drawJsonNode(n,t+"/"),p=this.viewStates[t];typeof p<"u"?p?d.textContent=R:(d.textContent=S,f.classList.add("collapsed")):(d.textContent=S,f.classList.add("collapsed")),d.onclick=()=>this.toggleExpandNode(f,t,d),l&&(l.onclick=()=>this.toggleExpandNode(f,t,d)),i.appendChild(f)}else{e.classList.remove("object");let s=e.querySelector(".json-toggle");s&&s.remove(),i.innerHTML="",i.textContent=String(n)}}addPropertyNode(e,t){let n=e.split("/").filter(p=>p),i=n.pop()||"",r=n.join("/"),s;if(r){let p=this.parentContainer.querySelector(`.json-property[data-path="${r}"]`);if(p)s=p.querySelector(".json-properties");else return}else s=this.parentContainer.querySelector(".json-properties");if(!s)return;let a=document.createElement("div");a.classList.add("json-property"),a.setAttribute("data-path",e);let l=document.createElement("span");l.classList.add("json-key"),l.textContent=i+": ";let c=document.createElement("div");c.classList.add("json-value");let d=typeof t=="object"&&t!==null,f=Array.isArray(t);if(d){l.classList.add("clickable"),f?l.textContent=`${i} (${t.length})`:l.textContent=i,a.classList.add("object");let p=document.createElement("button");p.classList.add("json-toggle"),p.textContent=S;let u=this.drawJsonNode(t,e+"/");u.classList.add("collapsed"),p.onclick=()=>this.toggleExpandNode(u,e,p),l.onclick=()=>this.toggleExpandNode(u,e,p),a.appendChild(p),c.appendChild(u)}else c.textContent=String(t);a.appendChild(l),a.appendChild(c),s.appendChild(a)}};function K(o,e={}){o.querySelectorAll(".resize-handle").forEach(v=>v.remove());let{handles:t=["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:n=1/0,maxHeight:i=1/0,minWidth:r=100,minHeight:s=100,onResize:a=()=>{}}=e,l=!1,c=null,d=0,f=0,p=0,u=0,h=0,g=0;function b(v){let x=document.createElement("div");x.classList.add("resize-handle",`resize-${v}`),x.addEventListener("mousedown",E=>m(E,v)),o.appendChild(x)}function m(v,x){l=!0,c=x,d=v.clientX,f=v.clientY,p=o.offsetWidth,u=o.offsetHeight,h=o.offsetLeft,g=o.offsetTop,v.preventDefault(),v.stopPropagation(),document.addEventListener("mousemove",y),document.addEventListener("mouseup",T)}function y(v){if(!l||!c)return;let x=p,E=u,$=h,P=g,k=v.clientX-d,w=v.clientY-f;if(c.includes("right")&&(x=Math.min(Math.max(p+k,r),n)),c.includes("left")){let L=p-k;L>=r&&L<=n&&(x=L,$=h+k)}if(c.includes("bottom")&&(E=Math.min(Math.max(u+w,s),i)),c.includes("top")){let L=u-w;L>=s&&L<=i&&(E=L,P=g+w)}o.style.width=`${x}px`,o.style.height=`${E}px`,o.style.left=`${$}px`,o.style.top=`${P}px`,a(x,E)}function T(){l=!1,c=null,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",T)}t.forEach(v=>b(v))}function q(o,e,t={}){let n=e||o,i=!1,r=0,s=0,a=0,l=0,{onDragStart:c,onDrag:d,onDragEnd:f}=t;function p(g){let b=g.target;if(b.tagName==="BUTTON"||b.closest("button"))return;i=!0,r=g.clientX,s=g.clientY;let m=getComputedStyle(o);a=parseInt(m.left)||o.offsetLeft,l=parseInt(m.top)||o.offsetTop,m.position!=="absolute"&&m.position!=="fixed"&&(o.style.position="absolute",o.style.left=`${a}px`,o.style.top=`${l}px`),g.preventDefault(),n.style.cursor="grabbing",c&&c(g),document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)}function u(g){if(!i)return;let b=g.clientX-r,m=g.clientY-s,y=a+b,T=l+m;if(d){let v=d(y,T);v&&typeof v=="object"&&(typeof v.x=="number"&&(y=v.x),typeof v.y=="number"&&(T=v.y))}o.style.left=`${y}px`,o.style.top=`${T}px`}function h(){i&&(i=!1,n.style.cursor="grab",f&&f(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h))}return n.style.cursor="grab",n.addEventListener("mousedown",p),()=>{n.removeEventListener("mousedown",p),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",h)}}function M(){let o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{width:o,height:e}}var Q="objects",Ae=(l=>(l.TopLeft="topLeft",l.Top="top",l.TopRight="topRight",l.Right="right",l.BottomRight="bottomRight",l.Bottom="bottom",l.BottomLeft="bottomLeft",l.Left="left",l))(Ae||{}),Et=280,ee=class{constructor(e={}){this.tabEntries={};this.debugStates={};this.activeTab="global";this.resizeThrottleTimer=null;this.options={position:"bottomRight",width:600,height:400,snap:!0,snapPadding:20,...e},this.container=this.createContainer(),this.tabContainer=this.createTabContainer(),this.contentContainer=this.createContentContainer(),this.container.appendChild(this.tabContainer),this.container.appendChild(this.contentContainer),this.toolbar=this.createGlobalToolbar(),this.container.appendChild(this.toolbar),document.body.appendChild(this.container),this.addTab(Q),this.addTab("global"),this.restoreSettings(),this.setupResizable(),this.setupDraggable(),this.setupEventListeners(),this.setupKeyboardShortcut(),this.setupWindowResizeListener(),e.show&&!this.loadSettings()&&this.show()}createContainer(){let e=document.createElement("div");return e.classList.add("debug-panel"),e.style.width=`${this.options.width}px`,e.style.height=`${this.options.height}px`,e.style.position="fixed",e.style.opacity="1",e}createTabContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-tabs"),e}createContentContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-content"),e}createGlobalToolbar(){let e=document.createElement("div");e.classList.add("debug-toolbar");let t=document.createElement("span");t.classList.add("debug-keyboard-hint"),t.textContent="Ctrl+Alt+D to hide/show",t.style.color="#999",t.style.fontSize="11px";let n=document.createElement("div");n.classList.add("debug-opacity-container");let i=document.createElement("label");i.classList.add("debug-opacity-label"),i.textContent="O",i.style.fontSize="11px",i.style.color="#999",i.style.marginRight="5px",this.opacitySlider=document.createElement("input"),this.opacitySlider.type="range",this.opacitySlider.min="20",this.opacitySlider.max="100",this.opacitySlider.value="100",this.opacitySlider.classList.add("debug-opacity-slider"),this.opacitySlider.oninput=()=>this.handleOpacityChange(),n.appendChild(this.opacitySlider);let r=document.createElement("button");r.classList.add("debug-clear-button"),r.textContent="Clear",r.onclick=()=>this.clearCurrentTab();let s=document.createElement("button");return s.classList.add("debug-hide-button"),s.textContent="Hide",s.onclick=()=>this.hide(),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(s),e}setupEventListeners(){Z.default.addEventListener("log",e=>{let{namespace:t,message:n}=e.target;this.log(t,n)}),Z.default.addEventListener("debug",e=>{let{id:t,state:n}=e.target;if(!t||!n){console.log("Invalid event data for debug-state. Expected {id, state}, got:",e);return}this.debug(t,n)})}setupResizable(){let{width:e,height:t}=M();K(this.container,{handles:["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:e-20,maxHeight:t-20,minWidth:200,minHeight:150,onResize:n=>{this.updateToolbarLayout(n),this.saveSettings()}})}setupDraggable(){this.options.snap?q(this.container,this.tabContainer,{onDrag:(e,t)=>this.handleSnapWhileDragging(e,t),onDragEnd:()=>this.saveSettings()}):q(this.container,this.tabContainer,{onDragEnd:()=>this.saveSettings()})}setupPosition(){let{width:e,height:t}=M(),n=this.options.width||600,i=this.options.height||400,r=0,s=0;switch(this.options.position){case"topLeft":r=0,s=0;break;case"top":r=(e-n)/2,s=0;break;case"topRight":r=e-n,s=0;break;case"right":r=e-n,s=(t-i)/2;break;case"bottomRight":r=e-n,s=t-i;break;case"bottom":r=(e-n)/2,s=t-i;break;case"bottomLeft":r=0,s=t-i;break;case"left":r=0,s=(t-i)/2;break}this.container.style.left=`${r}px`,this.container.style.top=`${s}px`}setupKeyboardShortcut(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.altKey&&e.key.toLowerCase()==="d"&&(e.preventDefault(),this.toggle())})}setupWindowResizeListener(){window.addEventListener("resize",()=>{this.resizeThrottleTimer===null&&(this.resizeThrottleTimer=window.setTimeout(()=>{this.resizeThrottleTimer=null,this.repositionOnWindowResize()},50))})}repositionOnWindowResize(){let{width:e,height:t}=M(),n=this.container.offsetWidth,i=this.container.offsetHeight,r=parseInt(this.container.style.left)||this.container.offsetLeft,s=parseInt(this.container.style.top)||this.container.offsetTop,a=r,l=e-(r+n),c=s,d=t-(s+i),f=50,p=a<f,u=l<f,h=c<f,g=d<f,b=r,m=s;u?b=e-n:p?b=0:b=Math.max(0,Math.min(e-n,r)),g?m=t-i:h?m=0:m=Math.max(0,Math.min(t-i,s)),b=Math.max(0,Math.min(e-n,b)),m=Math.max(0,Math.min(t-i,m)),this.container.style.left=`${b}px`,this.container.style.top=`${m}px`,this.saveSettings()}restoreSettings(){let e=this.loadSettings();if(e){this.container.style.left=`${e.left}px`,this.container.style.top=`${e.top}px`,this.container.style.width=`${e.width}px`,this.container.style.height=`${e.height}px`;let t=e.opacity!==void 0?e.opacity:1;this.container.style.opacity=String(t),this.opacitySlider&&(this.opacitySlider.value=String(Math.round(t*100))),e.visible?this.container.classList.add("visible"):this.container.classList.remove("visible")}else this.setupPosition()}loadSettings(){try{let e=localStorage.getItem("debugPanelSettings");if(e)return JSON.parse(e)}catch(e){console.error("Failed to load debug panel settings:",e)}return null}saveSettings(){try{let e=parseFloat(this.container.style.opacity)||1,t={left:parseInt(this.container.style.left)||this.container.offsetLeft,top:parseInt(this.container.style.top)||this.container.offsetTop,width:this.container.offsetWidth,height:this.container.offsetHeight,visible:this.container.classList.contains("visible"),opacity:e};localStorage.setItem("debugPanelSettings",JSON.stringify(t))}catch(e){console.error("Failed to save debug panel settings:",e)}}debug(e,t){let n=e,i=t;!t&&typeof e=="object"&&(n="object",i=e),this.debugStates[n]?this.updateDebugState(n,i):this.addDebugState(n,i)}updateDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${Q}"]`);if(!n){console.error("No content for debug namespace.");return}let i=n.querySelector(`#debug-state-${e}`);if(!i){console.error(`No debug state found for ${e}.`);return}let r=i.querySelector(".json-wrapper");if(!r){console.error(`No json wrapper found for existing state ${e}`);return}r.innerHTML="",this.debugStates[e].state=t,this.debugStates[e].jsonView.updateJson(t)}addDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${Q}"]`);if(!n){console.error("No content for debug namespace.");return}let i=document.createElement("div");i.classList.add("debug-state"),i.setAttribute("id",`debug-state-${e}`);let r=()=>{let u=this.debugStates[e].isExpanded;this.debugStates[e].isExpanded=!u,i.classList.toggle("collapsed",u),s.textContent=u?S:R},s=document.createElement("button");s.classList.add("json-toggle"),s.textContent=R,s.onclick=r,i.appendChild(s);let a=document.createElement("div");a.classList.add("debug-state-label"),a.innerText=e||"untitled",a.onclick=r,i.appendChild(a);let l=document.createElement("div");l.classList.add("json-wrapper"),i.appendChild(l);let c=new F(t,l,{}),d=document.createElement("div");d.classList.add("debug-state-hover-actions");let f=document.createElement("button");f.classList.add("debug-state-action-button","debug-state-copy-button"),f.innerHTML="\u{1F4CB}",f.title="Copy JSON to clipboard",f.onclick=()=>this.copyDebugStateToClipboard(e,t,f),d.appendChild(f);let p=document.createElement("button");p.classList.add("debug-state-action-button","debug-state-delete-button"),p.innerHTML="\u{1F5D1}\uFE0F",p.title="Delete this object",p.onclick=()=>this.removeDebugState(e),d.appendChild(p),l.appendChild(d),this.debugStates[e]={state:t,jsonView:c,isExpanded:!0},n.appendChild(i)}copyDebugStateToClipboard(e,t,n){try{let i=JSON.stringify(t,null,2);navigator.clipboard.writeText(i).then(()=>{let r=n.innerHTML;n.innerHTML="\u2713",n.style.background="rgba(40, 167, 69, 0.8)",setTimeout(()=>{n.innerHTML=r,n.style.background=""},2e3)}).catch(r=>{console.error("Failed to copy to clipboard:",r)})}catch(i){console.error("Failed to stringify state:",i)}}removeDebugState(e){let t=document.getElementById(`debug-state-${e}`);t&&t.remove(),delete this.debugStates[e]}addTab(e){if(this.tabEntries[e])return;this.tabEntries[e]=[];let t=document.createElement("button");t.classList.add("debug-tab"),t.textContent=e,t.onclick=()=>this.switchTab(e),this.tabContainer.appendChild(t);let n=document.createElement("div");n.classList.add("debug-tab-content"),n.dataset.namespace=e,this.contentContainer.appendChild(n),Object.keys(this.tabEntries).length===1&&this.switchTab(e)}clearCurrentTab(){this.clearTab(this.activeTab)}clearTab(e){let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(this.tabEntries[e]=[],e===Q&&Object.keys(this.debugStates).forEach(n=>{delete this.debugStates[n]}),t.innerHTML="")}switchTab(e){this.activeTab=e,this.tabContainer.querySelectorAll(".debug-tab").forEach((n,i)=>{let r=Object.keys(this.tabEntries)[i];n.classList.toggle("active",r===e)}),this.contentContainer.querySelectorAll(".debug-tab-content").forEach(n=>{n.style.display="none"});let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(t.style.display="block")}log(e,t){this.tabEntries[e]||this.addTab(e);let n={id:`${e}-${Date.now()}-${Math.random()}`,message:t,timestamp:new Date};this.tabEntries[e].push(n);let i=this.contentContainer.querySelector(`[data-namespace="${e}"]`);if(!i)return;let r=this.createLogElement(n,e);i.appendChild(r),e!=="global"&&this.log("global",t)}createLogElement(e,t){let n=document.createElement("div");n.classList.add("debug-log-entry"),n.dataset.logId=e.id;let i=document.createElement("div");i.innerText=`[${e.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(e.message)}`,i.classList.add("debug-log-entry-text");let r=document.createElement("button");r.innerText="\u{1F4CB}",r.classList.add("debug-copy-button"),r.onclick=()=>navigator.clipboard.writeText(i.innerText);let s=document.createElement("button");return s.innerText="\u274C",s.classList.add("debug-delete-button"),s.onclick=()=>this.removeLogEntry(t,e.id,n),n.appendChild(i),n.appendChild(r),n.appendChild(s),n}removeLogEntry(e,t,n){this.tabEntries[e]=this.tabEntries[e].filter(i=>i.id!==t),n.remove()}renderLogEntry(e){return Array.isArray(e)?e.join(" "):typeof e=="object"?(0,Ge.default)(e):String(e)}updateToolbarLayout(e){e<Et?this.container.classList.add("narrow-panel"):this.container.classList.remove("narrow-panel")}handleOpacityChange(){let t=parseInt(this.opacitySlider.value)/100;this.container.classList.contains("visible")&&(this.container.style.opacity=String(t)),this.saveSettings()}handleSnapWhileDragging(e,t){let n=this.options.snapPadding||20,{width:i,height:r}=M(),s=this.container.offsetWidth,a=this.container.offsetHeight,l=e,c=t;return e<n?l=0:e+s>i-n&&(l=i-s),t<n?c=0:t+a>r-n&&(c=r-a),{x:l,y:c}}show(){this.container.classList.add("visible");let e=parseFloat(this.container.style.opacity)||1;this.container.style.opacity=String(e),this.saveSettings()}hide(){this.container.classList.remove("visible"),this.saveSettings()}toggle(){this.container.classList.contains("visible")?this.hide():this.show()}};function Ue(o,e){Z.default.dispatch("debug",{id:o,state:e})}return it(Lt);})();
// Export to global window object for easier access
if (typeof window !== 'undefined') {
  window.DebugPanel = DevDebugPanel.DebugPanel;
  window.debug = DevDebugPanel.debug;
  window.JsonView = DevDebugPanel.JsonView;
  window.ScreenPosition = DevDebugPanel.ScreenPosition;
}
//# sourceMappingURL=index.umd.js.map
