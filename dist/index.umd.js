"use strict";var DebugPanelLogger=(()=>{var Ge=Object.create;var V=Object.defineProperty;var Ue=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var Qe=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty;var Ae=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),et=(r,e)=>{for(var t in e)V(r,t,{get:e[t],enumerable:!0})},Ne=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ke(e))!Ze.call(r,i)&&i!==t&&V(r,i,{get:()=>e[i],enumerable:!(n=Ue(e,i))||n.enumerable});return r};var ke=(r,e,t)=>(t=r!=null?Ge(Qe(r)):{},Ne(e||!r||!r.__esModule?V(t,"default",{value:r,enumerable:!0}):t,r)),tt=r=>Ne(V({},"__esModule",{value:!0}),r);var Oe=Ae(($,Z)=>{(function(r,e){typeof $=="object"&&typeof Z=="object"?Z.exports=e():typeof define=="function"&&define.amd?define("EventBus",[],e):typeof $=="object"?$.EventBus=e():r.EventBus=e()})($,function(){var r={};r=function(){this.listeners={}},r.prototype={addEventListener:function(t,n,i){for(var o=[],s=arguments.length,a=0;a<s;a++)o.push(arguments[a]);o=o.length>3?o.splice(3,o.length-1):[],typeof this.listeners[t]<"u"?this.listeners[t].push({scope:i,callback:n,args:o}):this.listeners[t]=[{scope:i,callback:n,args:o}]},removeEventListener:function(t,n,i){if(typeof this.listeners[t]<"u"){for(var o=this.listeners[t].length,s=[],a=0;a<o;a++){var l=this.listeners[t][a];l.scope==i&&l.callback==n||s.push(l)}this.listeners[t]=s}},hasEventListener:function(t,n,i){if(typeof this.listeners[t]<"u"){var o=this.listeners[t].length;if(n===void 0&&i===void 0)return o>0;for(var s=0;s<o;s++){var a=this.listeners[t][s];if((!i||a.scope==i)&&a.callback==n)return!0}}return!1},dispatch:function(t,n){for(var i={type:t,target:n},o=[],s=arguments.length,a=0;a<s;a++)o.push(arguments[a]);if(o=o.length>2?o.splice(2,o.length-1):[],o=[i].concat(o),typeof this.listeners[t]<"u")for(var l=this.listeners[t].slice(),u=l.length,a=0;a<u;a++){var d=l[a];if(d&&d.callback){var p=o.concat(d.args);d.callback.apply(d.scope,p)}}},getEvents:function(){var t="";for(var n in this.listeners)for(var i=this.listeners[n].length,o=0;o<i;o++){var s=this.listeners[n][o];t+=s.scope&&s.scope.className?s.scope.className:"anonymous",t+=" listen for '"+n+`'
`}return t}};var e=new r;return e})});var He=Ae((St,Ie)=>{Ie.exports=P;P.default=P;P.stable=Me;P.stableStringify=Me;var X="[...]",_e="[Circular]",j=[],T=[];function Fe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function P(r,e,t,n){typeof n>"u"&&(n=Fe()),ee(r,"",0,[],void 0,0,n);var i;try{T.length===0?i=JSON.stringify(r,e,t):i=JSON.stringify(r,ze(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;j.length!==0;){var o=j.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function k(r,e,t,n){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:r}),j.push([n,t,e,i])):T.push([e,t,r]):(n[t]=r,j.push([n,t,e]))}function ee(r,e,t,n,i,o,s){o+=1;var a;if(typeof r=="object"&&r!==null){for(a=0;a<n.length;a++)if(n[a]===r){k(_e,r,e,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){k(X,r,e,i);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){k(X,r,e,i);return}if(n.push(r),Array.isArray(r))for(a=0;a<r.length;a++)ee(r[a],a,a,n,r,o,s);else{var l=Object.keys(r);for(a=0;a<l.length;a++){var u=l[a];ee(r[u],u,a,n,r,o,s)}}n.pop()}}function rt(r,e){return r<e?-1:r>e?1:0}function Me(r,e,t,n){typeof n>"u"&&(n=Fe());var i=te(r,"",0,[],void 0,0,n)||r,o;try{T.length===0?o=JSON.stringify(i,e,t):o=JSON.stringify(i,ze(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;j.length!==0;){var s=j.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return o}function te(r,e,t,n,i,o,s){o+=1;var a;if(typeof r=="object"&&r!==null){for(a=0;a<n.length;a++)if(n[a]===r){k(_e,r,e,i);return}try{if(typeof r.toJSON=="function")return}catch{return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){k(X,r,e,i);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){k(X,r,e,i);return}if(n.push(r),Array.isArray(r))for(a=0;a<r.length;a++)te(r[a],a,a,n,r,o,s);else{var l={},u=Object.keys(r).sort(rt);for(a=0;a<u.length;a++){var d=u[a];te(r[d],d,a,n,r,o,s),l[d]=r[d]}if(typeof i<"u")j.push([i,e,r]),i[e]=l;else return l}n.pop()}}function ze(r){return r=typeof r<"u"?r:function(e,t){return t},function(e,t){if(T.length>0)for(var n=0;n<T.length;n++){var i=T[n];if(i[1]===e&&i[0]===t){t=i[2],T.splice(n,1);break}}return r.call(this,e,t)}}});var wt={};et(wt,{DebugPanel:()=>Q,JsonView:()=>M,ScreenPosition:()=>De,debug:()=>Ye,getWindowSize:()=>z,makeDraggable:()=>W,makeResizable:()=>G});var nt=".debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .2s ease-in-out,visibility .2s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#111;padding:5px;gap:5px;border-bottom:1px solid hsla(0,0%,100%,.1);cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#333;color:#ccc;padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background .2s ease-in-out}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#444;color:#fff}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:#007bff;color:#fff}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0px 15px;background:#1a1a1a}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:5px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:12px;font-weight:bold;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease-in-out,background .2s ease-in-out}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;background:rgba(85,170,255,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#28f}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;background:rgba(255,85,85,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{background:#f22}.debug-panel .debug-toolbar{display:flex;width:100%;align-items:center;justify-content:flex-end;gap:8px;padding:8px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap}.debug-panel .debug-toolbar .debug-keyboard-hint{margin-right:auto;color:#999;font-size:11px;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:5px;max-width:100px;min-width:40px;flex-shrink:1;padding:5px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;max-width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{background:#d9534f;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar{container-type:inline-size}@container (max-width: 350px){.debug-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel .debug-toolbar .debug-keyboard-hint{display:none}.debug-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}}.debug-panel.narrow-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel.narrow-panel .debug-toolbar .debug-keyboard-hint{margin-right:0;text-align:center}.debug-panel.narrow-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .2s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-state{position:relative;flex:1 0 100%;display:flex;flex-direction:column;margin-bottom:10px;margin-left:10px}.debug-state .json-toggle{position:absolute;top:7px;left:-20px;margin-right:5px;border:none;background:none;cursor:pointer;color:#888;font-size:14px;padding:0;width:20px;height:20px;transition:color .2s}.debug-state .json-toggle:hover{color:#fff}.debug-state .json-toggle:focus{outline:none}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 0;color:#ccc}.debug-state .debug-state-label:hover{color:#fff;cursor:pointer;text-decoration:underline}.debug-state .json-wrapper{padding:5px;margin-left:-15px;background:#292929;border-radius:4px;border-left:3px solid #28a745}.debug-state.collapsed .json-wrapper{display:none}";if(typeof document<"u"){let r=document.createElement("style");r.textContent=nt,document.head.appendChild(r)}var it=".json-node{position:relative;margin-left:20px;padding-left:0;font-size:12px;line-height:1.4em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:2px 0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe}.json-node .json-key.clickable{cursor:pointer}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;word-break:break-word;flex:1}.json-node .json-toggle{position:absolute;top:2px;left:-20px;border:none;background:none;cursor:pointer;color:#888;font-size:12px;padding:0;width:16px;height:16px;transition:color .2s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .collapsed .json-properties{display:none}";if(typeof document<"u"){let r=document.createElement("style");r.textContent=it,document.head.appendChild(r)}var K=ke(Oe(),1),je=ke(He(),1);function ot(r){var e;let t=/^\/(.*)\/([gimyu]*)$/.exec(r.toString());if(!t)throw new Error("Invalid RegExp");return new RegExp((e=t[1])!==null&&e!==void 0?e:"",t[2])}function D(r){if(typeof r!="object")return r;if(r===null)return null;if(Array.isArray(r))return r.map(D);if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp)return ot(r);let e={};for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=D(r[t]));return e}function $e(r,e){if(r.length===0)throw new Error(e||"Expected a non-empty array")}var Pe=r=>r[r.length-1];var S=class{setResult(e){return this.result=e,this.hasResult=!0,this}exit(){return this.exiting=!0,this}push(e,t){return e.parent=this,typeof t<"u"&&(e.childName=t),e.root=this.root||this,e.options=e.options||this.options,this.children?($e(this.children),Pe(this.children).next=e,this.children.push(e)):(this.children=[e],this.nextAfterChildren=this.next||null,this.next=e),e.next=this,this}};var ne=class extends S{constructor(e,t){super(),this.left=e,this.right=t,this.pipe="diff"}prepareDeltaResult(e){var t,n,i,o;if(typeof e=="object"&&(!((t=this.options)===null||t===void 0)&&t.omitRemovedValues&&Array.isArray(e)&&e.length>1&&(e.length===2||e[2]===0||e[2]===3)&&(e[0]=0),!((n=this.options)===null||n===void 0)&&n.cloneDiffValues)){let s=typeof((i=this.options)===null||i===void 0?void 0:i.cloneDiffValues)=="function"?(o=this.options)===null||o===void 0?void 0:o.cloneDiffValues:D;typeof e[0]=="object"&&(e[0]=s(e[0])),typeof e[1]=="object"&&(e[1]=s(e[1]))}return e}setResult(e){return this.prepareDeltaResult(e),super.setResult(e)}},L=ne;var ie=class extends S{constructor(e,t){super(),this.left=e,this.delta=t,this.pipe="patch"}},O=ie;var re=class extends S{constructor(e){super(),this.delta=e,this.pipe="reverse"}},_=re;var oe=class{constructor(e){this.name=e,this.filters=[]}process(e){if(!this.processor)throw new Error("add this pipe to a processor before using it");let t=this.debug,n=this.filters.length,i=e;for(let o=0;o<n;o++){let s=this.filters[o];if(s&&(t&&this.log(`filter: ${s.filterName}`),s(i),typeof i=="object"&&i.exiting)){i.exiting=!1;break}}!i.next&&this.resultCheck&&this.resultCheck(i)}log(e){console.log(`[jsondiffpatch] ${this.name} pipe, ${e}`)}append(...e){return this.filters.push(...e),this}prepend(...e){return this.filters.unshift(...e),this}indexOf(e){if(!e)throw new Error("a filter name is required");for(let t=0;t<this.filters.length;t++){let n=this.filters[t];if(n?.filterName===e)return t}throw new Error(`filter not found: ${e}`)}list(){return this.filters.map(e=>e.filterName)}after(e,...t){let n=this.indexOf(e);return this.filters.splice(n+1,0,...t),this}before(e,...t){let n=this.indexOf(e);return this.filters.splice(n,0,...t),this}replace(e,...t){let n=this.indexOf(e);return this.filters.splice(n,1,...t),this}remove(e){let t=this.indexOf(e);return this.filters.splice(t,1),this}clear(){return this.filters.length=0,this}shouldHaveResult(e){return e===!1?(this.resultCheck=null,this):this.resultCheck?this:(this.resultCheck=t=>{if(!t.hasResult){console.log(t);let n=new Error(`${this.name} failed`);throw n.noResult=!0,n}},this)}},q=oe;var se=class{constructor(e){this.selfOptions=e||{},this.pipes={}}options(e){return e&&(this.selfOptions=e),this.selfOptions}pipe(e,t){let n=t;if(typeof e=="string"){if(typeof n>"u")return this.pipes[e];this.pipes[e]=n}if(e&&e.name){if(n=e,n.processor===this)return n;this.pipes[n.name]=n}if(!n)throw new Error(`pipe is not defined: ${e}`);return n.processor=this,n}process(e,t){let n=e;n.options=this.options();let i=t||e.pipe||"default",o;for(;i;)typeof n.nextAfterChildren<"u"&&(n.next=n.nextAfterChildren,n.nextAfterChildren=null),typeof i=="string"&&(i=this.pipe(i)),i.process(n),o=i,i=null,n&&n.next&&(n=n.next,i=n.pipe||o);return n.hasResult?n.result:void 0}},We=se;var st=(r,e,t,n)=>r[t]===e[n],at=(r,e,t,n)=>{var i,o,s;let a=r.length,l=e.length,u,d,p=new Array(a+1);for(u=0;u<a+1;u++){let f=new Array(l+1);for(d=0;d<l+1;d++)f[d]=0;p[u]=f}for(p.match=t,u=1;u<a+1;u++){let f=p[u];if(f===void 0)throw new Error("LCS matrix row is undefined");let c=p[u-1];if(c===void 0)throw new Error("LCS matrix row is undefined");for(d=1;d<l+1;d++)t(r,e,u-1,d-1,n)?f[d]=((i=c[d-1])!==null&&i!==void 0?i:0)+1:f[d]=Math.max((o=c[d])!==null&&o!==void 0?o:0,(s=f[d-1])!==null&&s!==void 0?s:0)}return p},lt=(r,e,t,n)=>{let i=e.length,o=t.length,s={sequence:[],indices1:[],indices2:[]};for(;i!==0&&o!==0;){if(r.match===void 0)throw new Error("LCS matrix match function is undefined");if(r.match(e,t,i-1,o-1,n))s.sequence.unshift(e[i-1]),s.indices1.unshift(i-1),s.indices2.unshift(o-1),--i,--o;else{let l=r[i];if(l===void 0)throw new Error("LCS matrix row is undefined");let u=l[o-1];if(u===void 0)throw new Error("LCS matrix value is undefined");let d=r[i-1];if(d===void 0)throw new Error("LCS matrix row is undefined");let p=d[o];if(p===void 0)throw new Error("LCS matrix value is undefined");u>p?--o:--i}}return s},dt=(r,e,t,n)=>{let i=n||{},o=at(r,e,t||st,i);return lt(o,r,e,i)},Be={get:dt};var A=3;function ut(r,e,t,n){for(let i=0;i<t;i++){let o=r[i];for(let s=0;s<n;s++){let a=e[s];if(i!==s&&o===a)return!0}}return!1}function Y(r,e,t,n,i){let o=r[t],s=e[n];if(o===s)return!0;if(typeof o!="object"||typeof s!="object")return!1;let a=i.objectHash;if(!a)return i.matchByPosition&&t===n;i.hashCache1=i.hashCache1||[];let l=i.hashCache1[t];if(typeof l>"u"&&(i.hashCache1[t]=l=a(o,t)),typeof l>"u")return!1;i.hashCache2=i.hashCache2||[];let u=i.hashCache2[n];return typeof u>"u"&&(i.hashCache2[n]=u=a(s,n)),typeof u>"u"?!1:l===u}var ae=function(e){var t,n,i,o,s;if(!e.leftIsArray)return;let a={objectHash:(t=e.options)===null||t===void 0?void 0:t.objectHash,matchByPosition:(n=e.options)===null||n===void 0?void 0:n.matchByPosition},l=0,u=0,d,p,f,c=e.left,h=e.right,g=c.length,m=h.length,y;for(g>0&&m>0&&!a.objectHash&&typeof a.matchByPosition!="boolean"&&(a.matchByPosition=!ut(c,h,g,m));l<g&&l<m&&Y(c,h,l,l,a);)d=l,y=new L(c[d],h[d]),e.push(y,d),l++;for(;u+l<g&&u+l<m&&Y(c,h,g-1-u,m-1-u,a);)p=g-1-u,f=m-1-u,y=new L(c[p],h[f]),e.push(y,f),u++;let b;if(l+u===g){if(g===m){e.setResult(void 0).exit();return}for(b=b||{_t:"a"},d=l;d<m-u;d++)b[d]=[h[d]],e.prepareDeltaResult(b[d]);e.setResult(b).exit();return}if(l+u===m){for(b=b||{_t:"a"},d=l;d<g-u;d++){let w=`_${d}`;b[w]=[c[d],0,0],e.prepareDeltaResult(b[w])}e.setResult(b).exit();return}a.hashCache1=void 0,a.hashCache2=void 0;let R=c.slice(l,g-u),x=h.slice(l,m-u),v=Be.get(R,x,Y,a),E=[];for(b=b||{_t:"a"},d=l;d<g-u;d++)if(v.indices1.indexOf(d-l)<0){let w=`_${d}`;b[w]=[c[d],0,0],e.prepareDeltaResult(b[w]),E.push(d)}let I=!0;!((i=e.options)===null||i===void 0)&&i.arrays&&e.options.arrays.detectMove===!1&&(I=!1);let H=!1;!((s=(o=e.options)===null||o===void 0?void 0:o.arrays)===null||s===void 0)&&s.includeValueOnMove&&(H=!0);let N=E.length;for(d=l;d<m-u;d++){let w=v.indices2.indexOf(d-l);if(w<0){let C=!1;if(I&&N>0)for(let B=0;B<N;B++){p=E[B];let J=p===void 0?void 0:b[`_${p}`];if(p!==void 0&&J&&Y(R,x,p-l,d-l,a)){J.splice(1,2,d,A),J.splice(1,2,d,A),H||(J[0]=""),f=d,y=new L(c[p],h[f]),e.push(y,f),E.splice(B,1),C=!0;break}}C||(b[d]=[h[d]],e.prepareDeltaResult(b[d]))}else{if(v.indices1[w]===void 0)throw new Error(`Invalid indexOnArray2: ${w}, seq.indices1: ${v.indices1}`);if(p=v.indices1[w]+l,v.indices2[w]===void 0)throw new Error(`Invalid indexOnArray2: ${w}, seq.indices2: ${v.indices2}`);f=v.indices2[w]+l,y=new L(c[p],h[f]),e.push(y,f)}}e.setResult(b).exit()};ae.filterName="arrays";var Je={numerically(r,e){return r-e},numericallyBy(r){return(e,t)=>e[r]-t[r]}},le=function(e){var t;if(!e.nested)return;let n=e.delta;if(n._t!=="a")return;let i,o,s=n,a=e.left,l=[],u=[],d=[];for(i in s)if(i!=="_t")if(i[0]==="_"){let c=i;if(s[c]!==void 0&&(s[c][2]===0||s[c][2]===A))l.push(Number.parseInt(i.slice(1),10));else throw new Error(`only removal or move can be applied at original array indices, invalid diff type: ${(t=s[c])===null||t===void 0?void 0:t[2]}`)}else{let c=i;s[c].length===1?u.push({index:Number.parseInt(c,10),value:s[c][0]}):d.push({index:Number.parseInt(c,10),delta:s[c]})}for(l=l.sort(Je.numerically),i=l.length-1;i>=0;i--){if(o=l[i],o===void 0)continue;let c=s[`_${o}`],h=a.splice(o,1)[0];c?.[2]===A&&u.push({index:c[1],value:h})}u=u.sort(Je.numericallyBy("index"));let p=u.length;for(i=0;i<p;i++){let c=u[i];c!==void 0&&a.splice(c.index,0,c.value)}let f=d.length;if(f>0)for(i=0;i<f;i++){let c=d[i];if(c===void 0)continue;let h=new O(a[c.index],c.delta);e.push(h,c.index)}if(!e.children){e.setResult(a).exit();return}e.exit()};le.filterName="arrays";var de=function(e){if(!e||!e.children||e.delta._t!=="a")return;let n=e.left,i=e.children.length;for(let o=0;o<i;o++){let s=e.children[o];if(s===void 0)continue;let a=s.childName;n[a]=s.result}e.setResult(n).exit()};de.filterName="arraysCollectChildren";var ue=function(e){if(!e.nested){let i=e.delta;if(i[2]===A){let o=i;e.newName=`_${o[1]}`,e.setResult([o[0],Number.parseInt(e.childName.substring(1),10),A]).exit()}return}let t=e.delta;if(t._t!=="a")return;let n=t;for(let i in n){if(i==="_t")continue;let o=new _(n[i]);e.push(o,i)}e.exit()};ue.filterName="arrays";var ct=(r,e,t)=>{if(typeof e=="string"&&e[0]==="_")return Number.parseInt(e.substring(1),10);if(Array.isArray(t)&&t[2]===0)return`_${e}`;let n=+e;for(let i in r){let o=r[i];if(Array.isArray(o))if(o[2]===A){let s=Number.parseInt(i.substring(1),10),a=o[1];if(a===+e)return s;s<=n&&a>n?n++:s>=n&&a<n&&n--}else o[2]===0?Number.parseInt(i.substring(1),10)<=n&&n++:o.length===1&&Number.parseInt(i,10)<=n&&n--}return n},ce=r=>{if(!r||!r.children)return;let e=r.delta;if(e._t!=="a")return;let t=e,n=r.children.length,i={_t:"a"};for(let o=0;o<n;o++){let s=r.children[o];if(s===void 0)continue;let a=s.newName;if(typeof a>"u"){if(s.childName===void 0)throw new Error("child.childName is undefined");a=ct(t,s.childName,s.result)}i[a]!==s.result&&(i[a]=s.result)}r.setResult(i).exit()};ce.filterName="arraysCollectChildren";var pe=function(e){e.left instanceof Date?(e.right instanceof Date?e.left.getTime()!==e.right.getTime()?e.setResult([e.left,e.right]):e.setResult(void 0):e.setResult([e.left,e.right]),e.exit()):e.right instanceof Date&&e.setResult([e.left,e.right]).exit()};pe.filterName="dates";var fe=r=>{if(!r||!r.children)return;let e=r.children.length,t=r.result;for(let n=0;n<e;n++){let i=r.children[n];if(i!==void 0&&!(typeof i.result>"u")){if(t=t||{},i.childName===void 0)throw new Error("diff child.childName is undefined");t[i.childName]=i.result}}t&&r.leftIsArray&&(t._t="a"),r.setResult(t).exit()};fe.filterName="collectChildren";var he=r=>{var e;if(r.leftIsArray||r.leftType!=="object")return;let t=r.left,n=r.right,i=(e=r.options)===null||e===void 0?void 0:e.propertyFilter;for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o)||i&&!i(o,r))continue;let s=new L(t[o],n[o]);r.push(s,o)}for(let o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&!(i&&!i(o,r))&&typeof t[o]>"u"){let s=new L(void 0,n[o]);r.push(s,o)}if(!r.children||r.children.length===0){r.setResult(void 0).exit();return}r.exit()};he.filterName="objects";var ge=function(e){if(!e.nested)return;let t=e.delta;if(t._t)return;let n=t;for(let i in n){let o=new O(e.left[i],n[i]);e.push(o,i)}e.exit()};ge.filterName="objects";var be=function(e){if(!e||!e.children||e.delta._t)return;let n=e.left,i=e.children.length;for(let o=0;o<i;o++){let s=e.children[o];if(s===void 0)continue;let a=s.childName;Object.prototype.hasOwnProperty.call(e.left,a)&&s.result===void 0?delete n[a]:n[a]!==s.result&&(n[a]=s.result)}e.setResult(n).exit()};be.filterName="collectChildren";var me=function(e){if(!e.nested||e.delta._t)return;let n=e.delta;for(let i in n){let o=new _(n[i]);e.push(o,i)}e.exit()};me.filterName="objects";var ye=r=>{if(!r||!r.children||r.delta._t)return;let t=r.children.length,n={};for(let i=0;i<t;i++){let o=r.children[i];if(o===void 0)continue;let s=o.childName;n[s]!==o.result&&(n[s]=o.result)}r.setResult(n).exit()};ye.filterName="collectChildren";var ve=null;function Ve(r,e){var t;if(!ve){let n;if(!((t=r?.textDiff)===null||t===void 0)&&t.diffMatchPatch)n=new r.textDiff.diffMatchPatch;else{if(!e)return null;let i=new Error("The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.");throw i.diff_match_patch_not_found=!0,i}ve={diff:(i,o)=>n.patch_toText(n.patch_make(i,o)),patch:(i,o)=>{let s=n.patch_apply(n.patch_fromText(o),i);for(let a of s[1])if(!a){let l=new Error("text patch failed");throw l.textPatchFailed=!0,l}return s[0]}}}return ve}var xe=function(e){var t,n;if(e.leftType!=="string")return;let i=e.left,o=e.right,s=((n=(t=e.options)===null||t===void 0?void 0:t.textDiff)===null||n===void 0?void 0:n.minLength)||60;if(i.length<s||o.length<s){e.setResult([i,o]).exit();return}let a=Ve(e.options);if(!a){e.setResult([i,o]).exit();return}let l=a.diff;e.setResult([l(i,o),0,2]).exit()};xe.filterName="texts";var we=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==2)return;let n=t,i=Ve(e.options,!0).patch;e.setResult(i(e.left,n[0])).exit()};we.filterName="texts";var gt=r=>{var e,t,n;let i=/^@@ +-(\d+),(\d+) +\+(\d+),(\d+) +@@$/,o=r.split(`
`);for(let s=0;s<o.length;s++){let a=o[s];if(a===void 0)continue;let l=a.slice(0,1);if(l==="@"){let u=i.exec(a);if(u!==null){let d=s;o[d]=`@@ -${u[3]},${u[4]} +${u[1]},${u[2]} @@`}}else if(l==="+"){if(o[s]=`-${(e=o[s])===null||e===void 0?void 0:e.slice(1)}`,((t=o[s-1])===null||t===void 0?void 0:t.slice(0,1))==="+"){let u=o[s];o[s]=o[s-1],o[s-1]=u}}else l==="-"&&(o[s]=`+${(n=o[s])===null||n===void 0?void 0:n.slice(1)}`)}return o.join(`
`)},Ee=function(e){if(e.nested)return;let t=e.delta;if(t[2]!==2)return;let n=t;e.setResult([gt(n[0]),0,2]).exit()};Ee.filterName="texts";var Ce=function(e){if(e.left===e.right){e.setResult(void 0).exit();return}if(typeof e.left>"u"){if(typeof e.right=="function")throw new Error("functions are not supported");e.setResult([e.right]).exit();return}if(typeof e.right>"u"){e.setResult([e.left,0,0]).exit();return}if(typeof e.left=="function"||typeof e.right=="function")throw new Error("functions are not supported");if(e.leftType=e.left===null?"null":typeof e.left,e.rightType=e.right===null?"null":typeof e.right,e.leftType!==e.rightType){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="boolean"||e.leftType==="number"){e.setResult([e.left,e.right]).exit();return}if(e.leftType==="object"&&(e.leftIsArray=Array.isArray(e.left)),e.rightType==="object"&&(e.rightIsArray=Array.isArray(e.right)),e.leftIsArray!==e.rightIsArray){e.setResult([e.left,e.right]).exit();return}e.left instanceof RegExp&&(e.right instanceof RegExp?e.setResult([e.left.toString(),e.right.toString()]).exit():e.setResult([e.left,e.right]).exit())};Ce.filterName="trivial";var Le=function(e){if(typeof e.delta>"u"){e.setResult(e.left).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(t.length===1){e.setResult(t[0]).exit();return}if(t.length===2){if(e.left instanceof RegExp){let n=/^\/(.*)\/([gimyu]+)$/.exec(t[1]);if(n?.[1]){e.setResult(new RegExp(n[1],n[2])).exit();return}}e.setResult(t[1]).exit();return}t.length===3&&t[2]===0&&e.setResult(void 0).exit()};Le.filterName="trivial";var Se=function(e){if(typeof e.delta>"u"){e.setResult(e.delta).exit();return}if(e.nested=!Array.isArray(e.delta),e.nested)return;let t=e.delta;if(t.length===1){e.setResult([t[0],0,0]).exit();return}if(t.length===2){e.setResult([t[1],t[0]]).exit();return}t.length===3&&t[2]===0&&e.setResult([t[0]]).exit()};Se.filterName="trivial";var Re=class{constructor(e){this.processor=new We(e),this.processor.pipe(new q("diff").append(fe,Ce,pe,xe,he,ae).shouldHaveResult()),this.processor.pipe(new q("patch").append(be,de,Le,we,ge,le).shouldHaveResult()),this.processor.pipe(new q("reverse").append(ye,ce,Se,Ee,me,ue).shouldHaveResult())}options(e){return this.processor.options(e)}diff(e,t){return this.processor.process(new L(e,t))}patch(e,t){return this.processor.process(new O(e,t))}reverse(e){return this.processor.process(new _(e))}unpatch(e,t){return this.patch(e,this.reverse(t))}clone(e){return D(e)}},Te=Re;var F;function Xe(r,e){return F||(F=new Te),F.diff(r,e)}function qe(r,e){return F||(F=new Te),F.patch(r,e)}var vt=()=>({expandAll:!1,expandObjects:[],useViewState:!0}),M=class{constructor(e,t,n){this.viewStates={};this.json=e,this.parentContainer=t,this.options=Object.assign({},vt(),n||{}),this.render()}render(){this.parentContainer.innerHTML="";let e=this.drawJsonNode(this.json);this.parentContainer.appendChild(e)}toggleExpandNode(e,t,n){let i=e.classList.contains("collapsed");e.classList.toggle("collapsed",!i),this.viewStates[t]=!i,n&&(n.textContent=i?"[-]":"[+]")}drawJsonNode(e,t=""){let n=document.createElement("div");n.classList.add("json-node");let i=document.createElement("div");i.classList.add("json-properties");for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o)){let s=`${t}${o}`,a=document.createElement("div");a.classList.add("json-property"),a.setAttribute("data-path",s);let l=document.createElement("span");l.classList.add("json-key"),l.textContent=o+": ";let u=document.createElement("div");u.classList.add("json-value");let d=e[o],p=typeof d=="object"&&d!==null,f=Array.isArray(d);if(p){l.classList.add("clickable"),f?l.textContent=`${o} (${d.length})`:l.textContent=o;let c=f&&d.length>0?!0:Object.keys(d).length>0;a.classList.add("object");let h=document.createElement("button");h.classList.add("json-toggle");let g=this.drawJsonNode(d,s+"/");if(this.options.expandAll)h.textContent="[-]";else{let m=!1;f&&c?m=!0:this.options.expandObjs?.forEach(y=>{new RegExp(y).test(s)&&(m=!0)}),this.options.useViewState&&typeof this.viewStates[s]<"u"&&(m=!this.viewStates[s]),m?h.textContent="[-]":(h.textContent="[+]",g.classList.add("collapsed"))}h.onclick=()=>this.toggleExpandNode(g,s,h),l.onclick=()=>this.toggleExpandNode(g,s,h),a.appendChild(h),u.appendChild(g)}else u.textContent=String(d);a.appendChild(l),a.appendChild(u),i.appendChild(a)}return n.appendChild(i),n}updateJson(e){let t=Xe(this.json,e);qe(this.json,t),this.render()}};function G(r,e={}){r.querySelectorAll(".resize-handle").forEach(x=>x.remove());let{handles:t=["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:n=1/0,maxHeight:i=1/0,minWidth:o=100,minHeight:s=100,onResize:a=()=>{}}=e,l=!1,u=null,d=0,p=0,f=0,c=0,h=0,g=0;function m(x){let v=document.createElement("div");v.classList.add("resize-handle",`resize-${x}`),v.addEventListener("mousedown",E=>y(E,x)),r.appendChild(v)}function y(x,v){l=!0,u=v,d=x.clientX,p=x.clientY,f=r.offsetWidth,c=r.offsetHeight,h=r.offsetLeft,g=r.offsetTop,x.preventDefault(),x.stopPropagation(),document.addEventListener("mousemove",b),document.addEventListener("mouseup",R)}function b(x){if(!l||!u)return;let v=f,E=c,I=h,H=g,N=x.clientX-d,w=x.clientY-p;if(u.includes("right")&&(v=Math.min(Math.max(f+N,o),n)),u.includes("left")){let C=f-N;C>=o&&C<=n&&(v=C,I=h+N)}if(u.includes("bottom")&&(E=Math.min(Math.max(c+w,s),i)),u.includes("top")){let C=c-w;C>=s&&C<=i&&(E=C,H=g+w)}r.style.width=`${v}px`,r.style.height=`${E}px`,r.style.left=`${I}px`,r.style.top=`${H}px`,a(v,E)}function R(){l=!1,u=null,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",R)}t.forEach(x=>m(x))}function W(r,e,t={}){let n=e||r,i=!1,o=0,s=0,a=0,l=0,{onDragStart:u,onDrag:d,onDragEnd:p}=t;function f(g){let m=g.target;if(m.tagName==="BUTTON"||m.closest("button"))return;i=!0,o=g.clientX,s=g.clientY;let y=getComputedStyle(r);a=parseInt(y.left)||r.offsetLeft,l=parseInt(y.top)||r.offsetTop,y.position!=="absolute"&&y.position!=="fixed"&&(r.style.position="absolute",r.style.left=`${a}px`,r.style.top=`${l}px`),g.preventDefault(),n.style.cursor="grabbing",u&&u(g),document.addEventListener("mousemove",c),document.addEventListener("mouseup",h)}function c(g){if(!i)return;let m=g.clientX-o,y=g.clientY-s,b=a+m,R=l+y;r.style.left=`${b}px`,r.style.top=`${R}px`,d&&d(b,R)}function h(){i&&(i=!1,n.style.cursor="grab",p&&p(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h))}return n.style.cursor="grab",n.addEventListener("mousedown",f),()=>{n.removeEventListener("mousedown",f),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)}}function z(){let r=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{width:r,height:e}}var U="objects",De=(l=>(l.TopLeft="topLeft",l.Top="top",l.TopRight="topRight",l.Right="right",l.BottomRight="bottomRight",l.Bottom="bottom",l.BottomLeft="bottomLeft",l.Left="left",l))(De||{}),xt=280,Q=class{constructor(e={}){this.tabEntries={};this.debugStates={};this.activeTab="global";this.options={position:"bottomRight",width:600,height:400,snap:!1,snapPadding:20,...e},this.container=this.createContainer(),this.tabContainer=this.createTabContainer(),this.contentContainer=this.createContentContainer(),this.container.appendChild(this.tabContainer),this.container.appendChild(this.contentContainer),this.toolbar=this.createGlobalToolbar(),this.container.appendChild(this.toolbar),document.body.appendChild(this.container),this.addTab(U),this.addTab("global"),this.restoreSettings(),this.setupResizable(),this.setupDraggable(),this.setupEventListeners(),this.setupKeyboardShortcut(),e.show&&!this.loadSettings()&&this.show()}createContainer(){let e=document.createElement("div");return e.classList.add("debug-panel"),e.style.width=`${this.options.width}px`,e.style.height=`${this.options.height}px`,e.style.position="fixed",e.style.opacity="1",e}createTabContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-tabs"),e}createContentContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-content"),e}createGlobalToolbar(){let e=document.createElement("div");e.classList.add("debug-toolbar");let t=document.createElement("span");t.classList.add("debug-keyboard-hint"),t.textContent="Ctrl+Alt+D to hide/show",t.style.color="#999",t.style.fontSize="11px";let n=document.createElement("div");n.classList.add("debug-opacity-container");let i=document.createElement("label");i.classList.add("debug-opacity-label"),i.textContent="O",i.style.fontSize="11px",i.style.color="#999",i.style.marginRight="5px",this.opacitySlider=document.createElement("input"),this.opacitySlider.type="range",this.opacitySlider.min="20",this.opacitySlider.max="100",this.opacitySlider.value="100",this.opacitySlider.classList.add("debug-opacity-slider"),this.opacitySlider.oninput=()=>this.handleOpacityChange(),n.appendChild(this.opacitySlider);let o=document.createElement("button");o.classList.add("debug-clear-button"),o.textContent="Clear",o.onclick=()=>this.clearCurrentTab();let s=document.createElement("button");return s.classList.add("debug-hide-button"),s.textContent="Hide",s.onclick=()=>this.hide(),e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(s),e}setupResizable(){let{width:e,height:t}=z();G(this.container,{handles:["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:e-20,maxHeight:t-20,minWidth:200,minHeight:150,onResize:n=>{this.updateToolbarLayout(n),this.saveSettings()}})}setupDraggable(){this.options.snap?W(this.container,this.tabContainer,{onDrag:(e,t)=>this.handleSnapWhileDragging(e,t),onDragEnd:()=>this.saveSettings()}):W(this.container,this.tabContainer,{onDragEnd:()=>this.saveSettings()})}setupPosition(){let{width:e,height:t}=z(),n=this.options.width||600,i=this.options.height||400,o=0,s=0;switch(this.options.position){case"topLeft":o=0,s=0;break;case"top":o=(e-n)/2,s=0;break;case"topRight":o=e-n,s=0;break;case"right":o=e-n,s=(t-i)/2;break;case"bottomRight":o=e-n,s=t-i;break;case"bottom":o=(e-n)/2,s=t-i;break;case"bottomLeft":o=0,s=t-i;break;case"left":o=0,s=(t-i)/2;break}this.container.style.left=`${o}px`,this.container.style.top=`${s}px`}setupKeyboardShortcut(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.altKey&&e.key.toLowerCase()==="d"&&(e.preventDefault(),this.toggle())})}setupEventListeners(){K.default.addEventListener("log",e=>{let{namespace:t,message:n}=e.target;this.log(t,n)}),K.default.addEventListener("debug",e=>{let{id:t,state:n}=e.target;if(!t||!n){console.log("Invalid event data for debug-state. Expected {id, state}, got:",e);return}this.debug(t,n)})}restoreSettings(){let e=this.loadSettings();if(e){this.container.style.left=`${e.left}px`,this.container.style.top=`${e.top}px`,this.container.style.width=`${e.width}px`,this.container.style.height=`${e.height}px`;let t=e.opacity!==void 0?e.opacity:1;this.container.style.opacity=String(t),this.opacitySlider&&(this.opacitySlider.value=String(Math.round(t*100))),e.visible?this.container.classList.add("visible"):this.container.classList.remove("visible")}else this.setupPosition()}loadSettings(){try{let e=localStorage.getItem("debugPanelSettings");if(e)return JSON.parse(e)}catch(e){console.error("Failed to load debug panel settings:",e)}return null}saveSettings(){try{let e=parseFloat(this.container.style.opacity)||1,t={left:parseInt(this.container.style.left)||this.container.offsetLeft,top:parseInt(this.container.style.top)||this.container.offsetTop,width:this.container.offsetWidth,height:this.container.offsetHeight,visible:this.container.classList.contains("visible"),opacity:e};localStorage.setItem("debugPanelSettings",JSON.stringify(t))}catch(e){console.error("Failed to save debug panel settings:",e)}}debug(e,t){let n=(0,je.default)(t),i=JSON.parse(n);this.debugStates[e]?this.updateDebugState(e,i):this.addDebugState(e,i)}updateDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${U}"]`);if(!n){console.error("No content for debug namespace.");return}let i=n.querySelector(`#debug-state-${e}`);if(!i){console.error(`No debug state found for ${e}.`);return}let o=i.querySelector(".json-wrapper");if(!o){console.error(`No json wrapper found for existing state ${e}`);return}o.innerHTML="",this.debugStates[e].state=t,this.debugStates[e].jsonView.updateJson(t)}addDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${U}"]`);if(!n){console.error("No content for debug namespace.");return}let i=document.createElement("div");i.classList.add("debug-state"),i.setAttribute("id",`debug-state-${e}`);let o=()=>{let d=this.debugStates[e].isExpanded;this.debugStates[e].isExpanded=!d,i.classList.toggle("collapsed",d),s.textContent=d?"[+]":"[-]"},s=document.createElement("button");s.classList.add("json-toggle"),s.textContent="[-]",s.onclick=o,i.appendChild(s);let a=document.createElement("div");a.classList.add("debug-state-label"),a.innerText=e||"untitled",a.onclick=o,i.appendChild(a);let l=document.createElement("div");l.classList.add("json-wrapper"),i.appendChild(l);let u=new M(t,l,{expandObjs:[/children/,/children\/(.*)/,/entry/]});this.debugStates[e]={state:t,jsonView:u,isExpanded:!0},n.appendChild(i)}addTab(e){if(this.tabEntries[e])return;this.tabEntries[e]=[];let t=document.createElement("button");t.classList.add("debug-tab"),t.textContent=e,t.onclick=()=>this.switchTab(e),this.tabContainer.appendChild(t);let n=document.createElement("div");n.classList.add("debug-tab-content"),n.dataset.namespace=e,this.contentContainer.appendChild(n),Object.keys(this.tabEntries).length===1&&this.switchTab(e)}clearCurrentTab(){this.clearTab(this.activeTab)}clearTab(e){let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(this.tabEntries[e]=[],e===U&&Object.keys(this.debugStates).forEach(n=>{delete this.debugStates[n]}),t.innerHTML="")}switchTab(e){this.activeTab=e,this.tabContainer.querySelectorAll(".debug-tab").forEach((n,i)=>{let o=Object.keys(this.tabEntries)[i];n.classList.toggle("active",o===e)}),this.contentContainer.querySelectorAll(".debug-tab-content").forEach(n=>{n.style.display="none"});let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(t.style.display="block")}log(e,t){this.tabEntries[e]||this.addTab(e);let n={id:`${e}-${Date.now()}-${Math.random()}`,message:t,timestamp:new Date};this.tabEntries[e].push(n);let i=this.contentContainer.querySelector(`[data-namespace="${e}"]`);if(!i)return;let o=this.createLogElement(n,e);i.appendChild(o),e!=="global"&&this.log("global",t)}createLogElement(e,t){let n=document.createElement("div");n.classList.add("debug-log-entry"),n.dataset.logId=e.id;let i=document.createElement("div");i.innerText=`[${e.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(e.message)}`,i.classList.add("debug-log-entry-text");let o=document.createElement("button");o.innerText="\u{1F4CB}",o.classList.add("debug-copy-button"),o.onclick=()=>navigator.clipboard.writeText(i.innerText);let s=document.createElement("button");return s.innerText="\u274C",s.classList.add("debug-delete-button"),s.onclick=()=>this.removeLogEntry(t,e.id,n),n.appendChild(i),n.appendChild(o),n.appendChild(s),n}removeLogEntry(e,t,n){this.tabEntries[e]=this.tabEntries[e].filter(i=>i.id!==t),n.remove()}renderLogEntry(e){return Array.isArray(e)?e.join(" "):typeof e=="object"?(0,je.default)(e):String(e)}updateToolbarLayout(e){e<xt?this.container.classList.add("narrow-panel"):this.container.classList.remove("narrow-panel")}handleOpacityChange(){let t=parseInt(this.opacitySlider.value)/100;this.container.classList.contains("visible")&&(this.container.style.opacity=String(t)),this.saveSettings()}handleSnapWhileDragging(e,t){let n=this.options.snapPadding||20,{width:i,height:o}=z(),s=this.container.offsetWidth,a=this.container.offsetHeight,l=e,u=t;e<n?l=0:e+s>i-n&&(l=i-s),t<n?u=0:t+a>o-n&&(u=o-a),(l!==e||u!==t)&&(this.container.style.left=`${l}px`,this.container.style.top=`${u}px`)}show(){this.container.classList.add("visible");let e=parseFloat(this.container.style.opacity)||1;this.container.style.opacity=String(e),this.saveSettings()}hide(){this.container.classList.remove("visible"),this.saveSettings()}toggle(){this.container.classList.contains("visible")?this.hide():this.show()}};function Ye(r,e){K.default.dispatch("debug",{id:r,state:e})}return tt(wt);})();
//# sourceMappingURL=index.umd.js.map
