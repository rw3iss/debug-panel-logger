"use strict";var Y=Object.create;var j=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var X=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var K=(i,e)=>{for(var t in e)j(i,t,{get:e[t],enumerable:!0})},I=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of q(e))!F.call(i,o)&&o!==t&&j(i,o,{get:()=>e[o],enumerable:!(n=V(e,o))||n.enumerable});return i};var W=(i,e,t)=>(t=i!=null?Y(X(i)):{},I(e||!i||!i.__esModule?j(t,"default",{value:i,enumerable:!0}):t,i)),_=i=>I(j({},"__esModule",{value:!0}),i);var ee={};K(ee,{DebugPanel:()=>T,DebugPanelLogModule:()=>$,JsonView:()=>E,ScreenPosition:()=>A,debugState:()=>J,getWindowSize:()=>L,makeDraggable:()=>k,makeResizable:()=>D});module.exports=_(ee);var G=".debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .2s ease-in-out,visibility .2s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#111;padding:5px;gap:5px;border-bottom:1px solid hsla(0,0%,100%,.1);cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#333;color:#ccc;padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background .2s ease-in-out}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#444;color:#fff}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:#007bff;color:#fff}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0px 15px;background:#1a1a1a}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:5px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:12px;font-weight:bold;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease-in-out,background .2s ease-in-out}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;background:rgba(85,170,255,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#28f}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;background:rgba(255,85,85,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{background:#f22}.debug-panel .debug-toolbar{display:flex;width:100%;align-items:center;justify-content:flex-end;gap:8px;padding:8px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap}.debug-panel .debug-toolbar .debug-keyboard-hint{margin-right:auto;color:#999;font-size:11px;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:5px;max-width:100px;min-width:40px;flex-shrink:1;padding:5px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;max-width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{background:#d9534f;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar{container-type:inline-size}@container (max-width: 350px){.debug-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel .debug-toolbar .debug-keyboard-hint{display:none}.debug-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}}.debug-panel.narrow-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel.narrow-panel .debug-toolbar .debug-keyboard-hint{margin-right:0;text-align:center}.debug-panel.narrow-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .2s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-state{position:relative;flex:1 0 100%;display:flex;flex-direction:column;margin-bottom:10px;margin-left:10px}.debug-state .json-toggle{position:absolute;top:7px;left:-20px;margin-right:5px;border:none;background:none;cursor:pointer;color:#888;font-size:14px;padding:0;width:20px;height:20px;transition:color .2s}.debug-state .json-toggle:hover{color:#fff}.debug-state .json-toggle:focus{outline:none}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 0;color:#ccc}.debug-state .debug-state-label:hover{color:#fff;cursor:pointer;text-decoration:underline}.debug-state .json-wrapper{padding:5px;margin-left:-15px;background:#292929;border-radius:4px;border-left:3px solid #28a745}.debug-state.collapsed .json-wrapper{display:none}";if(typeof document<"u"){let i=document.createElement("style");i.textContent=G,document.head.appendChild(i)}var U=".json-node{position:relative;margin-left:20px;padding-left:0;font-size:12px;line-height:1.4em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:2px 0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe}.json-node .json-key.clickable{cursor:pointer}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;word-break:break-word;flex:1}.json-node .json-toggle{position:absolute;top:2px;left:-20px;border:none;background:none;cursor:pointer;color:#888;font-size:12px;padding:0;width:16px;height:16px;transition:color .2s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .collapsed .json-properties{display:none}";if(typeof document<"u"){let i=document.createElement("style");i.textContent=U,document.head.appendChild(i)}var M=W(require("eventbusjs"),1),R=W(require("safe-stringify"),1);var z=W(require("jsondiffpatch"),1),Q=()=>({expandAll:!1,expandObjects:[],useViewState:!0}),E=class{constructor(e,t,n){this.viewStates={};this.json=e,this.parentContainer=t,this.options=Object.assign({},Q(),n||{}),this.render()}render(){this.parentContainer.innerHTML="";let e=this.drawJsonNode(this.json);this.parentContainer.appendChild(e)}toggleExpandNode(e,t,n){let o=e.classList.contains("collapsed");e.classList.toggle("collapsed",!o),this.viewStates[t]=!o,n&&(n.textContent=o?"[-]":"[+]")}drawJsonNode(e,t=""){let n=document.createElement("div");n.classList.add("json-node");let o=document.createElement("div");o.classList.add("json-properties");for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)){let s=`${t}${a}`,l=document.createElement("div");l.classList.add("json-property"),l.setAttribute("data-path",s);let r=document.createElement("span");r.classList.add("json-key"),r.textContent=a+": ";let d=document.createElement("div");d.classList.add("json-value");let p=e[a],x=typeof p=="object"&&p!==null,b=Array.isArray(p);if(x){r.classList.add("clickable"),b?r.textContent=`${a} (${p.length})`:r.textContent=a;let f=b&&p.length>0?!0:Object.keys(p).length>0;l.classList.add("object");let g=document.createElement("button");g.classList.add("json-toggle");let c=this.drawJsonNode(p,s+"/");if(this.options.expandAll)g.textContent="[-]";else{let h=!1;b&&f?h=!0:this.options.expandObjs?.forEach(m=>{new RegExp(m).test(s)&&(h=!0)}),this.options.useViewState&&typeof this.viewStates[s]<"u"&&(h=!this.viewStates[s]),h?g.textContent="[-]":(g.textContent="[+]",c.classList.add("collapsed"))}g.onclick=()=>this.toggleExpandNode(c,s,g),r.onclick=()=>this.toggleExpandNode(c,s,g),l.appendChild(g),d.appendChild(c)}else d.textContent=String(p);l.appendChild(r),l.appendChild(d),o.appendChild(l)}return n.appendChild(o),n}updateJson(e){let t=z.diff(this.json,e);z.patch(this.json,t),this.render()}};function D(i,e={}){i.querySelectorAll(".resize-handle").forEach(u=>u.remove());let{handles:t=["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:n=1/0,maxHeight:o=1/0,minWidth:a=100,minHeight:s=100,onResize:l=()=>{}}=e,r=!1,d=null,p=0,x=0,b=0,f=0,g=0,c=0;function h(u){let y=document.createElement("div");y.classList.add("resize-handle",`resize-${u}`),y.addEventListener("mousedown",w=>m(w,u)),i.appendChild(y)}function m(u,y){r=!0,d=y,p=u.clientX,x=u.clientY,b=i.offsetWidth,f=i.offsetHeight,g=i.offsetLeft,c=i.offsetTop,u.preventDefault(),u.stopPropagation(),document.addEventListener("mousemove",S),document.addEventListener("mouseup",C)}function S(u){if(!r||!d)return;let y=b,w=f,N=g,B=c,O=u.clientX-p,P=u.clientY-x;if(d.includes("right")&&(y=Math.min(Math.max(b+O,a),n)),d.includes("left")){let v=b-O;v>=a&&v<=n&&(y=v,N=g+O)}if(d.includes("bottom")&&(w=Math.min(Math.max(f+P,s),o)),d.includes("top")){let v=f-P;v>=s&&v<=o&&(w=v,B=c+P)}i.style.width=`${y}px`,i.style.height=`${w}px`,i.style.left=`${N}px`,i.style.top=`${B}px`,l(y,w)}function C(){r=!1,d=null,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",C)}t.forEach(u=>h(u))}function k(i,e,t={}){let n=e||i,o=!1,a=0,s=0,l=0,r=0,{onDragStart:d,onDrag:p,onDragEnd:x}=t;function b(c){let h=c.target;if(h.tagName==="BUTTON"||h.closest("button"))return;o=!0,a=c.clientX,s=c.clientY;let m=getComputedStyle(i);l=parseInt(m.left)||i.offsetLeft,r=parseInt(m.top)||i.offsetTop,m.position!=="absolute"&&m.position!=="fixed"&&(i.style.position="absolute",i.style.left=`${l}px`,i.style.top=`${r}px`),c.preventDefault(),n.style.cursor="grabbing",d&&d(c),document.addEventListener("mousemove",f),document.addEventListener("mouseup",g)}function f(c){if(!o)return;let h=c.clientX-a,m=c.clientY-s,S=l+h,C=r+m;i.style.left=`${S}px`,i.style.top=`${C}px`,p&&p(S,C)}function g(){o&&(o=!1,n.style.cursor="grab",x&&x(),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g))}return n.style.cursor="grab",n.addEventListener("mousedown",b),()=>{n.removeEventListener("mousedown",b),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g)}}function L(){let i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{width:i,height:e}}var H="objects",A=(r=>(r.TopLeft="topLeft",r.Top="top",r.TopRight="topRight",r.Right="right",r.BottomRight="bottomRight",r.Bottom="bottom",r.BottomLeft="bottomLeft",r.Left="left",r))(A||{}),Z=280,$=class{constructor(e={}){this.name="DebugPanel";this.panel=new T(e)}onLog(e){this.panel.addLog(e.namespace,e.args)}print(...e){if(e.length){let t=[];e.forEach(n=>{typeof n=="object"?this.panel.debugState("",n):t.push(n)})}}},T=class{constructor(e={}){this.tabEntries={};this.debugStates={};this.activeTab="global";this.options={position:"bottomRight",width:600,height:400,snap:!1,snapPadding:20,...e},this.container=this.createContainer(),this.tabContainer=this.createTabContainer(),this.contentContainer=this.createContentContainer(),this.container.appendChild(this.tabContainer),this.container.appendChild(this.contentContainer),this.toolbar=this.createGlobalToolbar(),this.container.appendChild(this.toolbar),document.body.appendChild(this.container),this.addTab(H),this.addTab("global"),this.restoreSettings(),this.setupResizable(),this.setupDraggable(),this.setupEventListeners(),this.setupKeyboardShortcut(),e.show&&!this.loadSettings()&&this.show()}createContainer(){let e=document.createElement("div");return e.classList.add("debug-panel"),e.style.width=`${this.options.width}px`,e.style.height=`${this.options.height}px`,e.style.position="fixed",e.style.opacity="1",e}createTabContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-tabs"),e}createContentContainer(){let e=document.createElement("div");return e.classList.add("debug-panel-content"),e}restoreSettings(){let e=this.loadSettings();if(e){this.container.style.left=`${e.left}px`,this.container.style.top=`${e.top}px`,this.container.style.width=`${e.width}px`,this.container.style.height=`${e.height}px`;let t=e.opacity!==void 0?e.opacity:1;this.container.style.opacity=String(t),this.opacitySlider&&(this.opacitySlider.value=String(Math.round(t*100))),e.visible?this.container.classList.add("visible"):this.container.classList.remove("visible")}else this.setupPosition()}loadSettings(){try{let e=localStorage.getItem("debugPanelSettings");if(e)return JSON.parse(e)}catch(e){console.error("Failed to load debug panel settings:",e)}return null}saveSettings(){try{let e=parseFloat(this.container.style.opacity)||1,t={left:parseInt(this.container.style.left)||this.container.offsetLeft,top:parseInt(this.container.style.top)||this.container.offsetTop,width:this.container.offsetWidth,height:this.container.offsetHeight,visible:this.container.classList.contains("visible"),opacity:e};localStorage.setItem("debugPanelSettings",JSON.stringify(t))}catch(e){console.error("Failed to save debug panel settings:",e)}}setupPosition(){let{width:e,height:t}=L(),n=this.options.width||600,o=this.options.height||400,a=0,s=0;switch(this.options.position){case"topLeft":a=0,s=0;break;case"top":a=(e-n)/2,s=0;break;case"topRight":a=e-n,s=0;break;case"right":a=e-n,s=(t-o)/2;break;case"bottomRight":a=e-n,s=t-o;break;case"bottom":a=(e-n)/2,s=t-o;break;case"bottomLeft":a=0,s=t-o;break;case"left":a=0,s=(t-o)/2;break}this.container.style.left=`${a}px`,this.container.style.top=`${s}px`}createGlobalToolbar(){let e=document.createElement("div");e.classList.add("debug-toolbar");let t=document.createElement("span");t.classList.add("debug-keyboard-hint"),t.textContent="Ctrl+Alt+D to hide/show",t.style.color="#999",t.style.fontSize="11px";let n=document.createElement("div");n.classList.add("debug-opacity-container");let o=document.createElement("label");o.classList.add("debug-opacity-label"),o.textContent="O",o.style.fontSize="11px",o.style.color="#999",o.style.marginRight="5px",this.opacitySlider=document.createElement("input"),this.opacitySlider.type="range",this.opacitySlider.min="20",this.opacitySlider.max="100",this.opacitySlider.value="100",this.opacitySlider.classList.add("debug-opacity-slider"),this.opacitySlider.oninput=()=>this.handleOpacityChange(),n.appendChild(this.opacitySlider);let a=document.createElement("button");a.classList.add("debug-clear-button"),a.textContent="Clear",a.onclick=()=>this.clearCurrentTab();let s=document.createElement("button");return s.classList.add("debug-hide-button"),s.textContent="Hide",s.onclick=()=>this.hide(),e.appendChild(t),e.appendChild(n),e.appendChild(a),e.appendChild(s),e}handleOpacityChange(){let t=parseInt(this.opacitySlider.value)/100;this.container.classList.contains("visible")&&(this.container.style.opacity=String(t)),this.saveSettings()}setupResizable(){let{width:e,height:t}=L();D(this.container,{handles:["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right"],maxWidth:e-20,maxHeight:t-20,minWidth:200,minHeight:150,onResize:n=>{this.updateToolbarLayout(n),this.saveSettings()}})}updateToolbarLayout(e){e<Z?this.container.classList.add("narrow-panel"):this.container.classList.remove("narrow-panel")}setupDraggable(){this.options.snap?k(this.container,this.tabContainer,{onDrag:(e,t)=>this.handleSnapWhileDragging(e,t),onDragEnd:()=>this.saveSettings()}):k(this.container,this.tabContainer,{onDragEnd:()=>this.saveSettings()})}handleSnapWhileDragging(e,t){let n=this.options.snapPadding||20,{width:o,height:a}=L(),s=this.container.offsetWidth,l=this.container.offsetHeight,r=e,d=t;e<n?r=0:e+s>o-n&&(r=o-s),t<n?d=0:t+l>a-n&&(d=a-l),(r!==e||d!==t)&&(this.container.style.left=`${r}px`,this.container.style.top=`${d}px`)}setupKeyboardShortcut(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.altKey&&e.key.toLowerCase()==="d"&&(e.preventDefault(),this.toggle())})}setupEventListeners(){M.default.addEventListener("log",e=>{let{namespace:t,message:n}=e.target;this.addLog(t,n)}),M.default.addEventListener("debug-state",e=>{let{id:t,state:n}=e.target;if(!t||!n){console.log("Invalid event data for debug-state. Expected {id,state}, got:",e);return}this.debugState(t,n)})}debugState(e,t){let n=(0,R.default)(t),o=JSON.parse(n);this.debugStates[e]?this.updateDebugState(e,o):this.addDebugState(e,o)}updateDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${H}"]`);if(!n){console.error("No content for debug namespace.");return}let o=n.querySelector(`#debug-state-${e}`);if(!o){console.error(`No debug state found for ${e}.`);return}let a=o.querySelector(".json-wrapper");if(!a){console.error(`No json wrapper found for existing state ${e}`);return}a.innerHTML="",this.debugStates[e].state=t,this.debugStates[e].jsonView.updateJson(t)}addDebugState(e,t){let n=this.contentContainer.querySelector(`[data-namespace="${H}"]`);if(!n){console.error("No content for debug namespace.");return}let o=document.createElement("div");o.classList.add("debug-state"),o.setAttribute("id",`debug-state-${e}`);let a=()=>{let p=this.debugStates[e].isExpanded;this.debugStates[e].isExpanded=!p,o.classList.toggle("collapsed",p),s.textContent=p?"[+]":"[-]"},s=document.createElement("button");s.classList.add("json-toggle"),s.textContent="[-]",s.onclick=a,o.appendChild(s);let l=document.createElement("div");l.classList.add("debug-state-label"),l.innerText=e||"untitled",l.onclick=a,o.appendChild(l);let r=document.createElement("div");r.classList.add("json-wrapper"),o.appendChild(r);let d=new E(t,r,{expandObjs:[/children/,/children\/(.*)/,/entry/]});this.debugStates[e]={state:t,jsonView:d,isExpanded:!0},n.appendChild(o)}addTab(e){if(this.tabEntries[e])return;this.tabEntries[e]=[];let t=document.createElement("button");t.classList.add("debug-tab"),t.textContent=e,t.onclick=()=>this.switchTab(e),this.tabContainer.appendChild(t);let n=document.createElement("div");n.classList.add("debug-tab-content"),n.dataset.namespace=e,this.contentContainer.appendChild(n),Object.keys(this.tabEntries).length===1&&this.switchTab(e)}clearCurrentTab(){this.clearTab(this.activeTab)}clearTab(e){let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(this.tabEntries[e]=[],e===H&&Object.keys(this.debugStates).forEach(n=>{delete this.debugStates[n]}),t.innerHTML="")}switchTab(e){this.activeTab=e,this.tabContainer.querySelectorAll(".debug-tab").forEach((n,o)=>{let a=Object.keys(this.tabEntries)[o];n.classList.toggle("active",a===e)}),this.contentContainer.querySelectorAll(".debug-tab-content").forEach(n=>{n.style.display="none"});let t=this.contentContainer.querySelector(`[data-namespace="${e}"]`);t&&(t.style.display="block")}addLog(e,t){this.tabEntries[e]||this.addTab(e);let n={id:`${e}-${Date.now()}-${Math.random()}`,message:t,timestamp:new Date};this.tabEntries[e].push(n);let o=this.contentContainer.querySelector(`[data-namespace="${e}"]`);if(!o)return;let a=this.createLogElement(n,e);o.appendChild(a),e!=="global"&&this.addLog("global",t)}createLogElement(e,t){let n=document.createElement("div");n.classList.add("debug-log-entry"),n.dataset.logId=e.id;let o=document.createElement("div");o.innerText=`[${e.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(e.message)}`,o.classList.add("debug-log-entry-text");let a=document.createElement("button");a.innerText="\u{1F4CB}",a.classList.add("debug-copy-button"),a.onclick=()=>navigator.clipboard.writeText(o.innerText);let s=document.createElement("button");return s.innerText="\u274C",s.classList.add("debug-delete-button"),s.onclick=()=>this.removeLogEntry(t,e.id,n),n.appendChild(o),n.appendChild(a),n.appendChild(s),n}removeLogEntry(e,t,n){this.tabEntries[e]=this.tabEntries[e].filter(o=>o.id!==t),n.remove()}renderLogEntry(e){return Array.isArray(e)?e.join(" "):typeof e=="object"?(0,R.default)(e):String(e)}show(){this.container.classList.add("visible");let e=parseFloat(this.container.style.opacity)||1;this.container.style.opacity=String(e),this.saveSettings()}hide(){this.container.classList.remove("visible"),this.saveSettings()}toggle(){this.container.classList.contains("visible")?this.hide():this.show()}};function J(i,e){M.default.dispatch("debug-state",{id:i,state:e})}
//# sourceMappingURL=index.cjs.js.map
