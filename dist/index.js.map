{"version":3,"sources":["../src/DebugPanel/DebugPanel.scss","../src/JsonView/JsonView.scss","../src/DebugPanel/DebugPanel.ts","../src/constants.ts","../src/JsonView/JsonView.ts","../src/utils/domUtils.ts"],"sourcesContent":["\nconst css = \".debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .1s ease-in-out,visibility .1s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#1a1a1a;padding:6px 6px 0 6px;gap:3px;cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#2d2d2d;color:#888;padding:5px 6px 7px;margin:0;border:none;border-top-left-radius:6px;border-top-right-radius:6px;cursor:pointer;position:relative;box-shadow:inset 0 -2px 4px rgba(0,0,0,.3);font-size:12px;font-family:system-ui,-apple-system,BlinkMacSystemFont,\\\"Segoe UI\\\",Roboto,Oxygen,Ubuntu,Cantarell,\\\"Open Sans\\\",\\\"Helvetica Neue\\\",sans-serif}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#353535;color:#aaa}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:linear-gradient(to bottom, #3f6d9c, #324f6e, #121b25);color:#fff;box-shadow:0 -3px 8px rgba(0,102,204,.4),inset 0 1px 0 hsla(0,0%,100%,.2);z-index:1;border-bottom-left-radius:0;border-bottom-right-radius:0}.debug-panel .debug-panel-tabs .debug-tab.debug-tab-hidden{margin-left:auto}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0;background:#0d0d0d;overscroll-behavior:contain}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:2px;padding:5px 0}.debug-panel .debug-panel-content .debug-tab-content.layout-columns{display:flex;flex-direction:row;overflow-x:auto;overflow-y:hidden}.debug-panel .debug-panel-content .debug-tab-content.layout-columns .debug-state{min-width:150px;flex:1 1 0;padding:0 2px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);border:none;cursor:pointer;transition:background .1s}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:focus,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:focus,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:focus{outline:none}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{color:#fff;display:flex;align-items:center;justify-content:center;padding:0;margin:0;font-size:14px;width:20px;height:20px;border-radius:3px;transition:background .1s,transform .1s}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{transform:scale(1.1)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:active,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:active,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:active{transform:scale(0.95)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{border-radius:50%;opacity:0;transition:opacity .1s,background .1s}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;opacity:.7}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;opacity:.7}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{opacity:1}.debug-panel .debug-toolbar{display:flex;box-sizing:border-box;width:100%;align-items:center;gap:2px;padding:2px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap;position:relative}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:0;max-width:100px;min-width:40px;flex-shrink:1;padding:4px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .1s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .1s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track,.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{border:none;cursor:pointer;transition:background .1s}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar button{background:#ba6c38;color:#fff;padding:4px 6px;margin:2px;border-radius:4px;font-size:12px;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button.debug-icon-button{font-size:13px;padding:3px 5px;background:#555}.debug-panel .debug-toolbar button.debug-icon-button:hover{background:#666}.debug-panel .debug-toolbar .debug-settings-panel{position:absolute;bottom:100%;right:0;background:#1a1a1a;border:1px solid #444;border-radius:6px;padding:12px;margin-bottom:8px;box-shadow:0 4px 12px rgba(0,0,0,.5);min-width:200px;display:none;flex-direction:column;gap:10px;z-index:1000}.debug-panel .debug-toolbar .debug-settings-panel.visible{display:flex}.debug-panel .debug-toolbar .debug-settings-panel::before{content:\\\"\\\";position:absolute;top:-20px;left:-20px;right:-20px;bottom:-20px;z-index:-1}.debug-panel .debug-toolbar .debug-settings-panel .settings-row{display:flex;align-items:center;gap:8px;font-size:12px;color:#ccc}.debug-panel .debug-toolbar .debug-settings-panel .settings-row label{flex:1;cursor:pointer;user-select:none}.debug-panel .debug-toolbar .debug-settings-panel .settings-row input[type=checkbox]{cursor:pointer}.debug-panel .debug-toolbar .debug-settings-panel .settings-row .debug-opacity-slider{flex:1;min-width:100px}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .1s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-panel .debug-help-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.95);z-index:1000;display:flex;align-items:flex-start;justify-content:center;padding:20px;overflow-y:auto;cursor:pointer;box-sizing:border-box}.debug-panel .debug-help-overlay .debug-help-content{background:linear-gradient(to bottom, #2a2a2a, #1a1a1a);border-radius:8px;padding:30px;max-width:500px;width:100%;box-shadow:0 8px 32px rgba(0,0,0,.5);border:1px solid #444;margin-top:auto;margin-bottom:auto;box-sizing:border-box}.debug-panel .debug-help-overlay .debug-help-content h2{margin:0 0 20px 0;color:#fff;font-size:24px;font-weight:bold;text-align:center;border-bottom:2px solid #007bff;padding-bottom:10px}.debug-panel .debug-help-overlay .debug-help-content .help-section{margin-bottom:25px}.debug-panel .debug-help-overlay .debug-help-content .help-section h3{color:#9cdcfe;font-size:16px;margin:0 0 10px 0;font-weight:bold}.debug-panel .debug-help-overlay .debug-help-content .help-section ul{list-style:none;padding:0;margin:0}.debug-panel .debug-help-overlay .debug-help-content .help-section ul li{padding:6px 0;color:#ddd;font-size:13px;line-height:1.5}.debug-panel .debug-help-overlay .debug-help-content .help-section ul li kbd{background:#333;border:1px solid #555;border-radius:3px;padding:2px 6px;font-family:monospace;font-size:12px;color:#9cdcfe}.debug-panel .debug-help-overlay .debug-help-content .help-section ul li strong{color:#fff}.debug-panel .debug-help-overlay .debug-help-content .help-section .help-links a{color:#4fc3f7;text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:color .1s}.debug-panel .debug-help-overlay .debug-help-content .help-section .help-links a:hover{color:#81d4fa;text-decoration:underline}.debug-panel .debug-help-overlay .debug-help-content .help-section .help-links a svg{vertical-align:middle}.debug-panel .debug-help-overlay .debug-help-content .help-close-hint{text-align:center;color:#888;font-size:12px;margin:20px 0 0 0;font-style:italic}.debug-state{position:relative;flex:1 1 100%;display:flex;flex-direction:column;margin-bottom:5px;width:100%}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 2px 5px 3px;margin-bottom:0;color:#fff;background:linear-gradient(to bottom, #3a3a3a, #2d2d2d);border-top-left-radius:4px;border-top-right-radius:4px;box-shadow:0 1px 3px rgba(0,0,0,.3);transition:all .1s ease-in-out;display:flex;align-items:center;gap:2px;width:100%;box-sizing:border-box;position:relative}.debug-state .debug-state-label:hover{background:linear-gradient(to bottom, #4a4a4a, #3d3d3d);cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,.4)}.debug-state .debug-state-label:hover .debug-state-hover-actions{opacity:1}.debug-state .debug-state-label:hover .json-toggle{color:#fff}.debug-state .debug-state-label:active{box-shadow:0 1px 2px rgba(0,0,0,.3)}.debug-state .debug-state-label .json-toggle{border:none;cursor:pointer;transition:background .1s}.debug-state .debug-state-label .json-toggle:focus{outline:none}.debug-state .debug-state-label .json-toggle{background:none;color:#888;font-size:12px;padding:0;width:20px;height:16px;transition:color .1s;flex-shrink:0}.debug-state .debug-state-label .json-toggle:hover{color:#fff}.debug-state .debug-state-label .debug-state-label-text{flex:1}.debug-state .debug-state-label .debug-state-hover-actions{display:flex;gap:4px;opacity:0;margin-right:5px;transition:opacity .1s ease-in-out;flex-shrink:0}.debug-state .debug-state-label .debug-state-action-button,.debug-state .debug-state-label .debug-state-delete-button,.debug-state .debug-state-label .debug-state-hide-button,.debug-state .debug-state-label .debug-state-copy-button{border:none;cursor:pointer;transition:background .1s}.debug-state .debug-state-label .debug-state-action-button:focus,.debug-state .debug-state-label .debug-state-delete-button:focus,.debug-state .debug-state-label .debug-state-hide-button:focus,.debug-state .debug-state-label .debug-state-copy-button:focus{outline:none}.debug-state .debug-state-label .debug-state-action-button,.debug-state .debug-state-label .debug-state-delete-button,.debug-state .debug-state-label .debug-state-hide-button,.debug-state .debug-state-label .debug-state-copy-button{color:#fff;display:flex;align-items:center;justify-content:center;padding:0;margin:0;font-size:14px;width:20px;height:20px;border-radius:3px;transition:background .1s,transform .1s}.debug-state .debug-state-label .debug-state-action-button:hover,.debug-state .debug-state-label .debug-state-delete-button:hover,.debug-state .debug-state-label .debug-state-hide-button:hover,.debug-state .debug-state-label .debug-state-copy-button:hover{transform:scale(1.1)}.debug-state .debug-state-label .debug-state-action-button:active,.debug-state .debug-state-label .debug-state-delete-button:active,.debug-state .debug-state-label .debug-state-hide-button:active,.debug-state .debug-state-label .debug-state-copy-button:active{transform:scale(0.95)}.debug-state .debug-state-label .debug-state-action-button,.debug-state .debug-state-label .debug-state-delete-button,.debug-state .debug-state-label .debug-state-hide-button,.debug-state .debug-state-label .debug-state-copy-button{background:rgba(100,100,100,.8)}.debug-state .debug-state-label .debug-state-copy-button:hover{background:rgba(34,166,120,.8)}.debug-state .debug-state-label .debug-state-hide-button:hover{background:rgba(100,100,200,.8)}.debug-state .debug-state-label .debug-state-delete-button:hover{background:rgba(198,62,41,.8)}.debug-state .json-wrapper{position:relative;padding:5px;background:#292929;max-height:400px;overflow-y:auto;overscroll-behavior:contain}.debug-state.collapsed .debug-state-label{border-radius:4px}.debug-state.collapsed .json-wrapper{display:none}\";\nif (typeof document !== 'undefined') {\n  const style = document.createElement('style');\n  style.textContent = css;\n  document.head.appendChild(style);\n}\nexport default css;\n","\nconst css = \".json-node{position:relative;margin-left:15px;padding-left:0;font-size:12px;line-height:1.2em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe;padding:2px 0;flex:0}.json-node .json-key.clickable{cursor:pointer;width:100%}.json-node .json-key.clickable+.json-value{width:100%}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;padding:2px 0;flex:1}.json-node .json-toggle{position:absolute;left:-20px;border:none;background:none;cursor:pointer;color:#888;font-size:9px;padding:0;width:22px;height:20px;transition:color .1s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .json-property:hover>.json-toggle{color:#fff}.json-node.collapsed .json-properties{display:none}\";\nif (typeof document !== 'undefined') {\n  const style = document.createElement('style');\n  style.textContent = css;\n  document.head.appendChild(style);\n}\nexport default css;\n","import EventBus from 'eventbusjs';\nimport safeStringify from 'fast-safe-stringify';\nimport { COLLAPSED_INDICATOR, EXPANDED_INDICATOR } from '../constants';\nimport { JsonView } from '../JsonView/JsonView';\nimport { getWindowSize, makeDraggable, makeResizable } from '../utils/domUtils';\n\nconst DEBUG_STATE_NAMESPACE = 'objects';\n\nexport enum ScreenPosition {\n\tTopLeft = 'topLeft',\n\tTop = 'top',\n\tTopRight = 'topRight',\n\tRight = 'right',\n\tBottomRight = 'bottomRight',\n\tBottom = 'bottom',\n\tBottomLeft = 'bottomLeft',\n\tLeft = 'left'\n}\n\nconst MIN_WIDTH = 280;\nconst UNSNAP_SHRINK_PADDING = 20; // Pixels to shrink from each side when unsnapping from stretched\nconst SNAP_ANIMATION_DURATION = 150; // milliseconds for snap/unsnap animations\n\ntype LogEntry = {\n\tid: string;\n\tmessage: Array<any> | object | string;\n\ttimestamp: Date;\n};\n\ntype LogEvent = {\n\tnamespace: string;\n\targs: Array<any>;\n};\n\ninterface TabEntries {\n\t[namespace: string]: LogEntry[];\n}\n\ninterface DebugState {\n\tstate: any;\n\tjsonView: JsonView;\n\tisExpanded: boolean;\n}\n\nexport interface DebugPanelSettings {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n\tvisible: boolean;\n\topacity: number;\n\tsnappedTo?: 'left' | 'right' | 'top' | 'bottom' | 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight' | null;\n\tisStretched?: boolean;\n\tlayoutMode?: 'row' | 'column';\n\tlogToConsole?: boolean;\n\tclearOnHide?: boolean;\n\texpandByDefault?: boolean;\n\thiddenObjects?: string[];\n}\n\nexport interface DebugPanelOptions {\n\tshow?: boolean;\n\tposition?: ScreenPosition;\n\twidth?: number;\n\theight?: number;\n\tsnap?: boolean;\n\tsnapPadding?: number;\n\tlogToConsole?: boolean;\n\tclearOnHide?: boolean;\n\texpandByDefault?: boolean;\n}\n\n/*\nDebugPanel usage API:\n\ndebug(obj), debug(id, obj)\nlog(...args)\nshow()\nhide()\ntoggle()\n\n*/\n\nexport class DebugPanel {\n\tprivate container: HTMLElement;\n\tprivate tabContainer: HTMLElement;\n\tprivate contentContainer: HTMLElement;\n\tprivate toolbar: HTMLElement;\n\tprivate settingsPanel!: HTMLElement;\n\tprivate opacitySlider!: HTMLInputElement;\n\tprivate logToConsoleCheckbox!: HTMLInputElement;\n\tprivate clearOnHideCheckbox!: HTMLInputElement;\n\tprivate expandByDefaultCheckbox!: HTMLInputElement;\n\tprivate collapseAllButton!: HTMLButtonElement;\n\tprivate stretchButton!: HTMLButtonElement;\n\tprivate layoutButton!: HTMLButtonElement;\n\tprivate tabEntries: TabEntries = {};\n\tprivate debugStates: { [id: string]: DebugState } = {};\n\tprivate activeTab: string = 'global';\n\tprivate options: DebugPanelOptions;\n\tprivate resizeThrottleTimer: number | null = null;\n\tprivate snappedTo: 'left' | 'right' | 'top' | 'bottom' | 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight' | null = null;\n\tprivate isStretched: boolean = false;\n\tprivate layoutMode: 'row' | 'column' = 'row';\n\tprivate logToConsole: boolean = false;\n\tprivate clearOnHide: boolean = false;\n\tprivate expandByDefault: boolean = false;\n\tprivate hiddenObjects: Set<string> = new Set();\n\tprivate hiddenTab!: HTMLElement;\n\n\tconstructor(options: DebugPanelOptions = {}) {\n\t\tthis.options = {\n\t\t\tposition: ScreenPosition.BottomRight,\n\t\t\twidth: 600,\n\t\t\theight: 400,\n\t\t\tsnap: true,\n\t\t\tsnapPadding: 20,\n\t\t\tlogToConsole: false,\n\t\t\tclearOnHide: false,\n\t\t\texpandByDefault: false,\n\t\t\t...options\n\t\t};\n\n\t\tthis.logToConsole = this.options.logToConsole || false;\n\t\tthis.clearOnHide = this.options.clearOnHide || false;\n\t\tthis.expandByDefault = this.options.expandByDefault || false;\n\n\t\tthis.container = this.createContainer();\n\t\tthis.tabContainer = this.createTabContainer();\n\t\tthis.contentContainer = this.createContentContainer();\n\n\t\tthis.container.appendChild(this.tabContainer);\n\t\tthis.container.appendChild(this.contentContainer);\n\n\t\tthis.toolbar = this.createGlobalToolbar();\n\t\tthis.container.appendChild(this.toolbar);\n\n\t\tdocument.body.appendChild(this.container);\n\n\t\tthis.addTab(DEBUG_STATE_NAMESPACE);\n\t\tthis.addTab('global');\n\t\tthis.addHiddenTab();\n\n\t\t// Restore settings first (including visibility) before setting up interactions\n\t\tthis.restoreSettings();\n\t\tthis.setupResizable();\n\t\tthis.setupDraggable();\n\t\tthis.setupEventListeners();\n\t\tthis.setupKeyboardShortcut();\n\t\tthis.setupWindowResizeListener();\n\n\t\t// Only show if explicitly requested in options AND no saved settings exist\n\t\tif (options.show && !this.loadSettings()) {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tprivate createContainer(): HTMLElement {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.classList.add('debug-panel');\n\t\tcontainer.style.width = `${this.options.width}px`;\n\t\tcontainer.style.height = `${this.options.height}px`;\n\t\tcontainer.style.position = 'fixed';\n\t\tcontainer.style.opacity = '1'; // Set default opacity\n\t\tcontainer.style.transition = `left ${SNAP_ANIMATION_DURATION}ms ease-out, top ${SNAP_ANIMATION_DURATION}ms ease-out, width ${SNAP_ANIMATION_DURATION}ms ease-out, height ${SNAP_ANIMATION_DURATION}ms ease-out`;\n\t\treturn container;\n\t}\n\n\tprivate createTabContainer(): HTMLElement {\n\t\tconst tabContainer = document.createElement('div');\n\t\ttabContainer.classList.add('debug-panel-tabs');\n\n\t\t// Add double-click handler for stretch\n\t\ttabContainer.addEventListener('dblclick', () => {\n\t\t\tthis.toggleStretch();\n\t\t});\n\n\t\treturn tabContainer;\n\t}\n\n\tprivate createContentContainer(): HTMLElement {\n\t\tconst contentContainer = document.createElement('div');\n\t\tcontentContainer.classList.add('debug-panel-content');\n\t\treturn contentContainer;\n\t}\n\n\tprivate createGlobalToolbar(): HTMLElement {\n\t\tconst toolbar = document.createElement('div');\n\t\ttoolbar.classList.add('debug-toolbar');\n\n\t\t// Help button\n\t\tconst helpButton = document.createElement('button');\n\t\thelpButton.classList.add('debug-icon-button');\n\t\thelpButton.innerHTML = '?';\n\t\thelpButton.title = 'Help & Info';\n\t\thelpButton.onclick = () => this.showHelpOverlay();\n\n\t\t// Hide button\n\t\tconst hideButton = document.createElement('button');\n\t\thideButton.classList.add('debug-hide-button');\n\t\thideButton.textContent = 'Hide';\n\t\thideButton.title = 'Hide panel (Ctrl+Alt+D)';\n\t\thideButton.onclick = () => this.hide();\n\n\t\t// Clear button\n\t\tconst clearButton = document.createElement('button');\n\t\tclearButton.classList.add('debug-clear-button');\n\t\tclearButton.textContent = 'Clear';\n\t\tclearButton.title = 'Clear current tab';\n\t\tclearButton.onclick = () => this.clearCurrentTab();\n\n\t\t// Collapse/Expand All button\n\t\tthis.collapseAllButton = document.createElement('button');\n\t\tthis.collapseAllButton.classList.add('debug-icon-button');\n\t\tthis.collapseAllButton.innerHTML = '{ }';\n\t\tthis.updateCollapseAllTooltip();\n\t\tthis.collapseAllButton.onclick = () => this.toggleExpandAll();\n\n\t\t// Stretch button\n\t\tthis.stretchButton = document.createElement('button');\n\t\tthis.stretchButton.classList.add('debug-icon-button');\n\t\tthis.updateStretchButton();\n\t\tthis.stretchButton.onclick = () => this.toggleStretch();\n\n\t\t// Layout mode button\n\t\tthis.layoutButton = document.createElement('button');\n\t\tthis.layoutButton.classList.add('debug-icon-button');\n\t\tthis.layoutButton.innerHTML = '⚏';\n\t\tthis.updateLayoutButtonTooltip();\n\t\tthis.layoutButton.onclick = () => this.toggleLayoutMode();\n\n\t\t// Settings (cog) button\n\t\tconst settingsButton = document.createElement('button');\n\t\tsettingsButton.classList.add('debug-icon-button');\n\t\tsettingsButton.innerHTML = '⚙';\n\t\tsettingsButton.title = 'Settings';\n\n\t\t// Create settings panel\n\t\tthis.settingsPanel = this.createSettingsPanel();\n\n\t\t// Toggle settings panel on click\n\t\tsettingsButton.onclick = (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.settingsPanel.classList.toggle('visible');\n\t\t};\n\n\t\t// Hide settings panel when clicking outside\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (!this.settingsPanel.contains(e.target as Node) &&\n\t\t\t\t!settingsButton.contains(e.target as Node)) {\n\t\t\t\tthis.settingsPanel.classList.remove('visible');\n\t\t\t}\n\t\t});\n\n\t\t// Left side buttons\n\t\ttoolbar.appendChild(helpButton);\n\t\ttoolbar.appendChild(hideButton);\n\t\ttoolbar.appendChild(clearButton);\n\n\t\t// Spacer\n\t\tconst spacer = document.createElement('div');\n\t\tspacer.style.flex = '1';\n\t\ttoolbar.appendChild(spacer);\n\n\t\t// Right side buttons\n\t\ttoolbar.appendChild(this.collapseAllButton);\n\t\ttoolbar.appendChild(this.stretchButton);\n\t\ttoolbar.appendChild(this.layoutButton);\n\t\ttoolbar.appendChild(settingsButton);\n\t\ttoolbar.appendChild(this.settingsPanel);\n\n\t\treturn toolbar;\n\t}\n\n\tprivate updateCollapseAllTooltip(): void {\n\t\tconst allExpanded = Object.values(this.debugStates).every(state => state.isExpanded);\n\t\tthis.collapseAllButton.title = allExpanded ? 'Collapse all objects' : 'Expand all objects';\n\t}\n\n\tprivate updateStretchButton(): void {\n\t\t// Determine icon based on snap direction\n\t\tlet icon = '↔';  // Default horizontal arrows\n\t\tif (this.snappedTo === 'left' || this.snappedTo === 'right' ||\n\t\t\tthis.snappedTo === 'topLeft' || this.snappedTo === 'topRight' ||\n\t\t\tthis.snappedTo === 'bottomLeft' || this.snappedTo === 'bottomRight') {\n\t\t\ticon = '⇵';  // Vertical arrows for left/right/corner snaps\n\t\t}\n\n\t\tthis.stretchButton.innerHTML = icon;\n\t\tthis.stretchButton.title = this.isStretched ? 'Unstretch panel' : 'Stretch panel';\n\t}\n\n\tprivate updateLayoutButtonTooltip(): void {\n\t\tthis.layoutButton.title = this.layoutMode === 'row'\n\t\t\t? 'Switch to column layout'\n\t\t\t: 'Switch to row layout';\n\t}\n\n\tprivate createSettingsPanel(): HTMLElement {\n\t\tconst panel = document.createElement('div');\n\t\tpanel.classList.add('debug-settings-panel');\n\n\t\t// Opacity setting\n\t\tconst opacityRow = document.createElement('div');\n\t\topacityRow.classList.add('settings-row');\n\n\t\tconst opacityLabel = document.createElement('label');\n\t\topacityLabel.textContent = 'Opacity';\n\n\t\tthis.opacitySlider = document.createElement('input');\n\t\tthis.opacitySlider.type = 'range';\n\t\tthis.opacitySlider.min = '20';\n\t\tthis.opacitySlider.max = '100';\n\t\tthis.opacitySlider.value = '100';\n\t\tthis.opacitySlider.classList.add('debug-opacity-slider');\n\t\tthis.opacitySlider.oninput = () => this.handleOpacityChange();\n\n\t\topacityRow.appendChild(opacityLabel);\n\t\topacityRow.appendChild(this.opacitySlider);\n\n\t\t// Log to console checkbox\n\t\tconst logToConsoleRow = document.createElement('div');\n\t\tlogToConsoleRow.classList.add('settings-row');\n\n\t\tthis.logToConsoleCheckbox = document.createElement('input');\n\t\tthis.logToConsoleCheckbox.type = 'checkbox';\n\t\tthis.logToConsoleCheckbox.id = 'logToConsole';\n\t\tthis.logToConsoleCheckbox.checked = this.logToConsole;\n\t\tthis.logToConsoleCheckbox.onchange = () => {\n\t\t\tthis.logToConsole = this.logToConsoleCheckbox!.checked;\n\t\t\tthis.saveSettings();\n\t\t};\n\n\t\tconst logToConsoleLabel = document.createElement('label');\n\t\tlogToConsoleLabel.htmlFor = 'logToConsole';\n\t\tlogToConsoleLabel.textContent = 'Log to console';\n\n\t\tlogToConsoleRow.appendChild(this.logToConsoleCheckbox);\n\t\tlogToConsoleRow.appendChild(logToConsoleLabel);\n\n\t\t// Clear on hide checkbox\n\t\tconst clearOnHideRow = document.createElement('div');\n\t\tclearOnHideRow.classList.add('settings-row');\n\n\t\tthis.clearOnHideCheckbox = document.createElement('input');\n\t\tthis.clearOnHideCheckbox.type = 'checkbox';\n\t\tthis.clearOnHideCheckbox.id = 'clearOnHide';\n\t\tthis.clearOnHideCheckbox.checked = this.clearOnHide;\n\t\tthis.clearOnHideCheckbox.onchange = () => {\n\t\t\tthis.clearOnHide = this.clearOnHideCheckbox!.checked;\n\t\t\tthis.saveSettings();\n\t\t};\n\n\t\tconst clearOnHideLabel = document.createElement('label');\n\t\tclearOnHideLabel.htmlFor = 'clearOnHide';\n\t\tclearOnHideLabel.textContent = 'Clear on hide';\n\n\t\tclearOnHideRow.appendChild(this.clearOnHideCheckbox);\n\t\tclearOnHideRow.appendChild(clearOnHideLabel);\n\n\t\t// Expand by default checkbox\n\t\tconst expandByDefaultRow = document.createElement('div');\n\t\texpandByDefaultRow.classList.add('settings-row');\n\n\t\tthis.expandByDefaultCheckbox = document.createElement('input');\n\t\tthis.expandByDefaultCheckbox.type = 'checkbox';\n\t\tthis.expandByDefaultCheckbox.id = 'expandByDefault';\n\t\tthis.expandByDefaultCheckbox.checked = this.expandByDefault;\n\t\tthis.expandByDefaultCheckbox.onchange = () => {\n\t\t\tthis.expandByDefault = this.expandByDefaultCheckbox!.checked;\n\t\t\tthis.saveSettings();\n\t\t};\n\n\t\tconst expandByDefaultLabel = document.createElement('label');\n\t\texpandByDefaultLabel.htmlFor = 'expandByDefault';\n\t\texpandByDefaultLabel.textContent = 'Expand new objects by default';\n\n\t\texpandByDefaultRow.appendChild(this.expandByDefaultCheckbox);\n\t\texpandByDefaultRow.appendChild(expandByDefaultLabel);\n\n\t\t// Reposition button\n\t\tconst repositionButton = document.createElement('button');\n\t\trepositionButton.textContent = 'Reposition (Ctrl+Alt+R)';\n\t\trepositionButton.style.marginTop = '10px';\n\t\trepositionButton.onclick = () => this.repositionToDefault();\n\n\t\t// Reset all settings button\n\t\tconst resetSettingsButton = document.createElement('button');\n\t\tresetSettingsButton.textContent = 'Reset All Settings';\n\t\tresetSettingsButton.style.marginTop = '5px';\n\t\tresetSettingsButton.onclick = () => this.resetAllSettings();\n\n\t\tpanel.appendChild(opacityRow);\n\t\tpanel.appendChild(logToConsoleRow);\n\t\tpanel.appendChild(clearOnHideRow);\n\t\tpanel.appendChild(expandByDefaultRow);\n\t\tpanel.appendChild(repositionButton);\n\t\tpanel.appendChild(resetSettingsButton);\n\n\t\treturn panel;\n\t}\n\n\tprivate setupEventListeners(): void {\n\t\tEventBus.addEventListener('log', (event: any) => {\n\t\t\tconst { namespace, message } = event.target;\n\t\t\tthis.log(namespace, message);\n\t\t});\n\n\t\t// special listener for sending objects to the objects panel\n\t\t// todo:\n\t\tEventBus.addEventListener('debug', (event: any) => {\n\t\t\tconst { id, state } = event.target;\n\t\t\t// if (!id || !state) {\n\t\t\t// \tconsole.log('Invalid event data for debug-state. Expected {id, state}, got:', event);\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\tthis.debug(id, state);\n\t\t});\n\t}\n\n\tprivate setupResizable(): void {\n\t\tconst { width, height } = getWindowSize();\n\n\t\tmakeResizable(this.container, {\n\t\t\thandles: ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\t\tmaxWidth: width - 20,\n\t\t\tmaxHeight: height - 20,\n\t\t\tminWidth: 200,\n\t\t\tminHeight: 150,\n\t\t\tsnapPadding: this.options.snapPadding || 20,\n\t\t\tonResizeStart: () => {\n\t\t\t\t// Disable transitions during resize\n\t\t\t\tthis.container.style.transition = 'none';\n\t\t\t},\n\t\t\tonResize: (newWidth: number, newHeight: number) => {\n\t\t\t\tthis.handleResizeSnapping();\n\t\t\t\tthis.updateToolbarLayout(newWidth);\n\t\t\t\tthis.saveSettings();\n\t\t\t},\n\t\t\tonResizeEnd: () => {\n\t\t\t\t// Re-enable transitions after resize\n\t\t\t\tthis.container.style.transition = `left ${SNAP_ANIMATION_DURATION}ms ease-out, top ${SNAP_ANIMATION_DURATION}ms ease-out, width ${SNAP_ANIMATION_DURATION}ms ease-out, height ${SNAP_ANIMATION_DURATION}ms ease-out`;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setupDraggable(): void {\n\t\tif (this.options.snap) {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDragStart: () => this.handleDragStart(),\n\t\t\t\tonDrag: (x: number, y: number) => this.handleSnapWhileDragging(x, y),\n\t\t\t\tonDragEnd: () => this.handleDragEnd(),\n\t\t\t\tallowResize: true\n\t\t\t});\n\t\t} else {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDragEnd: () => this.handleDragEnd(),\n\t\t\t\tallowResize: true\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate setupPosition(): void {\n\t\tconst { width, height } = getWindowSize();\n\t\tconst panelWidth = this.options.width || 600;\n\t\tconst panelHeight = this.options.height || 400;\n\n\t\tlet left = 0;\n\t\tlet top = 0;\n\n\t\tswitch (this.options.position) {\n\t\t\tcase ScreenPosition.TopLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Top:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.TopRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Right:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Bottom:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Left:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.container.style.left = `${left}px`;\n\t\tthis.container.style.top = `${top}px`;\n\t}\n\n\tprivate setupKeyboardShortcut(): void {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\t// Check for Ctrl+Alt+D (Windows/Linux) or Cmd+D (Mac) - Toggle visibility\n\t\t\tconst isCtrlAltD = event.ctrlKey && event.altKey && event.key.toLowerCase() === 'd' && !event.metaKey;\n\t\t\tconst isCmdD = event.metaKey && event.key.toLowerCase() === 'd' && !event.ctrlKey;\n\n\t\t\tif (isCtrlAltD || isCmdD) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.toggle();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only process other shortcuts if panel is visible\n\t\t\tif (!this.container.classList.contains('visible')) return;\n\n\t\t\t// Check for Ctrl+Alt+R (Windows/Linux) or Cmd+Ctrl+R (Mac) - Reposition to default\n\t\t\tconst isCtrlAltR = event.ctrlKey && event.altKey && event.key.toLowerCase() === 'r' && !event.metaKey;\n\t\t\tconst isCmdCtrlR = event.metaKey && event.ctrlKey && event.key.toLowerCase() === 'r';\n\t\t\tif (isCtrlAltR || isCmdCtrlR) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.repositionToDefault();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate repositionToDefault(): void {\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst defaultWidth = this.options.width || 280;\n\t\tconst defaultHeight = this.options.height || windowHeight * 0.5;\n\t\tconst position = this.options.position || ScreenPosition.BottomRight;\n\n\t\tthis.container.style.width = `${defaultWidth}px`;\n\t\tthis.container.style.height = `${defaultHeight}px`;\n\n\t\t// Calculate position based on default\n\t\tlet left = 0;\n\t\tlet top = 0;\n\n\t\tswitch (position) {\n\t\t\tcase ScreenPosition.TopLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Top:\n\t\t\t\tleft = (windowWidth - defaultWidth) / 2;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.TopRight:\n\t\t\t\tleft = windowWidth - defaultWidth;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Right:\n\t\t\t\tleft = windowWidth - defaultWidth;\n\t\t\t\ttop = (windowHeight - defaultHeight) / 2;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomRight:\n\t\t\t\tleft = windowWidth - defaultWidth;\n\t\t\t\ttop = windowHeight - defaultHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Bottom:\n\t\t\t\tleft = (windowWidth - defaultWidth) / 2;\n\t\t\t\ttop = windowHeight - defaultHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = windowHeight - defaultHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Left:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = (windowHeight - defaultHeight) / 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.container.style.left = `${left}px`;\n\t\tthis.container.style.top = `${top}px`;\n\n\t\tthis.updateToolbarLayout(defaultWidth);\n\t\tthis.saveSettings();\n\t}\n\n\tprivate resetAllSettings(): void {\n\t\tif (!confirm('Are you sure you want to reset all settings? This will restore the panel to its default position and clear all preferences, but keep the current data.')) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clear localStorage\n\t\tlocalStorage.removeItem('debugPanelSettings');\n\n\t\t// Reset state variables\n\t\tthis.logToConsole = this.options.logToConsole || false;\n\t\tthis.clearOnHide = this.options.clearOnHide || false;\n\t\tthis.expandByDefault = this.options.expandByDefault || false;\n\t\tthis.hiddenObjects.clear();\n\t\tthis.snappedTo = null;\n\t\tthis.isStretched = false;\n\t\tthis.layoutMode = 'row';\n\n\t\t// Reset UI controls\n\t\tif (this.logToConsoleCheckbox) this.logToConsoleCheckbox.checked = this.logToConsole;\n\t\tif (this.clearOnHideCheckbox) this.clearOnHideCheckbox.checked = this.clearOnHide;\n\t\tif (this.expandByDefaultCheckbox) this.expandByDefaultCheckbox.checked = this.expandByDefault;\n\t\tif (this.opacitySlider) {\n\t\t\tthis.opacitySlider.value = '100';\n\t\t\tthis.container.style.opacity = '1';\n\t\t}\n\n\t\t// Update hidden tab label\n\t\tthis.updateHiddenTabLabel();\n\n\t\t// Reposition to default\n\t\tthis.repositionToDefault();\n\t}\n\n\tprivate showHelpOverlay(): void {\n\t\t// Remove existing overlay if present\n\t\tconst existingOverlay = this.contentContainer.querySelector('.debug-help-overlay');\n\t\tif (existingOverlay) {\n\t\t\texistingOverlay.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tconst overlay = document.createElement('div');\n\t\toverlay.classList.add('debug-help-overlay');\n\n\t\toverlay.innerHTML = `\n\t\t\t<div class=\"debug-help-content\">\n\t\t\t\t<h2>Dev Debug Panel</h2>\n\n\t\t\t\t<section class=\"help-section\">\n\t\t\t\t\t<h3>Keyboard Shortcuts</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li><kbd>Ctrl+Alt+D</kbd> (Windows/Linux) or <kbd>Cmd+D</kbd> (Mac) - Toggle panel visibility</li>\n\t\t\t\t\t\t<li><kbd>Ctrl+Alt+R</kbd> (Windows/Linux) or <kbd>Cmd+Ctrl+R</kbd> (Mac) - Reposition to default</li>\n\t\t\t\t\t\t<li><kbd>Double-click</kbd> title bar - Stretch/unstretch panel</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\n\t\t\t\t<section class=\"help-section\">\n\t\t\t\t\t<h3>Library Info</h3>\n\t\t\t\t\t<ul class=\"help-links\">\n\t\t\t\t\t\t<li>Version: <strong>1.1.1</strong></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/rw3iss/dev-debug-panel\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\t\t\t\t\t<svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"currentColor\">\n\t\t\t\t\t\t\t\t\t<path d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\tGitHub Repository\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://github.com/rw3iss/dev-debug-panel/issues\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\t\t\t\t\tReport Issue / Feedback\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\n\t\t\t\t<section class=\"help-section\">\n\t\t\t\t\t<h3>Author</h3>\n\t\t\t\t\t<ul class=\"help-links\">\n\t\t\t\t\t\t<li><strong>Ryan Weiss</strong></li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"mailto:rw3iss@gmail.com\">rw3iss@gmail.com</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://www.ryanweiss.net\" target=\"_blank\" rel=\"noopener\">www.ryanweiss.net</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a href=\"https://www.buymeacoffee.com/ryanweiss\" target=\"_blank\" rel=\"noopener\">\n\t\t\t\t\t\t\t\t☕ Buy Me a Coffee\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\n\t\t\t\t<p class=\"help-close-hint\">Click anywhere to close</p>\n\t\t\t</div>\n\t\t`;\n\n\t\t// Close on click anywhere\n\t\toverlay.addEventListener('click', () => {\n\t\t\toverlay.remove();\n\t\t});\n\n\t\tthis.contentContainer.appendChild(overlay);\n\t}\n\n\tprivate setupWindowResizeListener(): void {\n\t\twindow.addEventListener('resize', () => {\n\t\t\t// Throttle resize events to 50ms\n\t\t\tif (this.resizeThrottleTimer !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resizeThrottleTimer = window.setTimeout(() => {\n\t\t\t\tthis.resizeThrottleTimer = null;\n\t\t\t\tthis.repositionOnWindowResize();\n\t\t\t}, 50);\n\t\t});\n\t}\n\n\tprivate repositionOnWindowResize(): void {\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst panelWidth = this.container.offsetWidth;\n\t\tconst panelHeight = this.container.offsetHeight;\n\n\t\tconst currentLeft = parseInt(this.container.style.left) || this.container.offsetLeft;\n\t\tconst currentTop = parseInt(this.container.style.top) || this.container.offsetTop;\n\n\t\t// Calculate distances to each edge\n\t\tconst distanceToLeft = currentLeft;\n\t\tconst distanceToRight = windowWidth - (currentLeft + panelWidth);\n\t\tconst distanceToTop = currentTop;\n\t\tconst distanceToBottom = windowHeight - (currentTop + panelHeight);\n\n\t\t// Determine which edges the panel was snapped to before resize\n\t\tconst snapThreshold = 50; // If within 50px of an edge, consider it \"snapped\"\n\t\tconst wasSnappedLeft = distanceToLeft < snapThreshold;\n\t\tconst wasSnappedRight = distanceToRight < snapThreshold;\n\t\tconst wasSnappedTop = distanceToTop < snapThreshold;\n\t\tconst wasSnappedBottom = distanceToBottom < snapThreshold;\n\n\t\tlet newLeft = currentLeft;\n\t\tlet newTop = currentTop;\n\n\t\t// Snap to the edge(s) the panel was closest to\n\t\tif (wasSnappedRight) {\n\t\t\t// Keep panel snapped to right edge\n\t\t\tnewLeft = windowWidth - panelWidth;\n\t\t} else if (wasSnappedLeft) {\n\t\t\t// Keep panel snapped to left edge\n\t\t\tnewLeft = 0;\n\t\t} else {\n\t\t\t// Not snapped horizontally, ensure it stays in bounds\n\t\t\tnewLeft = Math.max(0, Math.min(windowWidth - panelWidth, currentLeft));\n\t\t}\n\n\t\tif (wasSnappedBottom) {\n\t\t\t// Keep panel snapped to bottom edge\n\t\t\tnewTop = windowHeight - panelHeight;\n\t\t} else if (wasSnappedTop) {\n\t\t\t// Keep panel snapped to top edge\n\t\t\tnewTop = 0;\n\t\t} else {\n\t\t\t// Not snapped vertically, ensure it stays in bounds\n\t\t\tnewTop = Math.max(0, Math.min(windowHeight - panelHeight, currentTop));\n\t\t}\n\n\t\t// Final bounds check to ensure panel is fully visible\n\t\tnewLeft = Math.max(0, Math.min(windowWidth - panelWidth, newLeft));\n\t\tnewTop = Math.max(0, Math.min(windowHeight - panelHeight, newTop));\n\n\t\tthis.container.style.left = `${newLeft}px`;\n\t\tthis.container.style.top = `${newTop}px`;\n\n\t\tthis.saveSettings();\n\t}\n\n\t// Settings management\n\n\tprivate restoreSettings(): void {\n\t\tconst savedSettings = this.loadSettings();\n\n\t\tif (savedSettings) {\n\t\t\t// Restore saved position and size\n\t\t\tthis.container.style.left = `${savedSettings.left}px`;\n\t\t\tthis.container.style.top = `${savedSettings.top}px`;\n\t\t\tthis.container.style.width = `${savedSettings.width}px`;\n\t\t\tthis.container.style.height = `${savedSettings.height}px`;\n\n\t\t\t// Restore opacity\n\t\t\tconst opacity = savedSettings.opacity !== undefined ? savedSettings.opacity : 1;\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t\tif (this.opacitySlider) {\n\t\t\t\tthis.opacitySlider.value = String(Math.round(opacity * 100));\n\t\t\t}\n\n\t\t\t// Restore snap and stretch state\n\t\t\tif (savedSettings.snappedTo) {\n\t\t\t\tthis.snappedTo = savedSettings.snappedTo;\n\t\t\t\tif (savedSettings.isStretched) {\n\t\t\t\t\tthis.isStretched = true;\n\t\t\t\t\tthis.applyStretch();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Restore layout mode\n\t\t\tif (savedSettings.layoutMode) {\n\t\t\t\tthis.layoutMode = savedSettings.layoutMode;\n\t\t\t\tthis.applyLayoutMode();\n\t\t\t}\n\n\t\t\t// Restore boolean settings\n\t\t\tif (savedSettings.logToConsole !== undefined) {\n\t\t\t\tthis.logToConsole = savedSettings.logToConsole;\n\t\t\t\tif (this.logToConsoleCheckbox) {\n\t\t\t\t\tthis.logToConsoleCheckbox.checked = this.logToConsole;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (savedSettings.clearOnHide !== undefined) {\n\t\t\t\tthis.clearOnHide = savedSettings.clearOnHide;\n\t\t\t\tif (this.clearOnHideCheckbox) {\n\t\t\t\t\tthis.clearOnHideCheckbox.checked = this.clearOnHide;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (savedSettings.expandByDefault !== undefined) {\n\t\t\t\tthis.expandByDefault = savedSettings.expandByDefault;\n\t\t\t\tif (this.expandByDefaultCheckbox) {\n\t\t\t\t\tthis.expandByDefaultCheckbox.checked = this.expandByDefault;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Restore hidden objects\n\t\t\tif (savedSettings.hiddenObjects) {\n\t\t\t\tthis.hiddenObjects = new Set(savedSettings.hiddenObjects);\n\t\t\t\tthis.updateHiddenTabLabel();\n\t\t\t}\n\n\t\t\t// Restore visibility state without triggering saveSettings\n\t\t\tif (savedSettings.visible) {\n\t\t\t\tthis.container.classList.add('visible');\n\t\t\t} else {\n\t\t\t\tthis.container.classList.remove('visible');\n\t\t\t}\n\t\t} else {\n\t\t\t// Use default position if no saved settings\n\t\t\tthis.setupPosition();\n\t\t\t// Don't set visibility - let the constructor handle it\n\t\t}\n\t}\n\n\tprivate loadSettings(): DebugPanelSettings | null {\n\t\ttry {\n\t\t\tconst settingsJson = localStorage.getItem('debugPanelSettings');\n\t\t\tif (settingsJson) {\n\t\t\t\treturn JSON.parse(settingsJson);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load debug panel settings:', error);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate saveSettings(): void {\n\t\ttry {\n\t\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\t\tconst settings: DebugPanelSettings = {\n\t\t\t\tleft: parseInt(this.container.style.left) || this.container.offsetLeft,\n\t\t\t\ttop: parseInt(this.container.style.top) || this.container.offsetTop,\n\t\t\t\twidth: this.container.offsetWidth,\n\t\t\t\theight: this.container.offsetHeight,\n\t\t\t\tvisible: this.container.classList.contains('visible'),\n\t\t\t\topacity: opacity,\n\t\t\t\tsnappedTo: this.snappedTo,\n\t\t\t\tisStretched: this.isStretched,\n\t\t\t\tlayoutMode: this.layoutMode,\n\t\t\t\tlogToConsole: this.logToConsole,\n\t\t\t\tclearOnHide: this.clearOnHide,\n\t\t\t\texpandByDefault: this.expandByDefault,\n\t\t\t\thiddenObjects: Array.from(this.hiddenObjects)\n\t\t\t};\n\t\t\tlocalStorage.setItem('debugPanelSettings', JSON.stringify(settings));\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to save debug panel settings:', error);\n\t\t}\n\t}\n\n\t// Debug objects\n\n\t// Send any object to the DebugPanel for observation. Use a string id as first argument to label it.\n\tpublic debug(...args: any[]): void {\n\t\tif (args.length === 0) return;\n\n\t\t// Log to console if enabled\n\t\tif (this.logToConsole) {\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\tlet startIndex = 0;\n\t\tlet baseId: string | null = null;\n\n\t\t// Check if first argument is a string (used as ID)\n\t\tif (typeof args[0] === 'string' && args.length > 1) {\n\t\t\tbaseId = args[0];\n\t\t\tstartIndex = 1;\n\t\t}\n\n\t\t// Process each argument\n\t\tfor (let i = startIndex; i < args.length; i++) {\n\t\t\tconst value = args[i];\n\t\t\tlet id: string;\n\n\t\t\tif (baseId && args.length === 2) {\n\t\t\t\t// Single object with custom ID\n\t\t\t\tid = baseId;\n\t\t\t} else if (baseId) {\n\t\t\t\t// Multiple objects with base ID\n\t\t\t\tid = `${baseId}-${i - startIndex}`;\n\t\t\t} else {\n\t\t\t\t// Generate ID based on type\n\t\t\t\tconst typeId = this.generateTypeId(value);\n\t\t\t\tid = typeId;\n\t\t\t}\n\n\t\t\t// Handle the value\n\t\t\tif (this.debugStates[id]) {\n\t\t\t\tthis.updateDebugState(id, value);\n\t\t\t} else {\n\t\t\t\tthis.addDebugState(id, value);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate generateTypeId(value: any): string {\n\t\tconst type = Array.isArray(value) ? 'array' : typeof value;\n\n\t\t// Find next available index for this type\n\t\tlet index = 1;\n\t\twhile (this.debugStates[`${type}-${index}`]) {\n\t\t\tindex++;\n\t\t}\n\n\t\treturn `${type}-${index}`;\n\t}\n\n\tprivate updateDebugState(id: string, state: any): void {\n\t\t// Find which namespace the element currently exists in\n\t\tlet debugWrapper: HTMLElement | null = null;\n\t\tconst namespaces = [DEBUG_STATE_NAMESPACE, 'hidden'];\n\n\t\tfor (const ns of namespaces) {\n\t\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${ns}\"]`);\n\t\t\tif (content) {\n\t\t\t\tdebugWrapper = content.querySelector(`#debug-state-${id}`);\n\t\t\t\tif (debugWrapper) break;\n\t\t\t}\n\t\t}\n\n\t\tif (!debugWrapper) {\n\t\t\tconsole.error(`No debug state found for ${id}.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst jsonWrapper = debugWrapper.querySelector('.json-wrapper');\n\t\tif (!jsonWrapper) {\n\t\t\tconsole.error(`No json wrapper found for existing state ${id}`);\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the state to avoid reference issues when comparing\n\t\tconst clonedState = state ? JSON.parse(JSON.stringify(state)) : {}; // todo: handle undefined state better\n\n\t\t// Don't clear innerHTML - JsonView.updateJson needs the existing DOM to patch\n\t\tthis.debugStates[id].jsonView.updateJson(clonedState);\n\t\tthis.debugStates[id].state = clonedState;\n\t}\n\n\tprivate addDebugState(id: string, state: any): void {\n\t\t// Determine target namespace based on hidden state\n\t\tconst targetNamespace = this.hiddenObjects.has(id) ? 'hidden' : DEBUG_STATE_NAMESPACE;\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${targetNamespace}\"]`);\n\t\tif (!content) {\n\t\t\tconsole.error(`No content for ${targetNamespace} namespace.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst debugWrapper = document.createElement('div');\n\t\tdebugWrapper.classList.add('debug-state');\n\t\tdebugWrapper.setAttribute('id', `debug-state-${id}`);\n\n\t\tconst toggleObjectOpen = () => {\n\t\t\tconst isExpanded = this.debugStates[id].isExpanded;\n\t\t\tthis.debugStates[id].isExpanded = !isExpanded;\n\t\t\tdebugWrapper.classList.toggle('collapsed', isExpanded);\n\t\t\ttoggleButton.textContent = isExpanded ? COLLAPSED_INDICATOR : EXPANDED_INDICATOR;\n\t\t}\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.classList.add('debug-state-label');\n\n\t\tconst toggleButton = document.createElement('button');\n\t\ttoggleButton.classList.add('json-toggle');\n\t\ttoggleButton.textContent = EXPANDED_INDICATOR;\n\t\ttoggleButton.onclick = toggleObjectOpen;\n\t\tlabel.appendChild(toggleButton);\n\n\t\tconst labelText = document.createElement('span');\n\t\tlabelText.classList.add('debug-state-label-text');\n\t\tlabelText.innerText = id || 'untitled';\n\t\tlabelText.onclick = toggleObjectOpen;\n\t\tlabel.appendChild(labelText);\n\n\t\t// Add hover actions to label\n\t\tconst hoverActions = document.createElement('div');\n\t\thoverActions.classList.add('debug-state-hover-actions');\n\n\t\t// Copy button\n\t\tconst copyButton = document.createElement('button');\n\t\tcopyButton.classList.add('debug-state-action-button', 'debug-state-copy-button');\n\t\tcopyButton.innerHTML = '📋';\n\t\tcopyButton.title = 'Copy JSON to clipboard';\n\t\tcopyButton.onclick = (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.copyDebugStateToClipboard(id, state, copyButton);\n\t\t};\n\t\thoverActions.appendChild(copyButton);\n\n\t\t// Hide button\n\t\tconst hideButton = document.createElement('button');\n\t\thideButton.classList.add('debug-state-action-button', 'debug-state-hide-button');\n\t\thideButton.innerHTML = this.hiddenObjects.has(id) ? '👁️' : '🙈';\n\t\thideButton.title = this.hiddenObjects.has(id) ? 'Show this object' : 'Hide this object';\n\t\thideButton.onclick = (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.toggleHideDebugState(id);\n\t\t};\n\t\thoverActions.appendChild(hideButton);\n\n\t\t// Delete button\n\t\tconst deleteButton = document.createElement('button');\n\t\tdeleteButton.classList.add('debug-state-action-button', 'debug-state-delete-button');\n\t\tdeleteButton.innerHTML = '🗑️';\n\t\tdeleteButton.title = 'Delete this object';\n\t\tdeleteButton.onclick = (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.removeDebugState(id);\n\t\t};\n\t\thoverActions.appendChild(deleteButton);\n\n\t\tlabel.appendChild(hoverActions);\n\n\t\tdebugWrapper.appendChild(label);\n\n\t\tconst jsonWrapper = document.createElement('div');\n\t\tjsonWrapper.classList.add('json-wrapper');\n\t\tdebugWrapper.appendChild(jsonWrapper);\n\n\t\t// Handle primitives\n\t\tconst isPrimitive = state === null || state === undefined ||\n\t\t\ttypeof state === 'string' || typeof state === 'number' ||\n\t\t\ttypeof state === 'boolean';\n\n\t\tlet jsonView: JsonView;\n\t\tlet clonedState: any;\n\n\t\tif (isPrimitive) {\n\t\t\t// Display primitive value directly\n\t\t\tconst valueDiv = document.createElement('div');\n\t\t\tvalueDiv.style.padding = '8px';\n\t\t\tvalueDiv.style.color = '#ce9178';\n\t\t\tvalueDiv.textContent = String(state);\n\t\t\tjsonWrapper.appendChild(valueDiv);\n\n\t\t\t// Create a dummy JsonView for consistency\n\t\t\tclonedState = { value: state };\n\t\t\tjsonView = new JsonView(clonedState, document.createElement('div'), {\n\t\t\t\texpandAll: this.expandByDefault\n\t\t\t});\n\t\t} else {\n\t\t\t// Clone the state to avoid reference issues\n\t\t\tclonedState = state ? JSON.parse(JSON.stringify(state)) : {};\n\n\t\t\t// Create JsonView for objects/arrays\n\t\t\tjsonView = new JsonView(clonedState, jsonWrapper as HTMLElement, {\n\t\t\t\texpandAll: this.expandByDefault\n\t\t\t});\n\t\t}\n\n\t\tthis.debugStates[id] = {\n\t\t\tstate: clonedState,\n\t\t\tjsonView,\n\t\t\tisExpanded: true\n\t\t};\n\n\t\tcontent.appendChild(debugWrapper);\n\n\t\t// Update hidden tab label if this was added to hidden namespace\n\t\tif (targetNamespace === 'hidden') {\n\t\t\tthis.updateHiddenTabLabel();\n\t\t}\n\t}\n\n\tprivate copyDebugStateToClipboard(id: string, state: any, button: HTMLElement): void {\n\t\ttry {\n\t\t\tconst jsonString = JSON.stringify(state, null, 2);\n\t\t\tnavigator.clipboard.writeText(jsonString).then(() => {\n\t\t\t\t// Change icon to checkmark\n\t\t\t\tconst originalContent = button.innerHTML;\n\t\t\t\tbutton.innerHTML = '✓';\n\t\t\t\tbutton.style.background = 'rgba(40, 167, 69, 0.8)';\n\n\t\t\t\t// Revert after 2 seconds\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tbutton.innerHTML = originalContent;\n\t\t\t\t\tbutton.style.background = '';\n\t\t\t\t}, 2000);\n\t\t\t}).catch((err) => {\n\t\t\t\tconsole.error('Failed to copy to clipboard:', err);\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to stringify state:', error);\n\t\t}\n\t}\n\n\tprivate removeDebugState(id: string): void {\n\t\tconst debugWrapper = document.getElementById(`debug-state-${id}`);\n\t\tif (debugWrapper) {\n\t\t\tdebugWrapper.remove();\n\t\t}\n\t\tdelete this.debugStates[id];\n\t\tthis.hiddenObjects.delete(id);\n\t\tthis.updateHiddenTabLabel();\n\t\tthis.saveSettings();\n\t}\n\n\tprivate toggleHideDebugState(id: string): void {\n\t\tif (this.hiddenObjects.has(id)) {\n\t\t\tthis.hiddenObjects.delete(id);\n\t\t} else {\n\t\t\tthis.hiddenObjects.add(id);\n\t\t}\n\n\t\t// Redraw both tabs to reflect the change\n\t\tthis.redrawDebugTabs();\n\t\tthis.updateHiddenTabLabel();\n\t\tthis.saveSettings();\n\t}\n\n\tprivate redrawDebugTabs(): void {\n\t\t// Collect all debug wrappers first (before clearing)\n\t\tconst debugWrappers: { [id: string]: HTMLElement } = {};\n\t\tObject.keys(this.debugStates).forEach(id => {\n\t\t\tconst wrapper = document.getElementById(`debug-state-${id}`);\n\t\t\tif (wrapper) {\n\t\t\t\tdebugWrappers[id] = wrapper;\n\t\t\t}\n\t\t});\n\n\t\t// Clear DOM for both tabs\n\t\tconst objectsContent = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`) as HTMLElement;\n\t\tconst hiddenContent = this.contentContainer.querySelector(`[data-namespace=\"hidden\"]`) as HTMLElement;\n\n\t\tif (objectsContent) objectsContent.innerHTML = '';\n\t\tif (hiddenContent) hiddenContent.innerHTML = '';\n\n\t\t// Redraw all debug states in correct tabs based on hiddenObjects set\n\t\tObject.keys(this.debugStates).forEach(id => {\n\t\t\tconst targetNamespace = this.hiddenObjects.has(id) ? 'hidden' : DEBUG_STATE_NAMESPACE;\n\t\t\tconst targetContent = this.contentContainer.querySelector(`[data-namespace=\"${targetNamespace}\"]`);\n\t\t\tif (!targetContent) return;\n\n\t\t\tconst debugWrapper = debugWrappers[id];\n\t\t\tif (debugWrapper) {\n\t\t\t\t// Update hide button\n\t\t\t\tconst hideButton = debugWrapper.querySelector('.debug-state-hide-button') as HTMLElement;\n\t\t\t\tif (hideButton) {\n\t\t\t\t\thideButton.innerHTML = this.hiddenObjects.has(id) ? '👁️' : '🙈';\n\t\t\t\t\thideButton.title = this.hiddenObjects.has(id) ? 'Show this object' : 'Hide this object';\n\t\t\t\t}\n\n\t\t\t\ttargetContent.appendChild(debugWrapper);\n\t\t\t}\n\t\t});\n\n\t\t// Restore tab visibility after redraw\n\t\tthis.switchTab(this.activeTab);\n\t}\n\n\t// Tab controls\n\n\tprivate addTab(namespace: string): void {\n\t\tif (this.tabEntries[namespace]) return;\n\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tconst tab = document.createElement('button');\n\t\ttab.classList.add('debug-tab');\n\t\ttab.textContent = namespace;\n\t\ttab.onclick = () => this.switchTab(namespace);\n\t\tthis.tabContainer.appendChild(tab);\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('debug-tab-content');\n\t\tcontent.dataset.namespace = namespace;\n\t\tcontent.style.display = 'none'; // Start hidden\n\t\tthis.contentContainer.appendChild(content);\n\n\t\tif (Object.keys(this.tabEntries).length === 1) {\n\t\t\tthis.switchTab(namespace);\n\t\t}\n\t}\n\n\tprivate addHiddenTab(): void {\n\t\tconst namespace = 'hidden';\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tthis.hiddenTab = document.createElement('button');\n\t\tthis.hiddenTab.classList.add('debug-tab', 'debug-tab-hidden');\n\t\tthis.updateHiddenTabLabel();\n\t\tthis.hiddenTab.onclick = () => this.switchTab(namespace);\n\t\tthis.tabContainer.appendChild(this.hiddenTab);\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('debug-tab-content');\n\t\tcontent.dataset.namespace = namespace;\n\t\tcontent.style.display = 'none'; // Start hidden\n\t\tthis.contentContainer.appendChild(content);\n\t}\n\n\tprivate updateHiddenTabLabel(): void {\n\t\tif (this.hiddenTab) {\n\t\t\t// Count actual debug states that are in the hiddenObjects set\n\t\t\tconst hiddenCount = Object.keys(this.debugStates).filter(id => this.hiddenObjects.has(id)).length;\n\t\t\tthis.hiddenTab.textContent = `hidden (${hiddenCount})`;\n\t\t}\n\t}\n\n\tprivate clearCurrentTab(): void {\n\t\tthis.clearTab(this.activeTab);\n\t}\n\n\tprivate clearTab(namespace: string): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\t// Clear the data\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tif (namespace === DEBUG_STATE_NAMESPACE) {\n\t\t\t// Clear debug states\n\t\t\tObject.keys(this.debugStates).forEach((key) => {\n\t\t\t\tdelete this.debugStates[key];\n\t\t\t});\n\t\t}\n\n\t\t// Remove all children from content\n\t\tcontent.innerHTML = '';\n\t}\n\n\tprivate switchTab(namespace: string): void {\n\t\tthis.activeTab = namespace;\n\n\t\t// Update tab buttons\n\t\tthis.tabContainer.querySelectorAll('.debug-tab').forEach((tab, index) => {\n\t\t\tconst tabNamespace = Object.keys(this.tabEntries)[index];\n\t\t\ttab.classList.toggle('active', tabNamespace === namespace);\n\t\t});\n\n\t\t// Update content visibility\n\t\tthis.contentContainer.querySelectorAll('.debug-tab-content').forEach((el) => {\n\t\t\t(el as HTMLElement).style.display = 'none';\n\t\t});\n\n\t\tconst activeContent = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`) as HTMLElement;\n\t\tif (activeContent) {\n\t\t\tactiveContent.style.display = activeContent.classList.contains('layout-columns') ? 'flex' : 'block';;\n\t\t}\n\t}\n\n\t// Log controls\n\n\tpublic log(namespace: string, message: Array<any> | object | string): void {\n\t\tif (!this.tabEntries[namespace]) {\n\t\t\tthis.addTab(namespace);\n\t\t}\n\n\t\tconst logEntry: LogEntry = {\n\t\t\tid: `${namespace}-${Date.now()}-${Math.random()}`,\n\t\t\tmessage,\n\t\t\ttimestamp: new Date()\n\t\t};\n\t\tthis.tabEntries[namespace].push(logEntry);\n\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\tconst logElement = this.createLogElement(logEntry, namespace);\n\t\tcontent.appendChild(logElement);\n\n\t\t// Add to global tab if not already global\n\t\tif (namespace !== 'global') {\n\t\t\tthis.log('global', message);\n\t\t}\n\t}\n\n\tprivate createLogElement(logEntry: LogEntry, namespace: string): HTMLElement {\n\t\tconst logElement = document.createElement('div');\n\t\tlogElement.classList.add('debug-log-entry');\n\t\tlogElement.dataset.logId = logEntry.id;\n\n\t\tconst logText = document.createElement('div');\n\t\tlogText.innerText = `[${logEntry.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(logEntry.message)}`;\n\t\tlogText.classList.add('debug-log-entry-text');\n\n\t\tconst copyButton = document.createElement('button');\n\t\tcopyButton.innerText = '📋';\n\t\tcopyButton.classList.add('debug-copy-button');\n\t\tcopyButton.onclick = () => navigator.clipboard.writeText(logText.innerText);\n\n\t\tconst deleteButton = document.createElement('button');\n\t\tdeleteButton.innerText = '❌';\n\t\tdeleteButton.classList.add('debug-delete-button');\n\t\tdeleteButton.onclick = () => this.removeLogEntry(namespace, logEntry.id, logElement);\n\n\t\tlogElement.appendChild(logText);\n\t\tlogElement.appendChild(copyButton);\n\t\tlogElement.appendChild(deleteButton);\n\n\t\treturn logElement;\n\t}\n\n\tprivate removeLogEntry(namespace: string, logId: string, logElement: HTMLElement): void {\n\t\tthis.tabEntries[namespace] = this.tabEntries[namespace].filter((entry) => entry.id !== logId);\n\t\tlogElement.remove();\n\t}\n\n\tprivate renderLogEntry(message: any): string {\n\t\tif (Array.isArray(message)) {\n\t\t\treturn message.join(' ');\n\t\t}\n\t\tif (typeof message === 'object') {\n\t\t\treturn safeStringify(message);\n\t\t}\n\t\treturn String(message);\n\t}\n\n\t// Misc UI helpers\n\n\tprivate updateToolbarLayout(width: number): void {\n\t\t// Toggle narrow-panel class based on width\n\t\tif (width < MIN_WIDTH) {\n\t\t\tthis.container.classList.add('narrow-panel');\n\t\t} else {\n\t\t\tthis.container.classList.remove('narrow-panel');\n\t\t}\n\t}\n\n\tprivate handleOpacityChange(): void {\n\t\tconst opacityPercent = parseInt(this.opacitySlider.value);\n\t\tconst opacity = opacityPercent / 100;\n\n\t\t// Only set opacity when visible\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t}\n\n\t\tthis.saveSettings();\n\t}\n\n\tprivate handleDragStart(): void {\n\t\t// Disable transitions during drag\n\t\tthis.container.style.transition = 'none';\n\n\t\t// If panel is snapped and stretched, just unstretch\n\t\tif (this.snappedTo && this.isStretched) {\n\t\t\tthis.isStretched = false;\n\t\t\tthis.updateStretchButton();\n\t\t}\n\n\t\t// Clear snap state when starting to drag\n\t\tthis.snappedTo = null;\n\t}\n\n\tprivate handleResizeSnapping(): void {\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst snapPadding = this.options.snapPadding || 20;\n\t\tconst rect = this.container.getBoundingClientRect();\n\n\t\tconst left = rect.left;\n\t\tconst right = windowWidth - rect.right;\n\t\tconst top = rect.top;\n\t\tconst bottom = windowHeight - rect.bottom;\n\n\t\t// Check if edges are snapped to window edges\n\t\tconst leftSnapped = Math.abs(left) < snapPadding;\n\t\tconst rightSnapped = Math.abs(right) < snapPadding;\n\t\tconst topSnapped = Math.abs(top) < snapPadding;\n\t\tconst bottomSnapped = Math.abs(bottom) < snapPadding;\n\n\t\t// Check if panel is stretched (full width or height)\n\t\tconst isFullWidth = leftSnapped && rightSnapped;\n\t\tconst isFullHeight = topSnapped && bottomSnapped;\n\n\t\t// Update snap state based on which edges are snapped\n\t\tif (isFullWidth && isFullHeight) {\n\t\t\t// All edges snapped - fully stretched\n\t\t\tthis.snappedTo = 'topLeft';\n\t\t\tthis.isStretched = true;\n\t\t} else if (leftSnapped && topSnapped) {\n\t\t\tthis.snappedTo = 'topLeft';\n\t\t\tthis.isStretched = isFullWidth || isFullHeight;\n\t\t} else if (rightSnapped && topSnapped) {\n\t\t\tthis.snappedTo = 'topRight';\n\t\t\tthis.isStretched = isFullWidth || isFullHeight;\n\t\t} else if (leftSnapped && bottomSnapped) {\n\t\t\tthis.snappedTo = 'bottomLeft';\n\t\t\tthis.isStretched = isFullWidth || isFullHeight;\n\t\t} else if (rightSnapped && bottomSnapped) {\n\t\t\tthis.snappedTo = 'bottomRight';\n\t\t\tthis.isStretched = isFullWidth || isFullHeight;\n\t\t} else if (leftSnapped && rightSnapped) {\n\t\t\t// Stretched horizontally (full width)\n\t\t\tthis.snappedTo = 'left';\n\t\t\tthis.isStretched = true;\n\t\t} else if (topSnapped && bottomSnapped) {\n\t\t\t// Stretched vertically (full height)\n\t\t\tthis.snappedTo = 'top';\n\t\t\tthis.isStretched = true;\n\t\t} else if (leftSnapped) {\n\t\t\tthis.snappedTo = 'left';\n\t\t\tthis.isStretched = false;\n\t\t} else if (rightSnapped) {\n\t\t\tthis.snappedTo = 'right';\n\t\t\tthis.isStretched = false;\n\t\t} else if (topSnapped) {\n\t\t\tthis.snappedTo = 'top';\n\t\t\tthis.isStretched = false;\n\t\t} else if (bottomSnapped) {\n\t\t\tthis.snappedTo = 'bottom';\n\t\t\tthis.isStretched = false;\n\t\t} else {\n\t\t\tthis.snappedTo = null;\n\t\t\tthis.isStretched = false;\n\t\t}\n\n\t\tthis.updateStretchButton();\n\t}\n\n\tprivate handleDragEnd(): void {\n\t\t// Re-enable transitions after drag\n\t\tthis.container.style.transition = `left ${SNAP_ANIMATION_DURATION}ms ease-out, top ${SNAP_ANIMATION_DURATION}ms ease-out, width ${SNAP_ANIMATION_DURATION}ms ease-out, height ${SNAP_ANIMATION_DURATION}ms ease-out`;\n\t\tthis.saveSettings();\n\t}\n\n\tprivate handleSnapWhileDragging(x: number, y: number): { x: number; y: number } {\n\t\tconst snapPadding = this.options.snapPadding || 20;\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst panelWidth = this.container.offsetWidth;\n\t\tconst panelHeight = this.container.offsetHeight;\n\n\t\tlet snappedX = x;\n\t\tlet snappedY = y;\n\t\tlet newSnappedTo: 'left' | 'right' | 'top' | 'bottom' | 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight' | null = null;\n\n\t\tconst snappedLeft = x < snapPadding;\n\t\tconst snappedRight = x + panelWidth > windowWidth - snapPadding;\n\t\tconst snappedTop = y < snapPadding;\n\t\tconst snappedBottom = y + panelHeight > windowHeight - snapPadding;\n\n\t\t// Determine snap position\n\t\tif (snappedLeft && snappedTop) {\n\t\t\tsnappedX = 0;\n\t\t\tsnappedY = 0;\n\t\t\tnewSnappedTo = 'topLeft';\n\t\t} else if (snappedRight && snappedTop) {\n\t\t\tsnappedX = windowWidth - panelWidth;\n\t\t\tsnappedY = 0;\n\t\t\tnewSnappedTo = 'topRight';\n\t\t} else if (snappedLeft && snappedBottom) {\n\t\t\tsnappedX = 0;\n\t\t\tsnappedY = windowHeight - panelHeight;\n\t\t\tnewSnappedTo = 'bottomLeft';\n\t\t} else if (snappedRight && snappedBottom) {\n\t\t\tsnappedX = windowWidth - panelWidth;\n\t\t\tsnappedY = windowHeight - panelHeight;\n\t\t\tnewSnappedTo = 'bottomRight';\n\t\t} else if (snappedLeft) {\n\t\t\tsnappedX = 0;\n\t\t\tnewSnappedTo = 'left';\n\t\t} else if (snappedRight) {\n\t\t\tsnappedX = windowWidth - panelWidth;\n\t\t\tnewSnappedTo = 'right';\n\t\t} else if (snappedTop) {\n\t\t\tsnappedY = 0;\n\t\t\tnewSnappedTo = 'top';\n\t\t} else if (snappedBottom) {\n\t\t\tsnappedY = windowHeight - panelHeight;\n\t\t\tnewSnappedTo = 'bottom';\n\t\t}\n\n\t\t// Update snapped position if changed\n\t\tif (newSnappedTo !== this.snappedTo) {\n\t\t\tthis.snappedTo = newSnappedTo;\n\t\t\tthis.updateStretchButton();\n\t\t}\n\n\t\t// Return the snapped coordinates\n\t\treturn { x: snappedX, y: snappedY };\n\t}\n\n\t// Toggle Methods\n\n\tprivate toggleExpandAll(): void {\n\t\tconst allExpanded = Object.values(this.debugStates).every(state => state.isExpanded);\n\n\t\tObject.keys(this.debugStates).forEach(id => {\n\t\t\tconst debugWrapper = document.getElementById(`debug-state-${id}`);\n\t\t\tif (!debugWrapper) return;\n\n\t\t\tthis.debugStates[id].isExpanded = !allExpanded;\n\t\t\tdebugWrapper.classList.toggle('collapsed', allExpanded);\n\n\t\t\tconst toggleButton = debugWrapper.querySelector('.json-toggle') as HTMLElement;\n\t\t\tif (toggleButton) {\n\t\t\t\ttoggleButton.textContent = allExpanded ? COLLAPSED_INDICATOR : EXPANDED_INDICATOR;\n\t\t\t}\n\t\t});\n\n\t\tthis.updateCollapseAllTooltip();\n\t}\n\n\tprivate toggleStretch(): void {\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\n\t\t// If already stretched, unstretch\n\t\tif (this.isStretched) {\n\t\t\tthis.isStretched = false;\n\n\t\t\t// Get current panel dimensions to determine what was stretched\n\t\t\tconst rect = this.container.getBoundingClientRect();\n\t\t\tconst isFullWidth = Math.abs(rect.width - windowWidth) < 10;\n\t\t\tconst isFullHeight = Math.abs(rect.height - windowHeight) < 10;\n\n\t\t\t// Reduce dimensions to 50% of what was stretched and center\n\t\t\tif (isFullWidth && isFullHeight) {\n\t\t\t\t// Both dimensions stretched - reduce both to 50% and center\n\t\t\t\tthis.container.style.width = `${windowWidth * 0.5}px`;\n\t\t\t\tthis.container.style.height = `${windowHeight * 0.5}px`;\n\t\t\t\tthis.container.style.left = `${windowWidth * 0.25}px`;\n\t\t\t\tthis.container.style.top = `${windowHeight * 0.25}px`;\n\t\t\t} else if (isFullHeight) {\n\t\t\t\t// Only height stretched - reduce height to 50%\n\t\t\t\tthis.container.style.height = `${windowHeight * 0.5}px`;\n\t\t\t\tthis.container.style.top = `${windowHeight * 0.25}px`;\n\t\t\t} else if (isFullWidth) {\n\t\t\t\t// Only width stretched - reduce width to 50%\n\t\t\t\tthis.container.style.width = `${windowWidth * 0.5}px`;\n\t\t\t\tthis.container.style.left = `${windowWidth * 0.25}px`;\n\t\t\t}\n\n\t\t\t// Unsnap when unstretching\n\t\t\tthis.snappedTo = null;\n\t\t}\n\t\t// Not currently stretched - stretch it\n\t\telse {\n\t\t\tthis.isStretched = true;\n\n\t\t\t// If snapped to a side, stretch along that side's axis\n\t\t\tif (this.snappedTo) {\n\t\t\t\tthis.applyStretch();\n\t\t\t}\n\t\t\t// If not snapped, stretch based on current layout mode\n\t\t\telse {\n\t\t\t\tif (this.layoutMode === 'row') {\n\t\t\t\t\t// Row layout - stretch height (vertical)\n\t\t\t\t\tthis.container.style.height = `${windowHeight}px`;\n\t\t\t\t\tthis.container.style.top = '0px';\n\t\t\t\t} else {\n\t\t\t\t\t// Column layout - stretch width (horizontal)\n\t\t\t\t\tthis.container.style.width = `${windowWidth}px`;\n\t\t\t\t\tthis.container.style.left = '0px';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.updateStretchButton();\n\t\tthis.saveSettings();\n\t}\n\n\tprivate applyStretch(): void {\n\t\tif (!this.snappedTo) return;\n\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\n\t\tif (this.snappedTo === 'left' || this.snappedTo === 'right') {\n\t\t\t// Left/right snaps stretch vertically (height)\n\t\t\tthis.container.style.height = `${windowHeight}px`;\n\t\t\tthis.container.style.top = '0px';\n\n\t\t\tif (this.snappedTo === 'left') {\n\t\t\t\tthis.container.style.left = '0px';\n\t\t\t} else {\n\t\t\t\tconst panelWidth = this.container.offsetWidth;\n\t\t\t\tthis.container.style.left = `${windowWidth - panelWidth}px`;\n\t\t\t}\n\t\t} else if (this.snappedTo === 'top' || this.snappedTo === 'bottom') {\n\t\t\t// Top/bottom snaps stretch horizontally (width)\n\t\t\tthis.container.style.width = `${windowWidth}px`;\n\t\t\tthis.container.style.left = '0px';\n\n\t\t\tif (this.snappedTo === 'top') {\n\t\t\t\tthis.container.style.top = '0px';\n\t\t\t} else {\n\t\t\t\tconst panelHeight = this.container.offsetHeight;\n\t\t\t\tthis.container.style.top = `${windowHeight - panelHeight}px`;\n\t\t\t}\n\t\t} else if (this.snappedTo) {\n\t\t\t// Corner snaps stretch vertically (height)\n\t\t\tthis.container.style.height = `${windowHeight}px`;\n\n\t\t\tif (this.snappedTo.includes('top')) {\n\t\t\t\tthis.container.style.top = '0px';\n\t\t\t} else {\n\t\t\t\tconst panelHeight = this.container.offsetHeight;\n\t\t\t\tthis.container.style.top = `${windowHeight - panelHeight}px`;\n\t\t\t}\n\n\t\t\tif (this.snappedTo.includes('Left')) {\n\t\t\t\tthis.container.style.left = '0px';\n\t\t\t} else {\n\t\t\t\tconst panelWidth = this.container.offsetWidth;\n\t\t\t\tthis.container.style.left = `${windowWidth - panelWidth}px`;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate toggleLayoutMode(): void {\n\t\tthis.layoutMode = this.layoutMode === 'row' ? 'column' : 'row';\n\t\tthis.applyLayoutMode();\n\t\tthis.updateLayoutButtonTooltip();\n\t\tthis.saveSettings();\n\t}\n\n\tprivate applyLayoutMode(): void {\n\t\t// Apply layout class to both objects and hidden tabs\n\t\tconst objectsContent = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`) as HTMLElement;\n\t\tconst hiddenContent = this.contentContainer.querySelector(`[data-namespace=\"hidden\"]`) as HTMLElement;\n\n\t\t[objectsContent, hiddenContent].forEach(content => {\n\t\t\tif (!content) return;\n\n\t\t\tif (this.layoutMode === 'column') {\n\t\t\t\tcontent.classList.add('layout-columns');\n\t\t\t} else {\n\t\t\t\tcontent.classList.remove('layout-columns');\n\t\t\t}\n\t\t});\n\n\t\t// Update the active tab's display\n\t\tconst activeContent = this.contentContainer.querySelector(`[data-namespace=\"${this.activeTab}\"]`) as HTMLElement;\n\t\tif (activeContent) {\n\t\t\tactiveContent.style.display = activeContent.classList.contains('layout-columns') ? 'flex' : 'block';\n\t\t}\n\t}\n\n\t// Panel controls\n\n\tpublic show(): void {\n\t\tthis.container.classList.add('visible');\n\t\t// Restore the opacity setting when showing\n\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\tthis.container.style.opacity = String(opacity);\n\t\tthis.saveSettings();\n\t}\n\n\tpublic hide(): void {\n\t\tif (this.clearOnHide) {\n\t\t\tthis.clearCurrentTab();\n\t\t}\n\t\tthis.container.classList.remove('visible');\n\t\tthis.saveSettings();\n\t}\n\n\tpublic toggle(): void {\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t}\n}\n\n// Utility function to send state to debug panel\nexport function debug(idOrState: string, state?: any): void {\n\tEventBus.dispatch('debug', { id: idOrState, state });\n}","\nexport const COLLAPSED_INDICATOR = '►';\nexport const EXPANDED_INDICATOR = '▼';","import * as jsondiffpatch from 'jsondiffpatch';\nimport { COLLAPSED_INDICATOR, EXPANDED_INDICATOR } from '../constants';\n\nexport type JsonViewOptions = {\n\texpandAll?: boolean;\n\texpandObjs?: Array<string | RegExp>;\n\tuseViewState?: boolean;\n};\n\nconst DEFAULT_OPTIONS = () => ({\n\texpandAll: false,\n\texpandObjects: [],\n\tuseViewState: true\n});\n\nexport class JsonView {\n\tprivate json: any;\n\tprivate parentContainer: HTMLElement;\n\tprivate options: JsonViewOptions;\n\tprivate viewStates: { [key: string]: boolean } = {}; // viewstate tree for retaining view during state updates\n\n\tconstructor(json: any, parentContainer: HTMLElement, options?: JsonViewOptions) {\n\t\tthis.json = json;\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.options = Object.assign({}, DEFAULT_OPTIONS(), options || {});\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\t\tthis.parentContainer.innerHTML = ''; // Clear existing content\n\t\tconst rootNode = this.drawJsonNode(this.json);\n\t\tthis.parentContainer.appendChild(rootNode);\n\t}\n\n\tprivate toggleExpandNode(childNode: HTMLElement, keyPath: string, toggleButton?: HTMLElement) {\n\t\tconst isCollapsed = childNode.classList.contains('collapsed');\n\t\tchildNode.classList.toggle('collapsed', !isCollapsed);\n\t\tthis.viewStates[keyPath] = !isCollapsed;\n\t\tif (toggleButton) toggleButton.textContent = !isCollapsed ? COLLAPSED_INDICATOR : EXPANDED_INDICATOR;\n\t}\n\n\tprivate drawJsonNode(jsonObj: any, currPath: string = ''): HTMLElement {\n\t\tconst nodeContainer = document.createElement('div');\n\t\tnodeContainer.classList.add('json-node');\n\t\tconst propertiesContainer = document.createElement('div');\n\t\tpropertiesContainer.classList.add('json-properties');\n\n\t\tfor (const key in jsonObj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(jsonObj, key)) {\n\t\t\t\tconst keyPath = `${currPath}${key}`;\n\t\t\t\tconst propertyRow = document.createElement('div');\n\t\t\t\tpropertyRow.classList.add('json-property');\n\t\t\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\t\t\tconst label = document.createElement('span');\n\t\t\t\tlabel.classList.add('json-key');\n\t\t\t\tlabel.textContent = key + ': ';\n\n\t\t\t\tconst valueContainer = document.createElement('div');\n\t\t\t\tvalueContainer.classList.add('json-value');\n\n\t\t\t\tconst value = jsonObj[key];\n\t\t\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\t\t\tconst isArray = Array.isArray(value);\n\n\t\t\t\tif (isObject) {\n\t\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\t\t\telse label.textContent = key;\n\t\t\t\t\tconst hasChildren = isArray && value.length > 0 ? true : Object.keys(value).length > 0;\n\t\t\t\t\tpropertyRow.classList.add('object');\n\t\t\t\t\t// Create expandable/collapsible toggle button\n\t\t\t\t\tconst toggleButton = document.createElement('button');\n\t\t\t\t\ttoggleButton.classList.add('json-toggle');\n\n\t\t\t\t\t// Recursive call to render child object\n\t\t\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\n\t\t\t\t\tif (this.options.expandAll) {\n\t\t\t\t\t\ttoggleButton.textContent = EXPANDED_INDICATOR;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet expand = false;\n\t\t\t\t\t\t// expand empty objects by default:\n\t\t\t\t\t\tif (isArray && hasChildren) {\n\t\t\t\t\t\t\texpand = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.options.expandObjs?.forEach((e) => {\n\t\t\t\t\t\t\t\tif (new RegExp(e).test(keyPath)) expand = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if a viewstate exists use that always:\n\t\t\t\t\t\tif (this.options.useViewState) {\n\t\t\t\t\t\t\tif (typeof this.viewStates[keyPath] !== 'undefined') expand = !this.viewStates[keyPath];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (expand) {\n\t\t\t\t\t\t\ttoggleButton.textContent = EXPANDED_INDICATOR;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleButton.textContent = COLLAPSED_INDICATOR;\n\t\t\t\t\t\t\tchildNode.classList.add('collapsed'); // Start collapsed\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Toggle function for expanding/collapsing\n\t\t\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\t\t\tvalueContainer.appendChild(childNode);\n\t\t\t\t} else {\n\t\t\t\t\tvalueContainer.textContent = String(value);\n\t\t\t\t}\n\n\t\t\t\tpropertyRow.appendChild(label);\n\t\t\t\tpropertyRow.appendChild(valueContainer);\n\t\t\t\tpropertiesContainer.appendChild(propertyRow);\n\t\t\t}\n\t\t}\n\n\t\tnodeContainer.appendChild(propertiesContainer);\n\t\treturn nodeContainer;\n\t}\n\n\tpublic updateJson(newJson: any): void {\n\t\tconst delta = jsondiffpatch.diff(this.json, newJson);\n\t\tif (!delta) return; // No changes\n\n\t\t// Update only the changed DOM nodes, passing newJson so getValueAtPath can use it\n\t\tthis.patchDOM(delta, '', newJson);\n\n\t\t// Update the reference to the new JSON data\n\t\tthis.json = newJson;\n\t}\n\n\tprivate patchDOM(delta: any, currentPath: string = '', newJson?: any): void {\n\t\tconst sourceJson = newJson || this.json;\n\n\t\tfor (const key in delta) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(delta, key)) continue;\n\n\t\t\tconst change = delta[key];\n\t\t\tconst keyPath = currentPath ? `${currentPath}${key}` : key;\n\n\t\t\t// Check if this is a jsondiffpatch operation marker\n\t\t\tif (key === '_t') continue; // Array marker\n\n\t\t\t// Find the DOM node for this path\n\t\t\tconst propertyNode = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${keyPath}\"]`\n\t\t\t) as HTMLElement;\n\n\t\t\tif (Array.isArray(change)) {\n\t\t\t\t// Simple value change: [oldValue, newValue]\n\t\t\t\tif (change.length === 2) {\n\t\t\t\t\tconst newValue = this.getValueAtPath(sourceJson, keyPath);\n\t\t\t\t\tthis.updateValueNode(propertyNode, keyPath, newValue);\n\t\t\t\t}\n\t\t\t\t// Deleted value: [oldValue, 0, 0]\n\t\t\t\telse if (change.length === 3 && change[1] === 0 && change[2] === 0) {\n\t\t\t\t\tif (propertyNode) propertyNode.remove();\n\t\t\t\t}\n\t\t\t\t// New value: [newValue]\n\t\t\t\telse if (change.length === 1) {\n\t\t\t\t\tthis.addPropertyNode(keyPath, change[0]);\n\t\t\t\t}\n\t\t\t} else if (typeof change === 'object') {\n\t\t\t\t// Nested object changes - recurse\n\t\t\t\tthis.patchDOM(change, keyPath + '/', sourceJson);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getValueAtPath(obj: any, path: string): any {\n\t\tconst parts = path.split('/').filter((p) => p);\n\t\tlet current = obj;\n\t\tfor (const part of parts) {\n\t\t\tif (current === null || current === undefined) return undefined;\n\t\t\tcurrent = current[part];\n\t\t}\n\t\treturn current;\n\t}\n\n\tprivate updateValueNode(propertyNode: HTMLElement | null, keyPath: string, newValue: any): void {\n\t\tif (!propertyNode) return;\n\n\t\tconst valueContainer = propertyNode.querySelector('.json-value') as HTMLElement;\n\t\tif (!valueContainer) return;\n\n\t\tconst isObject = typeof newValue === 'object' && newValue !== null;\n\n\t\tif (isObject) {\n\t\t\t// Object/array changed - need to redraw the entire subtree\n\t\t\tconst key = keyPath.split('/').filter((p) => p).pop() || '';\n\t\t\tconst parentPath = keyPath.substring(0, keyPath.lastIndexOf(key));\n\n\t\t\t// Clear old content\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tpropertyNode.classList.add('object');\n\n\t\t\t// Redraw the node\n\t\t\tconst label = propertyNode.querySelector('.json-key') as HTMLElement;\n\t\t\tconst isArray = Array.isArray(newValue);\n\n\t\t\tif (label) {\n\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\tif (isArray) {\n\t\t\t\t\tlabel.textContent = `${key} (${newValue.length})`;\n\t\t\t\t} else {\n\t\t\t\t\tlabel.textContent = key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if toggle button already exists\n\t\t\tlet toggleButton = propertyNode.querySelector('.json-toggle') as HTMLElement;\n\t\t\tif (!toggleButton) {\n\t\t\t\ttoggleButton = document.createElement('button');\n\t\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\t\tpropertyNode.insertBefore(toggleButton, label);\n\t\t\t}\n\n\t\t\t// Recursive call to render child object\n\t\t\tconst childNode = this.drawJsonNode(newValue, keyPath + '/');\n\n\t\t\t// Preserve expand state if it exists\n\t\t\tconst wasExpanded = this.viewStates[keyPath];\n\t\t\tif (typeof wasExpanded !== 'undefined') {\n\t\t\t\tif (wasExpanded) {\n\t\t\t\t\ttoggleButton.textContent = EXPANDED_INDICATOR;\n\t\t\t\t} else {\n\t\t\t\t\ttoggleButton.textContent = COLLAPSED_INDICATOR;\n\t\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoggleButton.textContent = COLLAPSED_INDICATOR;\n\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t}\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tif (label) {\n\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t}\n\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\t// Simple value - just update text\n\t\t\tpropertyNode.classList.remove('object');\n\t\t\tconst toggleButton = propertyNode.querySelector('.json-toggle');\n\t\t\tif (toggleButton) toggleButton.remove();\n\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tvalueContainer.textContent = String(newValue);\n\t\t}\n\t}\n\n\tprivate addPropertyNode(keyPath: string, value: any): void {\n\t\tconst pathParts = keyPath.split('/').filter((p) => p);\n\t\tconst key = pathParts.pop() || '';\n\t\tconst parentPath = pathParts.join('/');\n\n\t\t// Find parent container\n\t\tlet parentContainer: HTMLElement | null;\n\t\tif (parentPath) {\n\t\t\tconst parentProperty = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${parentPath}\"]`\n\t\t\t) as HTMLElement;\n\t\t\tif (parentProperty) {\n\t\t\t\tparentContainer = parentProperty.querySelector('.json-properties') as HTMLElement;\n\t\t\t} else {\n\t\t\t\treturn; // Parent not found\n\t\t\t}\n\t\t} else {\n\t\t\tparentContainer = this.parentContainer.querySelector('.json-properties') as HTMLElement;\n\t\t}\n\n\t\tif (!parentContainer) return;\n\n\t\t// Create new property row\n\t\tconst propertyRow = document.createElement('div');\n\t\tpropertyRow.classList.add('json-property');\n\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\tconst label = document.createElement('span');\n\t\tlabel.classList.add('json-key');\n\t\tlabel.textContent = key + ': ';\n\n\t\tconst valueContainer = document.createElement('div');\n\t\tvalueContainer.classList.add('json-value');\n\n\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\tconst isArray = Array.isArray(value);\n\n\t\tif (isObject) {\n\t\t\tlabel.classList.add('clickable');\n\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\telse label.textContent = key;\n\t\t\tpropertyRow.classList.add('object');\n\n\t\t\tconst toggleButton = document.createElement('button');\n\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\ttoggleButton.textContent = COLLAPSED_INDICATOR;\n\n\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\tchildNode.classList.add('collapsed');\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\tvalueContainer.textContent = String(value);\n\t\t}\n\n\t\tpropertyRow.appendChild(label);\n\t\tpropertyRow.appendChild(valueContainer);\n\t\tparentContainer.appendChild(propertyRow);\n\t}\n}","export type ResizeOptions = {\n\thandles?: ('top' | 'left' | 'right' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right')[];\n\tmaxWidth?: number;\n\tmaxHeight?: number;\n\tminWidth?: number;\n\tminHeight?: number;\n\tsnapPadding?: number;\n\tonResizeStart?: () => void;\n\tonResize?: (width: number, height: number) => void;\n\tonResizeEnd?: () => void;\n};\n\nexport function makeResizable(container: HTMLElement, options: ResizeOptions = {}) {\n\t// Remove existing handles\n\tcontainer.querySelectorAll('.resize-handle').forEach((handle) => handle.remove());\n\n\t// Default options - now includes all sides and corners\n\tconst {\n\t\thandles = ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\tmaxWidth = Infinity,\n\t\tmaxHeight = Infinity,\n\t\tminWidth = 100,\n\t\tminHeight = 100,\n\t\tsnapPadding = 20,\n\t\tonResizeStart = () => { },\n\t\tonResize = () => { },\n\t\tonResizeEnd = () => { }\n\t} = options;\n\n\tlet resizing = false;\n\tlet resizeDirection: string | null = null;\n\tlet startX = 0,\n\t\tstartY = 0;\n\tlet startWidth = 0,\n\t\tstartHeight = 0;\n\tlet startLeft = 0,\n\t\tstartTop = 0;\n\n\tfunction createHandle(position: string) {\n\t\tconst handle = document.createElement('div');\n\t\thandle.classList.add('resize-handle', `resize-${position}`);\n\t\thandle.addEventListener('mousedown', (e) => startResizing(e, position));\n\t\tcontainer.appendChild(handle);\n\t}\n\n\tfunction startResizing(event: MouseEvent, direction: string) {\n\t\tresizing = true;\n\t\tresizeDirection = direction;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Capture initial dimensions and position\n\t\tstartWidth = container.offsetWidth;\n\t\tstartHeight = container.offsetHeight;\n\t\tstartLeft = container.offsetLeft;\n\t\tstartTop = container.offsetTop;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tonResizeStart();\n\n\t\tdocument.addEventListener('mousemove', resize);\n\t\tdocument.addEventListener('mouseup', stopResizing);\n\t}\n\n\tfunction resize(event: MouseEvent) {\n\t\tif (!resizing || !resizeDirection) return;\n\n\t\tlet newWidth = startWidth;\n\t\tlet newHeight = startHeight;\n\t\tlet newLeft = startLeft;\n\t\tlet newTop = startTop;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\tconst windowWidth = window.innerWidth || document.documentElement.clientWidth;\n\t\tconst windowHeight = window.innerHeight || document.documentElement.clientHeight;\n\n\t\t// Handle horizontal resizing\n\t\tif (resizeDirection.includes('right')) {\n\t\t\tnewWidth = Math.min(Math.max(startWidth + deltaX, minWidth), maxWidth);\n\t\t\tconst rightEdge = newLeft + newWidth;\n\n\t\t\t// Snap right edge to right side of window\n\t\t\tif (Math.abs(rightEdge - windowWidth) <= snapPadding) {\n\t\t\t\tnewWidth = windowWidth - newLeft;\n\t\t\t}\n\t\t}\n\t\tif (resizeDirection.includes('left')) {\n\t\t\tconst potentialWidth = startWidth - deltaX;\n\t\t\tconst potentialLeft = startLeft + deltaX;\n\n\t\t\tif (potentialWidth >= minWidth && potentialWidth <= maxWidth) {\n\t\t\t\tnewWidth = potentialWidth;\n\t\t\t\tnewLeft = potentialLeft;\n\n\t\t\t\t// Snap left edge to left side of window\n\t\t\t\tif (Math.abs(newLeft) <= snapPadding) {\n\t\t\t\t\tconst diff = newLeft;\n\t\t\t\t\tnewLeft = 0;\n\t\t\t\t\tnewWidth += diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Handle vertical resizing\n\t\tif (resizeDirection.includes('bottom')) {\n\t\t\tnewHeight = Math.min(Math.max(startHeight + deltaY, minHeight), maxHeight);\n\t\t\tconst bottomEdge = newTop + newHeight;\n\n\t\t\t// Snap bottom edge to bottom of window\n\t\t\tif (Math.abs(bottomEdge - windowHeight) <= snapPadding) {\n\t\t\t\tnewHeight = windowHeight - newTop;\n\t\t\t}\n\t\t}\n\t\tif (resizeDirection.includes('top')) {\n\t\t\tconst potentialHeight = startHeight - deltaY;\n\t\t\tconst potentialTop = startTop + deltaY;\n\n\t\t\tif (potentialHeight >= minHeight && potentialHeight <= maxHeight) {\n\t\t\t\tnewHeight = potentialHeight;\n\t\t\t\tnewTop = potentialTop;\n\n\t\t\t\t// Snap top edge to top of window\n\t\t\t\tif (Math.abs(newTop) <= snapPadding) {\n\t\t\t\t\tconst diff = newTop;\n\t\t\t\t\tnewTop = 0;\n\t\t\t\t\tnewHeight += diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcontainer.style.width = `${newWidth}px`;\n\t\tcontainer.style.height = `${newHeight}px`;\n\t\tcontainer.style.left = `${newLeft}px`;\n\t\tcontainer.style.top = `${newTop}px`;\n\n\t\tonResize(newWidth, newHeight);\n\t}\n\n\tfunction stopResizing() {\n\t\tif (!resizing) return;\n\n\t\tresizing = false;\n\t\tresizeDirection = null;\n\t\tdocument.removeEventListener('mousemove', resize);\n\t\tdocument.removeEventListener('mouseup', stopResizing);\n\n\t\tonResizeEnd();\n\t}\n\n\t// Add handles based on config\n\thandles.forEach((handle) => createHandle(handle));\n}\n\nexport type DragOptions = {\n\tonDragStart?: (e: MouseEvent) => void;\n\tonDrag?: (x: number, y: number) => void | { x?: number; y?: number };\n\tonDragEnd?: () => void;\n\tallowResize?: boolean; // Allow resizing when dragging away from snapped edges\n};\n\nexport function makeDraggable(\n\telement: HTMLElement,\n\thandleElement?: HTMLElement,\n\toptions: DragOptions = {}\n) {\n\tconst dragHandle = handleElement || element;\n\tlet isDragging = false;\n\tlet startX = 0;\n\tlet startY = 0;\n\tlet initialLeft = 0;\n\tlet initialTop = 0;\n\tlet initialWidth = 0;\n\tlet initialHeight = 0;\n\n\tconst { onDragStart, onDrag, onDragEnd, allowResize = false } = options;\n\n\tfunction startDragging(event: MouseEvent) {\n\t\t// Don't start dragging if clicking on buttons or interactive elements\n\t\tconst target = event.target as HTMLElement;\n\t\tif (target.tagName === 'BUTTON' || target.closest('button')) {\n\t\t\treturn;\n\t\t}\n\n\t\tisDragging = true;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Get current computed position (handles both absolute and other positioning)\n\t\tconst computedStyle = getComputedStyle(element);\n\t\tinitialLeft = parseInt(computedStyle.left) || element.offsetLeft;\n\t\tinitialTop = parseInt(computedStyle.top) || element.offsetTop;\n\t\tinitialWidth = element.offsetWidth;\n\t\tinitialHeight = element.offsetHeight;\n\n\t\t// Ensure element has position fixed or absolute for dragging\n\t\tif (computedStyle.position !== 'absolute' && computedStyle.position !== 'fixed') {\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.left = `${initialLeft}px`;\n\t\t\telement.style.top = `${initialTop}px`;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tdragHandle.style.cursor = 'grabbing';\n\n\t\tif (onDragStart) onDragStart(event);\n\n\t\tdocument.addEventListener('mousemove', drag);\n\t\tdocument.addEventListener('mouseup', stopDragging);\n\t}\n\n\tfunction drag(event: MouseEvent) {\n\t\tif (!isDragging) return;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\tlet newLeft = initialLeft + deltaX;\n\t\tlet newTop = initialTop + deltaY;\n\t\tlet newWidth = initialWidth;\n\t\tlet newHeight = initialHeight;\n\n\t\t// If allowResize, check if panel is against window edges and resize instead of move\n\t\tif (allowResize) {\n\t\t\tconst windowWidth = window.innerWidth || document.documentElement.clientWidth;\n\t\t\tconst windowHeight = window.innerHeight || document.documentElement.clientHeight;\n\n\t\t\t// Check if right edge is snapped to window right edge\n\t\t\tconst rightEdge = initialLeft + initialWidth;\n\t\t\tconst isRightSnapped = Math.abs(rightEdge - windowWidth) < 10;\n\n\t\t\t// Check if bottom edge is snapped to window bottom edge\n\t\t\tconst bottomEdge = initialTop + initialHeight;\n\t\t\tconst isBottomSnapped = Math.abs(bottomEdge - windowHeight) < 10;\n\n\t\t\t// Check if left edge is snapped to window left edge\n\t\t\tconst isLeftSnapped = Math.abs(initialLeft) < 10;\n\n\t\t\t// Check if top edge is snapped to window top edge\n\t\t\tconst isTopSnapped = Math.abs(initialTop) < 10;\n\n\t\t\t// If trying to drag right while right edge is snapped, shrink width from left\n\t\t\tif (isRightSnapped && deltaX > 0) {\n\t\t\t\tnewLeft = initialLeft + deltaX;\n\t\t\t\tnewWidth = initialWidth - deltaX;\n\t\t\t\t// Don't allow width to go below minimum\n\t\t\t\tif (newWidth < 200) {\n\t\t\t\t\tnewWidth = 200;\n\t\t\t\t\tnewLeft = initialLeft + initialWidth - 200;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If trying to drag down while bottom edge is snapped, shrink height from top\n\t\t\tif (isBottomSnapped && deltaY > 0) {\n\t\t\t\tnewTop = initialTop + deltaY;\n\t\t\t\tnewHeight = initialHeight - deltaY;\n\t\t\t\t// Don't allow height to go below minimum\n\t\t\t\tif (newHeight < 150) {\n\t\t\t\t\tnewHeight = 150;\n\t\t\t\t\tnewTop = initialTop + initialHeight - 150;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If trying to drag left while left edge is snapped, shrink width from right\n\t\t\tif (isLeftSnapped && deltaX < 0) {\n\t\t\t\tnewLeft = 0;\n\t\t\t\tnewWidth = initialWidth + deltaX;\n\t\t\t\t// Don't allow width to go below minimum\n\t\t\t\tif (newWidth < 200) {\n\t\t\t\t\tnewWidth = 200;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If trying to drag up while top edge is snapped, shrink height from bottom\n\t\t\tif (isTopSnapped && deltaY < 0) {\n\t\t\t\tnewTop = 0;\n\t\t\t\tnewHeight = initialHeight + deltaY;\n\t\t\t\t// Don't allow height to go below minimum\n\t\t\t\tif (newHeight < 150) {\n\t\t\t\t\tnewHeight = 150;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Apply new dimensions if they changed\n\t\t\tif (newWidth !== initialWidth) {\n\t\t\t\telement.style.width = `${newWidth}px`;\n\t\t\t}\n\t\t\tif (newHeight !== initialHeight) {\n\t\t\t\telement.style.height = `${newHeight}px`;\n\t\t\t}\n\t\t}\n\n\t\t// Call onDrag callback which may modify the position (e.g., for snapping)\n\t\tif (onDrag) {\n\t\t\tconst result = onDrag(newLeft, newTop);\n\t\t\t// If onDrag returns adjusted coordinates, use them\n\t\t\tif (result && typeof result === 'object') {\n\t\t\t\tif (typeof result.x === 'number') newLeft = result.x;\n\t\t\t\tif (typeof result.y === 'number') newTop = result.y;\n\t\t\t}\n\t\t}\n\n\t\telement.style.left = `${newLeft}px`;\n\t\telement.style.top = `${newTop}px`;\n\t}\n\n\tfunction stopDragging() {\n\t\tif (!isDragging) return;\n\n\t\tisDragging = false;\n\t\tdragHandle.style.cursor = 'grab';\n\n\t\tif (onDragEnd) onDragEnd();\n\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t}\n\n\t// Set up drag handle cursor\n\tdragHandle.style.cursor = 'grab';\n\tdragHandle.addEventListener('mousedown', startDragging);\n\n\t// Return cleanup function\n\treturn () => {\n\t\tdragHandle.removeEventListener('mousedown', startDragging);\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t};\n}\n\nexport function getWindowSize(): { width: number; height: number } {\n\tconst width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\tconst height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\treturn { width, height };\n}\n"],"mappings":"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","names":["css","diff","ScreenPosition"]}