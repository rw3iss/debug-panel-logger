{
  "version": 3,
  "sources": ["../node_modules/eventbusjs/lib/eventbus.min.js", "../node_modules/fast-safe-stringify/index.js", "../src/index.ts", "../src/DebugPanel/DebugPanel.scss", "../src/JsonView/JsonView.scss", "../src/DebugPanel/DebugPanel.ts", "../node_modules/jsondiffpatch/lib/clone.js", "../node_modules/jsondiffpatch/lib/assertions/arrays.js", "../node_modules/jsondiffpatch/lib/contexts/context.js", "../node_modules/jsondiffpatch/lib/contexts/diff.js", "../node_modules/jsondiffpatch/lib/contexts/patch.js", "../node_modules/jsondiffpatch/lib/contexts/reverse.js", "../node_modules/jsondiffpatch/lib/pipe.js", "../node_modules/jsondiffpatch/lib/processor.js", "../node_modules/jsondiffpatch/lib/filters/lcs.js", "../node_modules/jsondiffpatch/lib/filters/arrays.js", "../node_modules/jsondiffpatch/lib/filters/dates.js", "../node_modules/jsondiffpatch/lib/filters/nested.js", "../node_modules/jsondiffpatch/lib/filters/texts.js", "../node_modules/jsondiffpatch/lib/filters/trivial.js", "../node_modules/jsondiffpatch/lib/diffpatcher.js", "../node_modules/jsondiffpatch/lib/index.js", "../src/JsonView/JsonView.ts", "../src/utils/domUtils.ts"],
  "sourcesContent": ["(function(root,factory){if(typeof exports===\"object\"&&typeof module===\"object\")module.exports=factory();else if(typeof define===\"function\"&&define.amd)define(\"EventBus\",[],factory);else if(typeof exports===\"object\")exports[\"EventBus\"]=factory();else root[\"EventBus\"]=factory()})(this,function(){var EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(type,callback,scope){var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>3?args.splice(3,args.length-1):[];if(typeof this.listeners[type]!=\"undefined\"){this.listeners[type].push({scope:scope,callback:callback,args:args})}else{this.listeners[type]=[{scope:scope,callback:callback,args:args}]}},removeEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;var newArray=[];for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if(listener.scope==scope&&listener.callback==callback){}else{newArray.push(listener)}}this.listeners[type]=newArray}},hasEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;if(callback===undefined&&scope===undefined){return numOfCallbacks>0}for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if((scope?listener.scope==scope:true)&&listener.callback==callback){return true}}}return false},dispatch:function(type,target){var event={type:type,target:target};var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>2?args.splice(2,args.length-1):[];args=[event].concat(args);if(typeof this.listeners[type]!=\"undefined\"){var listeners=this.listeners[type].slice();var numOfCallbacks=listeners.length;for(var i=0;i<numOfCallbacks;i++){var listener=listeners[i];if(listener&&listener.callback){var concatArgs=args.concat(listener.args);listener.callback.apply(listener.scope,concatArgs)}}}},getEvents:function(){var str=\"\";for(var type in this.listeners){var numOfCallbacks=this.listeners[type].length;for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];str+=listener.scope&&listener.scope.className?listener.scope.className:\"anonymous\";str+=\" listen for '\"+type+\"'\\n\"}}return str}};var EventBus=new EventBusClass;return EventBus});", "module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar LIMIT_REPLACE_NODE = '[...]'\nvar CIRCULAR_REPLACE_NODE = '[Circular]'\n\nvar arr = []\nvar replacerStack = []\n\nfunction defaultOptions () {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  }\n}\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  decirc(obj, '', 0, [], undefined, 0, options)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction setReplace (replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, { value: replace })\n      arr.push([parent, k, val, propertyDescriptor])\n    } else {\n      replacerStack.push([val, k, replace])\n    }\n  } else {\n    parent[k] = replace\n    arr.push([parent, k, val])\n  }\n}\n\nfunction decirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, i, stack, val, depth, options)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, i, stack, val, depth, options)\n        tmp[key] = val[key]\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues (replacer) {\n  replacer =\n    typeof replacer !== 'undefined'\n      ? replacer\n      : function (k, v) {\n        return v\n      }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = part[2]\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n", "// Import styles - these will be auto-injected when the library is used\nimport './DebugPanel/DebugPanel.scss';\nimport './JsonView/JsonView.scss';\n\n// Export main classes and utilities\nexport { DebugPanel, ScreenPosition } from './DebugPanel/DebugPanel';\nexport { JsonView } from './JsonView/JsonView';\nexport { debug } from './DebugPanel/DebugPanel';\nexport { makeResizable, makeDraggable, getWindowSize } from './utils/domUtils';\n\n// Export types for TypeScript users\nexport type {\n\tDebugPanelOptions,\n\tDebugPanelSettings,\n\tResizeOptions,\n\tDragOptions\n} from './types';", "\n        const css = \".debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .2s ease-in-out,visibility .2s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#111;padding:5px;gap:5px;border-bottom:1px solid hsla(0,0%,100%,.1);cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#333;color:#ccc;padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background .2s ease-in-out}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#444;color:#fff}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:#007bff;color:#fff}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0px 15px;background:#1a1a1a}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:5px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:12px;font-weight:bold;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease-in-out,background .2s ease-in-out}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;background:rgba(85,170,255,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#28f}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;background:rgba(255,85,85,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{background:#f22}.debug-panel .debug-toolbar{display:flex;width:100%;align-items:center;justify-content:flex-end;gap:8px;padding:8px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap}.debug-panel .debug-toolbar .debug-keyboard-hint{margin-right:auto;color:#999;font-size:11px;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:5px;max-width:100px;min-width:40px;flex-shrink:1;padding:5px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;max-width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{background:#d9534f;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar{container-type:inline-size}@container (max-width: 350px){.debug-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel .debug-toolbar .debug-keyboard-hint{display:none}.debug-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}}.debug-panel.narrow-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel.narrow-panel .debug-toolbar .debug-keyboard-hint{margin-right:0;text-align:center}.debug-panel.narrow-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .2s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-state{position:relative;flex:1 0 100%;display:flex;flex-direction:column;margin-bottom:10px;margin-left:10px}.debug-state .json-toggle{position:absolute;top:2px;left:-22px;margin:0 10px 0 0;border:none;background:none;cursor:pointer;color:#888;font-size:14px;padding:0;width:20px;height:20px;transition:color .2s}.debug-state .json-toggle:hover{color:#fff}.debug-state .json-toggle:focus{outline:none}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 0;color:#ccc}.debug-state .debug-state-label:hover{color:#fff;cursor:pointer;text-decoration:underline}.debug-state .json-wrapper{padding:5px;margin-left:-15px;background:#292929;border-radius:4px;border-left:3px solid #28a745}.debug-state.collapsed .json-wrapper{display:none}\";\n        if (typeof document !== 'undefined') {\n          const style = document.createElement('style');\n          style.textContent = css;\n          document.head.appendChild(style);\n        }\n        export default css;\n      ", "\n        const css = \".json-node{position:relative;margin-left:20px;padding-left:0;font-size:12px;line-height:1.2em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:2px 0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe}.json-node .json-key.clickable{cursor:pointer}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;word-break:break-word;flex:1}.json-node .json-toggle{position:absolute;top:0px;left:-22px;border:none;background:none;cursor:pointer;color:#888;font-size:12px;padding:0;width:20px;height:20px;transition:color .2s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .collapsed .json-properties{display:none}\";\n        if (typeof document !== 'undefined') {\n          const style = document.createElement('style');\n          style.textContent = css;\n          document.head.appendChild(style);\n        }\n        export default css;\n      ", "import EventBus from 'eventbusjs';\nimport safeStringify from 'fast-safe-stringify';\nimport { JsonView } from '../JsonView/JsonView';\nimport { getWindowSize, makeResizable, makeDraggable } from '../utils/domUtils';\n\nconst DEBUG_STATE_NAMESPACE = 'objects';\n\nexport enum ScreenPosition {\n\tTopLeft = 'topLeft',\n\tTop = 'top',\n\tTopRight = 'topRight',\n\tRight = 'right',\n\tBottomRight = 'bottomRight',\n\tBottom = 'bottom',\n\tBottomLeft = 'bottomLeft',\n\tLeft = 'left'\n}\n\nconst MIN_WIDTH = 280;\n\ntype LogEntry = {\n\tid: string;\n\tmessage: Array<any> | object | string;\n\ttimestamp: Date;\n};\n\ntype LogEvent = {\n\tnamespace: string;\n\targs: Array<any>;\n};\n\ninterface TabEntries {\n\t[namespace: string]: LogEntry[];\n}\n\ninterface DebugState {\n\tstate: any;\n\tjsonView: JsonView;\n\tisExpanded: boolean;\n}\n\nexport interface DebugPanelSettings {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n\tvisible: boolean;\n\topacity: number;\n}\n\nexport interface DebugPanelOptions {\n\tshow?: boolean;\n\tposition?: ScreenPosition;\n\twidth?: number;\n\theight?: number;\n\tsnap?: boolean;\n\tsnapPadding?: number;\n}\n\n/*\nDebugPanel usage API:\n\ndebug(obj), debug(id, obj)\nlog(...args)\nshow()\nhide()\ntoggle()\n\n*/\n\nexport class DebugPanel {\n\tprivate container: HTMLElement;\n\tprivate tabContainer: HTMLElement;\n\tprivate contentContainer: HTMLElement;\n\tprivate toolbar: HTMLElement;\n\tprivate opacitySlider!: HTMLInputElement;\n\tprivate tabEntries: TabEntries = {};\n\tprivate debugStates: { [id: string]: DebugState } = {};\n\tprivate activeTab: string = 'global';\n\tprivate options: DebugPanelOptions;\n\n\tconstructor(options: DebugPanelOptions = {}) {\n\t\tthis.options = {\n\t\t\tposition: ScreenPosition.BottomRight,\n\t\t\twidth: 600,\n\t\t\theight: 400,\n\t\t\tsnap: true,\n\t\t\tsnapPadding: 20,\n\t\t\t...options\n\t\t};\n\n\t\tthis.container = this.createContainer();\n\t\tthis.tabContainer = this.createTabContainer();\n\t\tthis.contentContainer = this.createContentContainer();\n\n\t\tthis.container.appendChild(this.tabContainer);\n\t\tthis.container.appendChild(this.contentContainer);\n\n\t\tthis.toolbar = this.createGlobalToolbar();\n\t\tthis.container.appendChild(this.toolbar);\n\n\t\tdocument.body.appendChild(this.container);\n\n\t\tthis.addTab(DEBUG_STATE_NAMESPACE);\n\t\tthis.addTab('global');\n\n\t\t// Restore settings first (including visibility) before setting up interactions\n\t\tthis.restoreSettings();\n\t\tthis.setupResizable();\n\t\tthis.setupDraggable();\n\t\tthis.setupEventListeners();\n\t\tthis.setupKeyboardShortcut();\n\n\t\t// Only show if explicitly requested in options AND no saved settings exist\n\t\tif (options.show && !this.loadSettings()) {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tprivate createContainer(): HTMLElement {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.classList.add('debug-panel');\n\t\tcontainer.style.width = `${this.options.width}px`;\n\t\tcontainer.style.height = `${this.options.height}px`;\n\t\tcontainer.style.position = 'fixed';\n\t\tcontainer.style.opacity = '1'; // Set default opacity\n\t\treturn container;\n\t}\n\n\tprivate createTabContainer(): HTMLElement {\n\t\tconst tabContainer = document.createElement('div');\n\t\ttabContainer.classList.add('debug-panel-tabs');\n\t\treturn tabContainer;\n\t}\n\n\tprivate createContentContainer(): HTMLElement {\n\t\tconst contentContainer = document.createElement('div');\n\t\tcontentContainer.classList.add('debug-panel-content');\n\t\treturn contentContainer;\n\t}\n\n\tprivate createGlobalToolbar(): HTMLElement {\n\t\tconst toolbar = document.createElement('div');\n\t\ttoolbar.classList.add('debug-toolbar');\n\n\t\tconst hint = document.createElement('span');\n\t\thint.classList.add('debug-keyboard-hint');\n\t\thint.textContent = 'Ctrl+Alt+D to hide/show';\n\t\thint.style.color = '#999';\n\t\thint.style.fontSize = '11px';\n\n\t\tconst opacityContainer = document.createElement('div');\n\t\topacityContainer.classList.add('debug-opacity-container');\n\n\t\tconst opacityLabel = document.createElement('label');\n\t\topacityLabel.classList.add('debug-opacity-label');\n\t\topacityLabel.textContent = 'O';\n\t\topacityLabel.style.fontSize = '11px';\n\t\topacityLabel.style.color = '#999';\n\t\topacityLabel.style.marginRight = '5px';\n\n\t\tthis.opacitySlider = document.createElement('input');\n\t\tthis.opacitySlider.type = 'range';\n\t\tthis.opacitySlider.min = '20';\n\t\tthis.opacitySlider.max = '100';\n\t\tthis.opacitySlider.value = '100';\n\t\tthis.opacitySlider.classList.add('debug-opacity-slider');\n\t\tthis.opacitySlider.oninput = () => this.handleOpacityChange();\n\n\t\t//opacityContainer.appendChild(opacityLabel);\n\t\topacityContainer.appendChild(this.opacitySlider);\n\n\t\tconst clearButton = document.createElement('button');\n\t\tclearButton.classList.add('debug-clear-button');\n\t\tclearButton.textContent = 'Clear';\n\t\tclearButton.onclick = () => this.clearCurrentTab();\n\n\t\tconst hideButton = document.createElement('button');\n\t\thideButton.classList.add('debug-hide-button');\n\t\thideButton.textContent = 'Hide';\n\t\thideButton.onclick = () => this.hide();\n\n\t\ttoolbar.appendChild(hint);\n\t\ttoolbar.appendChild(opacityContainer);\n\t\ttoolbar.appendChild(clearButton);\n\t\ttoolbar.appendChild(hideButton);\n\n\t\treturn toolbar;\n\t}\n\n\tprivate setupEventListeners(): void {\n\t\tEventBus.addEventListener('log', (event: any) => {\n\t\t\tconst { namespace, message } = event.target;\n\t\t\tthis.log(namespace, message);\n\t\t});\n\n\t\t// special listener for sending objects to the objects panel\n\t\t// todo:\n\t\tEventBus.addEventListener('debug', (event: any) => {\n\t\t\tconst { id, state } = event.target;\n\t\t\tif (!id || !state) {\n\t\t\t\tconsole.log('Invalid event data for debug-state. Expected {id, state}, got:', event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.debug(id, state);\n\t\t});\n\t}\n\n\tprivate setupResizable(): void {\n\t\tconst { width, height } = getWindowSize();\n\n\t\tmakeResizable(this.container, {\n\t\t\thandles: ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\t\tmaxWidth: width - 20,\n\t\t\tmaxHeight: height - 20,\n\t\t\tminWidth: 200,\n\t\t\tminHeight: 150,\n\t\t\tonResize: (newWidth: number) => {\n\t\t\t\tthis.updateToolbarLayout(newWidth);\n\t\t\t\tthis.saveSettings();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setupDraggable(): void {\n\t\tif (this.options.snap) {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDrag: (x: number, y: number) => this.handleSnapWhileDragging(x, y),\n\t\t\t\tonDragEnd: () => this.saveSettings()\n\t\t\t});\n\t\t} else {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDragEnd: () => this.saveSettings()\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate setupPosition(): void {\n\t\tconst { width, height } = getWindowSize();\n\t\tconst panelWidth = this.options.width || 600;\n\t\tconst panelHeight = this.options.height || 400;\n\n\t\tlet left = 0;\n\t\tlet top = 0;\n\n\t\tswitch (this.options.position) {\n\t\t\tcase ScreenPosition.TopLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Top:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.TopRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Right:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Bottom:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Left:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.container.style.left = `${left}px`;\n\t\tthis.container.style.top = `${top}px`;\n\t}\n\n\tprivate setupKeyboardShortcut(): void {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\t// Check for Ctrl+Alt+D\n\t\t\tif (event.ctrlKey && event.altKey && event.key.toLowerCase() === 'd') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.toggle();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Settings management\n\n\tprivate restoreSettings(): void {\n\t\tconst savedSettings = this.loadSettings();\n\n\t\tif (savedSettings) {\n\t\t\t// Restore saved position and size\n\t\t\tthis.container.style.left = `${savedSettings.left}px`;\n\t\t\tthis.container.style.top = `${savedSettings.top}px`;\n\t\t\tthis.container.style.width = `${savedSettings.width}px`;\n\t\t\tthis.container.style.height = `${savedSettings.height}px`;\n\n\t\t\t// Restore opacity\n\t\t\tconst opacity = savedSettings.opacity !== undefined ? savedSettings.opacity : 1;\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t\tif (this.opacitySlider) {\n\t\t\t\tthis.opacitySlider.value = String(Math.round(opacity * 100));\n\t\t\t}\n\n\t\t\t// Restore visibility state without triggering saveSettings\n\t\t\tif (savedSettings.visible) {\n\t\t\t\tthis.container.classList.add('visible');\n\t\t\t} else {\n\t\t\t\tthis.container.classList.remove('visible');\n\t\t\t}\n\t\t} else {\n\t\t\t// Use default position if no saved settings\n\t\t\tthis.setupPosition();\n\t\t\t// Don't set visibility - let the constructor handle it\n\t\t}\n\t}\n\n\tprivate loadSettings(): DebugPanelSettings | null {\n\t\ttry {\n\t\t\tconst settingsJson = localStorage.getItem('debugPanelSettings');\n\t\t\tif (settingsJson) {\n\t\t\t\treturn JSON.parse(settingsJson);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load debug panel settings:', error);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate saveSettings(): void {\n\t\ttry {\n\t\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\t\tconst settings: DebugPanelSettings = {\n\t\t\t\tleft: parseInt(this.container.style.left) || this.container.offsetLeft,\n\t\t\t\ttop: parseInt(this.container.style.top) || this.container.offsetTop,\n\t\t\t\twidth: this.container.offsetWidth,\n\t\t\t\theight: this.container.offsetHeight,\n\t\t\t\tvisible: this.container.classList.contains('visible'),\n\t\t\t\topacity: opacity\n\t\t\t};\n\t\t\tlocalStorage.setItem('debugPanelSettings', JSON.stringify(settings));\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to save debug panel settings:', error);\n\t\t}\n\t}\n\n\t// Debug objects\n\n\t// Send any object to the DebugPanel for observation. Use a string id as first argument to label it.\n\tpublic debug(idOrState: any, state?: any): void {\n\t\t//if (typeof idOrState === 'string')\n\t\tlet _id = idOrState;\n\t\tlet _state = state;\n\t\tif (!state && typeof idOrState == 'object') {\n\t\t\t_id = 'object'; // todo: make object IDs?\n\t\t\t_state = idOrState;\n\t\t}\n\n\t\t// todo: this is not efficient, but is how to deal with circular dependencies.\n\t\t// const safeState = safeStringify(_state);\n\t\t// const parsedState = JSON.parse(safeState);\n\n\t\tif (this.debugStates[_id]) {\n\t\t\tthis.updateDebugState(_id, _state); // parsedState);\n\t\t} else {\n\t\t\tthis.addDebugState(_id, _state);// parsedState);\n\t\t}\n\t}\n\n\tprivate updateDebugState(id: string, state: any): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`);\n\t\tif (!content) {\n\t\t\tconsole.error('No content for debug namespace.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst debugWrapper: HTMLElement | null = content.querySelector(`#debug-state-${id}`);\n\t\tif (!debugWrapper) {\n\t\t\tconsole.error(`No debug state found for ${id}.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst jsonWrapper = debugWrapper.querySelector('.json-wrapper');\n\t\tif (!jsonWrapper) {\n\t\t\tconsole.error(`No json wrapper found for existing state ${id}`);\n\t\t\treturn;\n\t\t}\n\n\t\tjsonWrapper.innerHTML = '';\n\t\tthis.debugStates[id].state = state;\n\t\tthis.debugStates[id].jsonView.updateJson(state);\n\t}\n\n\tprivate addDebugState(id: string, state: any): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`);\n\t\tif (!content) {\n\t\t\tconsole.error('No content for debug namespace.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst debugWrapper = document.createElement('div');\n\t\tdebugWrapper.classList.add('debug-state');\n\t\tdebugWrapper.setAttribute('id', `debug-state-${id}`);\n\n\t\tconst toggleObjectOpen = () => {\n\t\t\tconst isExpanded = this.debugStates[id].isExpanded;\n\t\t\tthis.debugStates[id].isExpanded = !isExpanded;\n\t\t\tdebugWrapper.classList.toggle('collapsed', isExpanded);\n\t\t\ttoggleButton.textContent = isExpanded ? '[+]' : '[-]';\n\t\t}\n\n\t\tconst toggleButton = document.createElement('button');\n\t\ttoggleButton.classList.add('json-toggle');\n\t\ttoggleButton.textContent = '[-]';\n\t\ttoggleButton.onclick = toggleObjectOpen;\n\t\tdebugWrapper.appendChild(toggleButton);\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.classList.add('debug-state-label');\n\t\tlabel.innerText = id || 'untitled';\n\t\tlabel.onclick = toggleObjectOpen;\n\t\tdebugWrapper.appendChild(label);\n\n\t\tconst jsonWrapper = document.createElement('div');\n\t\tjsonWrapper.classList.add('json-wrapper');\n\t\tdebugWrapper.appendChild(jsonWrapper);\n\n\t\tconst jsonView = new JsonView(state, jsonWrapper as HTMLElement, {\n\t\t\t//expandObjs: [/children/, /children\\/(.*)/, /entry/]\n\t\t});\n\n\t\tthis.debugStates[id] = {\n\t\t\tstate,\n\t\t\tjsonView,\n\t\t\tisExpanded: true\n\t\t};\n\n\t\tcontent.appendChild(debugWrapper);\n\t}\n\n\t// Tab controls\n\n\tprivate addTab(namespace: string): void {\n\t\tif (this.tabEntries[namespace]) return;\n\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tconst tab = document.createElement('button');\n\t\ttab.classList.add('debug-tab');\n\t\ttab.textContent = namespace;\n\t\ttab.onclick = () => this.switchTab(namespace);\n\t\tthis.tabContainer.appendChild(tab);\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('debug-tab-content');\n\t\tcontent.dataset.namespace = namespace;\n\t\tthis.contentContainer.appendChild(content);\n\n\t\tif (Object.keys(this.tabEntries).length === 1) {\n\t\t\tthis.switchTab(namespace);\n\t\t}\n\t}\n\n\tprivate clearCurrentTab(): void {\n\t\tthis.clearTab(this.activeTab);\n\t}\n\n\tprivate clearTab(namespace: string): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\t// Clear the data\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tif (namespace === DEBUG_STATE_NAMESPACE) {\n\t\t\t// Clear debug states\n\t\t\tObject.keys(this.debugStates).forEach((key) => {\n\t\t\t\tdelete this.debugStates[key];\n\t\t\t});\n\t\t}\n\n\t\t// Remove all children from content\n\t\tcontent.innerHTML = '';\n\t}\n\n\tprivate switchTab(namespace: string): void {\n\t\tthis.activeTab = namespace;\n\n\t\t// Update tab buttons\n\t\tthis.tabContainer.querySelectorAll('.debug-tab').forEach((tab, index) => {\n\t\t\tconst tabNamespace = Object.keys(this.tabEntries)[index];\n\t\t\ttab.classList.toggle('active', tabNamespace === namespace);\n\t\t});\n\n\t\t// Update content visibility\n\t\tthis.contentContainer.querySelectorAll('.debug-tab-content').forEach((el) => {\n\t\t\t(el as HTMLElement).style.display = 'none';\n\t\t});\n\n\t\tconst activeContent = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`) as HTMLElement;\n\t\tif (activeContent) {\n\t\t\tactiveContent.style.display = 'block';\n\t\t}\n\t}\n\n\t// Log controls\n\n\tpublic log(namespace: string, message: Array<any> | object | string): void {\n\t\tif (!this.tabEntries[namespace]) {\n\t\t\tthis.addTab(namespace);\n\t\t}\n\n\t\tconst logEntry: LogEntry = {\n\t\t\tid: `${namespace}-${Date.now()}-${Math.random()}`,\n\t\t\tmessage,\n\t\t\ttimestamp: new Date()\n\t\t};\n\t\tthis.tabEntries[namespace].push(logEntry);\n\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\tconst logElement = this.createLogElement(logEntry, namespace);\n\t\tcontent.appendChild(logElement);\n\n\t\t// Add to global tab if not already global\n\t\tif (namespace !== 'global') {\n\t\t\tthis.log('global', message);\n\t\t}\n\t}\n\n\tprivate createLogElement(logEntry: LogEntry, namespace: string): HTMLElement {\n\t\tconst logElement = document.createElement('div');\n\t\tlogElement.classList.add('debug-log-entry');\n\t\tlogElement.dataset.logId = logEntry.id;\n\n\t\tconst logText = document.createElement('div');\n\t\tlogText.innerText = `[${logEntry.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(logEntry.message)}`;\n\t\tlogText.classList.add('debug-log-entry-text');\n\n\t\tconst copyButton = document.createElement('button');\n\t\tcopyButton.innerText = '\uD83D\uDCCB';\n\t\tcopyButton.classList.add('debug-copy-button');\n\t\tcopyButton.onclick = () => navigator.clipboard.writeText(logText.innerText);\n\n\t\tconst deleteButton = document.createElement('button');\n\t\tdeleteButton.innerText = '\u274C';\n\t\tdeleteButton.classList.add('debug-delete-button');\n\t\tdeleteButton.onclick = () => this.removeLogEntry(namespace, logEntry.id, logElement);\n\n\t\tlogElement.appendChild(logText);\n\t\tlogElement.appendChild(copyButton);\n\t\tlogElement.appendChild(deleteButton);\n\n\t\treturn logElement;\n\t}\n\n\tprivate removeLogEntry(namespace: string, logId: string, logElement: HTMLElement): void {\n\t\tthis.tabEntries[namespace] = this.tabEntries[namespace].filter((entry) => entry.id !== logId);\n\t\tlogElement.remove();\n\t}\n\n\tprivate renderLogEntry(message: any): string {\n\t\tif (Array.isArray(message)) {\n\t\t\treturn message.join(' ');\n\t\t}\n\t\tif (typeof message === 'object') {\n\t\t\treturn safeStringify(message);\n\t\t}\n\t\treturn String(message);\n\t}\n\n\t// Misc UI helpers\n\n\tprivate updateToolbarLayout(width: number): void {\n\t\t// Toggle narrow-panel class based on width\n\t\tif (width < MIN_WIDTH) {\n\t\t\tthis.container.classList.add('narrow-panel');\n\t\t} else {\n\t\t\tthis.container.classList.remove('narrow-panel');\n\t\t}\n\t}\n\n\tprivate handleOpacityChange(): void {\n\t\tconst opacityPercent = parseInt(this.opacitySlider.value);\n\t\tconst opacity = opacityPercent / 100;\n\n\t\t// Only set opacity when visible\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t}\n\n\t\tthis.saveSettings();\n\t}\n\n\tprivate handleSnapWhileDragging(x: number, y: number): { x: number; y: number } {\n\t\tconst snapPadding = this.options.snapPadding || 20;\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst panelWidth = this.container.offsetWidth;\n\t\tconst panelHeight = this.container.offsetHeight;\n\n\t\tlet snappedX = x;\n\t\tlet snappedY = y;\n\n\t\t// Snap to left edge\n\t\tif (x < snapPadding) {\n\t\t\tsnappedX = 0;\n\t\t}\n\t\t// Snap to right edge\n\t\telse if (x + panelWidth > windowWidth - snapPadding) {\n\t\t\tsnappedX = windowWidth - panelWidth;\n\t\t}\n\n\t\t// Snap to top edge\n\t\tif (y < snapPadding) {\n\t\t\tsnappedY = 0;\n\t\t}\n\t\t// Snap to bottom edge\n\t\telse if (y + panelHeight > windowHeight - snapPadding) {\n\t\t\tsnappedY = windowHeight - panelHeight;\n\t\t}\n\n\t\t// Return the snapped coordinates\n\t\treturn { x: snappedX, y: snappedY };\n\t}\n\n\t// Panel controls\n\n\tpublic show(): void {\n\t\tthis.container.classList.add('visible');\n\t\t// Restore the opacity setting when showing\n\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\tthis.container.style.opacity = String(opacity);\n\t\tthis.saveSettings();\n\t}\n\n\tpublic hide(): void {\n\t\tthis.container.classList.remove('visible');\n\t\tthis.saveSettings();\n\t}\n\n\tpublic toggle(): void {\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t}\n}\n\n// Utility function to send state to debug panel\nexport function debug(idOrState: string, state?: any): void {\n\tEventBus.dispatch('debug', { id: idOrState, state });\n} ", "function cloneRegExp(re) {\n    var _a;\n    const regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n    if (!regexMatch) {\n        throw new Error(\"Invalid RegExp\");\n    }\n    return new RegExp((_a = regexMatch[1]) !== null && _a !== void 0 ? _a : \"\", regexMatch[2]);\n}\nexport default function clone(arg) {\n    if (typeof arg !== \"object\") {\n        return arg;\n    }\n    if (arg === null) {\n        return null;\n    }\n    if (Array.isArray(arg)) {\n        return arg.map(clone);\n    }\n    if (arg instanceof Date) {\n        return new Date(arg.getTime());\n    }\n    if (arg instanceof RegExp) {\n        return cloneRegExp(arg);\n    }\n    const cloned = {};\n    for (const name in arg) {\n        if (Object.prototype.hasOwnProperty.call(arg, name)) {\n            cloned[name] = clone(arg[name]);\n        }\n    }\n    return cloned;\n}\n", "export function assertNonEmptyArray(arr, message) {\n    if (arr.length === 0) {\n        throw new Error(message || \"Expected a non-empty array\");\n    }\n}\nexport function assertArrayHasExactly2(arr, message) {\n    if (arr.length !== 2) {\n        throw new Error(message || \"Expected an array with exactly 2 items\");\n    }\n}\nexport function assertArrayHasExactly1(arr, message) {\n    if (arr.length !== 1) {\n        throw new Error(message || \"Expected an array with exactly 1 item\");\n    }\n}\nexport function assertArrayHasAtLeast2(arr, message) {\n    if (arr.length < 2) {\n        throw new Error(message || \"Expected an array with at least 2 items\");\n    }\n}\nexport function isNonEmptyArray(arr) {\n    return arr.length > 0;\n}\nexport function isArrayWithAtLeast2(arr) {\n    return arr.length >= 2;\n}\nexport function isArrayWithAtLeast3(arr) {\n    return arr.length >= 3;\n}\nexport function isArrayWithExactly1(arr) {\n    return arr.length === 1;\n}\nexport function isArrayWithExactly2(arr) {\n    return arr.length === 2;\n}\nexport function isArrayWithExactly3(arr) {\n    return arr.length === 3;\n}\n/**\n * type-safe version of `arr[arr.length - 1]`\n * @param arr a non empty array\n * @returns the last element of the array\n */\nexport const lastNonEmpty = (arr) => arr[arr.length - 1];\n", "import { assertNonEmptyArray, lastNonEmpty } from \"../assertions/arrays.js\";\nexport default class Context {\n    setResult(result) {\n        this.result = result;\n        this.hasResult = true;\n        return this;\n    }\n    exit() {\n        this.exiting = true;\n        return this;\n    }\n    push(child, name) {\n        child.parent = this;\n        if (typeof name !== \"undefined\") {\n            child.childName = name;\n        }\n        child.root = this.root || this;\n        child.options = child.options || this.options;\n        if (!this.children) {\n            this.children = [child];\n            this.nextAfterChildren = this.next || null;\n            this.next = child;\n        }\n        else {\n            assertNonEmptyArray(this.children);\n            lastNonEmpty(this.children).next = child;\n            this.children.push(child);\n        }\n        child.next = this;\n        return this;\n    }\n}\n", "import defaultClone from \"../clone.js\";\nimport Context from \"./context.js\";\nclass DiffContext extends Context {\n    constructor(left, right) {\n        super();\n        this.left = left;\n        this.right = right;\n        this.pipe = \"diff\";\n    }\n    prepareDeltaResult(result) {\n        var _a, _b, _c, _d;\n        if (typeof result === \"object\") {\n            if (((_a = this.options) === null || _a === void 0 ? void 0 : _a.omitRemovedValues) &&\n                Array.isArray(result) &&\n                result.length > 1 &&\n                (result.length === 2 || // modified\n                    result[2] === 0 || // deleted\n                    result[2] === 3) // moved\n            ) {\n                // omit the left/old value (this delta will be more compact but irreversible)\n                result[0] = 0;\n            }\n            if ((_b = this.options) === null || _b === void 0 ? void 0 : _b.cloneDiffValues) {\n                const clone = typeof ((_c = this.options) === null || _c === void 0 ? void 0 : _c.cloneDiffValues) === \"function\"\n                    ? (_d = this.options) === null || _d === void 0 ? void 0 : _d.cloneDiffValues\n                    : defaultClone;\n                if (typeof result[0] === \"object\") {\n                    result[0] = clone(result[0]);\n                }\n                if (typeof result[1] === \"object\") {\n                    result[1] = clone(result[1]);\n                }\n            }\n        }\n        return result;\n    }\n    setResult(result) {\n        this.prepareDeltaResult(result);\n        return super.setResult(result);\n    }\n}\nexport default DiffContext;\n", "import Context from \"./context.js\";\nclass PatchContext extends Context {\n    constructor(left, delta) {\n        super();\n        this.left = left;\n        this.delta = delta;\n        this.pipe = \"patch\";\n    }\n}\nexport default PatchContext;\n", "import Context from \"./context.js\";\nclass ReverseContext extends Context {\n    constructor(delta) {\n        super();\n        this.delta = delta;\n        this.pipe = \"reverse\";\n    }\n}\nexport default ReverseContext;\n", "// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass Pipe {\n    constructor(name) {\n        this.name = name;\n        this.filters = [];\n    }\n    process(input) {\n        if (!this.processor) {\n            throw new Error(\"add this pipe to a processor before using it\");\n        }\n        const debug = this.debug;\n        const length = this.filters.length;\n        const context = input;\n        for (let index = 0; index < length; index++) {\n            const filter = this.filters[index];\n            if (!filter)\n                continue;\n            if (debug) {\n                this.log(`filter: ${filter.filterName}`);\n            }\n            filter(context);\n            if (typeof context === \"object\" && context.exiting) {\n                context.exiting = false;\n                break;\n            }\n        }\n        if (!context.next && this.resultCheck) {\n            this.resultCheck(context);\n        }\n    }\n    log(msg) {\n        console.log(`[jsondiffpatch] ${this.name} pipe, ${msg}`);\n    }\n    append(...args) {\n        this.filters.push(...args);\n        return this;\n    }\n    prepend(...args) {\n        this.filters.unshift(...args);\n        return this;\n    }\n    indexOf(filterName) {\n        if (!filterName) {\n            throw new Error(\"a filter name is required\");\n        }\n        for (let index = 0; index < this.filters.length; index++) {\n            const filter = this.filters[index];\n            if ((filter === null || filter === void 0 ? void 0 : filter.filterName) === filterName) {\n                return index;\n            }\n        }\n        throw new Error(`filter not found: ${filterName}`);\n    }\n    list() {\n        return this.filters.map((f) => f.filterName);\n    }\n    after(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index + 1, 0, ...params);\n        return this;\n    }\n    before(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 0, ...params);\n        return this;\n    }\n    replace(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 1, ...params);\n        return this;\n    }\n    remove(filterName) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 1);\n        return this;\n    }\n    clear() {\n        this.filters.length = 0;\n        return this;\n    }\n    shouldHaveResult(should) {\n        if (should === false) {\n            this.resultCheck = null;\n            return this;\n        }\n        if (this.resultCheck) {\n            return this;\n        }\n        this.resultCheck = (context) => {\n            if (!context.hasResult) {\n                console.log(context);\n                const error = new Error(`${this.name} failed`);\n                error.noResult = true;\n                throw error;\n            }\n        };\n        return this;\n    }\n}\nexport default Pipe;\n", "class Processor {\n    constructor(options) {\n        this.selfOptions = options || {};\n        this.pipes = {};\n    }\n    options(options) {\n        if (options) {\n            this.selfOptions = options;\n        }\n        return this.selfOptions;\n    }\n    pipe(name, pipeArg) {\n        let pipe = pipeArg;\n        if (typeof name === \"string\") {\n            if (typeof pipe === \"undefined\") {\n                return this.pipes[name];\n            }\n            this.pipes[name] = pipe;\n        }\n        if (name && name.name) {\n            pipe = name;\n            if (pipe.processor === this) {\n                return pipe;\n            }\n            this.pipes[pipe.name] = pipe;\n        }\n        if (!pipe) {\n            throw new Error(`pipe is not defined: ${name}`);\n        }\n        pipe.processor = this;\n        return pipe;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    process(input, pipe) {\n        let context = input;\n        context.options = this.options();\n        let nextPipe = pipe || input.pipe || \"default\";\n        let lastPipe = undefined;\n        while (nextPipe) {\n            if (typeof context.nextAfterChildren !== \"undefined\") {\n                // children processed and coming back to parent\n                context.next = context.nextAfterChildren;\n                context.nextAfterChildren = null;\n            }\n            if (typeof nextPipe === \"string\") {\n                nextPipe = this.pipe(nextPipe);\n            }\n            nextPipe.process(context);\n            lastPipe = nextPipe;\n            nextPipe = null;\n            if (context) {\n                if (context.next) {\n                    context = context.next;\n                    nextPipe = context.pipe || lastPipe;\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return context.hasResult ? context.result : undefined;\n    }\n}\nexport default Processor;\n", "/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\nconst defaultMatch = (array1, array2, index1, index2) => array1[index1] === array2[index2];\nconst lengthMatrix = (array1, array2, match, context) => {\n    var _a, _b, _c;\n    const len1 = array1.length;\n    const len2 = array2.length;\n    let x;\n    let y;\n    // initialize empty matrix of len1+1 x len2+1\n    const matrix = new Array(len1 + 1);\n    for (x = 0; x < len1 + 1; x++) {\n        const matrixNewRow = new Array(len2 + 1);\n        for (y = 0; y < len2 + 1; y++) {\n            matrixNewRow[y] = 0;\n        }\n        matrix[x] = matrixNewRow;\n    }\n    matrix.match = match;\n    // save sequence lengths for each coordinate\n    for (x = 1; x < len1 + 1; x++) {\n        const matrixRowX = matrix[x];\n        if (matrixRowX === undefined) {\n            throw new Error(\"LCS matrix row is undefined\");\n        }\n        const matrixRowBeforeX = matrix[x - 1];\n        if (matrixRowBeforeX === undefined) {\n            throw new Error(\"LCS matrix row is undefined\");\n        }\n        for (y = 1; y < len2 + 1; y++) {\n            if (match(array1, array2, x - 1, y - 1, context)) {\n                matrixRowX[y] = ((_a = matrixRowBeforeX[y - 1]) !== null && _a !== void 0 ? _a : 0) + 1;\n            }\n            else {\n                matrixRowX[y] = Math.max((_b = matrixRowBeforeX[y]) !== null && _b !== void 0 ? _b : 0, (_c = matrixRowX[y - 1]) !== null && _c !== void 0 ? _c : 0);\n            }\n        }\n    }\n    return matrix;\n};\nconst backtrack = (matrix, array1, array2, context) => {\n    let index1 = array1.length;\n    let index2 = array2.length;\n    const subsequence = {\n        sequence: [],\n        indices1: [],\n        indices2: [],\n    };\n    while (index1 !== 0 && index2 !== 0) {\n        if (matrix.match === undefined) {\n            throw new Error(\"LCS matrix match function is undefined\");\n        }\n        const sameLetter = matrix.match(array1, array2, index1 - 1, index2 - 1, context);\n        if (sameLetter) {\n            subsequence.sequence.unshift(array1[index1 - 1]);\n            subsequence.indices1.unshift(index1 - 1);\n            subsequence.indices2.unshift(index2 - 1);\n            --index1;\n            --index2;\n        }\n        else {\n            const matrixRowIndex1 = matrix[index1];\n            if (matrixRowIndex1 === undefined) {\n                throw new Error(\"LCS matrix row is undefined\");\n            }\n            const valueAtMatrixAbove = matrixRowIndex1[index2 - 1];\n            if (valueAtMatrixAbove === undefined) {\n                throw new Error(\"LCS matrix value is undefined\");\n            }\n            const matrixRowBeforeIndex1 = matrix[index1 - 1];\n            if (matrixRowBeforeIndex1 === undefined) {\n                throw new Error(\"LCS matrix row is undefined\");\n            }\n            const valueAtMatrixLeft = matrixRowBeforeIndex1[index2];\n            if (valueAtMatrixLeft === undefined) {\n                throw new Error(\"LCS matrix value is undefined\");\n            }\n            if (valueAtMatrixAbove > valueAtMatrixLeft) {\n                --index2;\n            }\n            else {\n                --index1;\n            }\n        }\n    }\n    return subsequence;\n};\nconst get = (array1, array2, match, context) => {\n    const innerContext = context || {};\n    const matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n    return backtrack(matrix, array1, array2, innerContext);\n};\nexport default {\n    get,\n};\n", "import DiffContext from \"../contexts/diff.js\";\nimport PatchContext from \"../contexts/patch.js\";\nimport ReverseContext from \"../contexts/reverse.js\";\nimport lcs from \"./lcs.js\";\nconst ARRAY_MOVE = 3;\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n    for (let index1 = 0; index1 < len1; index1++) {\n        const val1 = array1[index1];\n        for (let index2 = 0; index2 < len2; index2++) {\n            const val2 = array2[index2];\n            if (index1 !== index2 && val1 === val2) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction matchItems(array1, array2, index1, index2, context) {\n    const value1 = array1[index1];\n    const value2 = array2[index2];\n    if (value1 === value2) {\n        return true;\n    }\n    if (typeof value1 !== \"object\" || typeof value2 !== \"object\") {\n        return false;\n    }\n    const objectHash = context.objectHash;\n    if (!objectHash) {\n        // no way to match objects was provided, try match by position\n        return context.matchByPosition && index1 === index2;\n    }\n    context.hashCache1 = context.hashCache1 || [];\n    let hash1 = context.hashCache1[index1];\n    if (typeof hash1 === \"undefined\") {\n        context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n    if (typeof hash1 === \"undefined\") {\n        return false;\n    }\n    context.hashCache2 = context.hashCache2 || [];\n    let hash2 = context.hashCache2[index2];\n    if (typeof hash2 === \"undefined\") {\n        context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n    if (typeof hash2 === \"undefined\") {\n        return false;\n    }\n    return hash1 === hash2;\n}\nexport const diffFilter = function arraysDiffFilter(context) {\n    var _a, _b, _c, _d, _e;\n    if (!context.leftIsArray) {\n        return;\n    }\n    const matchContext = {\n        objectHash: (_a = context.options) === null || _a === void 0 ? void 0 : _a.objectHash,\n        matchByPosition: (_b = context.options) === null || _b === void 0 ? void 0 : _b.matchByPosition,\n    };\n    let commonHead = 0;\n    let commonTail = 0;\n    let index;\n    let index1;\n    let index2;\n    const array1 = context.left;\n    const array2 = context.right;\n    const len1 = array1.length;\n    const len2 = array2.length;\n    let child;\n    if (len1 > 0 &&\n        len2 > 0 &&\n        !matchContext.objectHash &&\n        typeof matchContext.matchByPosition !== \"boolean\") {\n        matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n    }\n    // separate common head\n    while (commonHead < len1 &&\n        commonHead < len2 &&\n        matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n        index = commonHead;\n        child = new DiffContext(array1[index], array2[index]);\n        context.push(child, index);\n        commonHead++;\n    }\n    // separate common tail\n    while (commonTail + commonHead < len1 &&\n        commonTail + commonHead < len2 &&\n        matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n        index1 = len1 - 1 - commonTail;\n        index2 = len2 - 1 - commonTail;\n        child = new DiffContext(array1[index1], array2[index2]);\n        context.push(child, index2);\n        commonTail++;\n    }\n    let result;\n    if (commonHead + commonTail === len1) {\n        if (len1 === len2) {\n            // arrays are identical\n            context.setResult(undefined).exit();\n            return;\n        }\n        // trivial case, a block (1 or more consecutive items) was added\n        result = result || {\n            _t: \"a\",\n        };\n        for (index = commonHead; index < len2 - commonTail; index++) {\n            result[index] = [array2[index]];\n            context.prepareDeltaResult(result[index]);\n        }\n        context.setResult(result).exit();\n        return;\n    }\n    if (commonHead + commonTail === len2) {\n        // trivial case, a block (1 or more consecutive items) was removed\n        result = result || {\n            _t: \"a\",\n        };\n        for (index = commonHead; index < len1 - commonTail; index++) {\n            const key = `_${index}`;\n            result[key] = [array1[index], 0, 0];\n            context.prepareDeltaResult(result[key]);\n        }\n        context.setResult(result).exit();\n        return;\n    }\n    // reset hash cache\n    matchContext.hashCache1 = undefined;\n    matchContext.hashCache2 = undefined;\n    // diff is not trivial, find the LCS (Longest Common Subsequence)\n    const trimmed1 = array1.slice(commonHead, len1 - commonTail);\n    const trimmed2 = array2.slice(commonHead, len2 - commonTail);\n    const seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n    const removedItems = [];\n    result = result || {\n        _t: \"a\",\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n        if (seq.indices1.indexOf(index - commonHead) < 0) {\n            // removed\n            const key = `_${index}`;\n            result[key] = [array1[index], 0, 0];\n            context.prepareDeltaResult(result[key]);\n            removedItems.push(index);\n        }\n    }\n    let detectMove = true;\n    if (((_c = context.options) === null || _c === void 0 ? void 0 : _c.arrays) && context.options.arrays.detectMove === false) {\n        detectMove = false;\n    }\n    let includeValueOnMove = false;\n    if ((_e = (_d = context.options) === null || _d === void 0 ? void 0 : _d.arrays) === null || _e === void 0 ? void 0 : _e.includeValueOnMove) {\n        includeValueOnMove = true;\n    }\n    const removedItemsLength = removedItems.length;\n    for (index = commonHead; index < len2 - commonTail; index++) {\n        const indexOnArray2 = seq.indices2.indexOf(index - commonHead);\n        if (indexOnArray2 < 0) {\n            // added, try to match with a removed item and register as position move\n            let isMove = false;\n            if (detectMove && removedItemsLength > 0) {\n                for (let removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n                    index1 = removedItems[removeItemIndex1];\n                    const resultItem = index1 === undefined ? undefined : result[`_${index1}`];\n                    if (index1 !== undefined &&\n                        resultItem &&\n                        matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n                        // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n                        resultItem.splice(1, 2, index, ARRAY_MOVE);\n                        resultItem.splice(1, 2, index, ARRAY_MOVE);\n                        if (!includeValueOnMove) {\n                            // don't include moved value on diff, to save bytes\n                            resultItem[0] = \"\";\n                        }\n                        index2 = index;\n                        child = new DiffContext(array1[index1], array2[index2]);\n                        context.push(child, index2);\n                        removedItems.splice(removeItemIndex1, 1);\n                        isMove = true;\n                        break;\n                    }\n                }\n            }\n            if (!isMove) {\n                // added\n                result[index] = [array2[index]];\n                context.prepareDeltaResult(result[index]);\n            }\n        }\n        else {\n            // match, do inner diff\n            if (seq.indices1[indexOnArray2] === undefined) {\n                throw new Error(`Invalid indexOnArray2: ${indexOnArray2}, seq.indices1: ${seq.indices1}`);\n            }\n            index1 = seq.indices1[indexOnArray2] + commonHead;\n            if (seq.indices2[indexOnArray2] === undefined) {\n                throw new Error(`Invalid indexOnArray2: ${indexOnArray2}, seq.indices2: ${seq.indices2}`);\n            }\n            index2 = seq.indices2[indexOnArray2] + commonHead;\n            child = new DiffContext(array1[index1], array2[index2]);\n            context.push(child, index2);\n        }\n    }\n    context.setResult(result).exit();\n};\ndiffFilter.filterName = \"arrays\";\nconst compare = {\n    numerically(a, b) {\n        return a - b;\n    },\n    numericallyBy(name) {\n        return (a, b) => a[name] - b[name];\n    },\n};\nexport const patchFilter = function nestedPatchFilter(context) {\n    var _a;\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t !== \"a\") {\n        return;\n    }\n    let index;\n    let index1;\n    const delta = nestedDelta;\n    const array = context.left;\n    // first, separate removals, insertions and modifications\n    let toRemove = [];\n    let toInsert = [];\n    const toModify = [];\n    for (index in delta) {\n        if (index !== \"_t\") {\n            if (index[0] === \"_\") {\n                const removedOrMovedIndex = index;\n                // removed item from original array\n                if (delta[removedOrMovedIndex] !== undefined &&\n                    (delta[removedOrMovedIndex][2] === 0 ||\n                        delta[removedOrMovedIndex][2] === ARRAY_MOVE)) {\n                    toRemove.push(Number.parseInt(index.slice(1), 10));\n                }\n                else {\n                    throw new Error(`only removal or move can be applied at original array indices, invalid diff type: ${(_a = delta[removedOrMovedIndex]) === null || _a === void 0 ? void 0 : _a[2]}`);\n                }\n            }\n            else {\n                const numberIndex = index;\n                if (delta[numberIndex].length === 1) {\n                    // added item at new array\n                    toInsert.push({\n                        index: Number.parseInt(numberIndex, 10),\n                        value: delta[numberIndex][0],\n                    });\n                }\n                else {\n                    // modified item at new array\n                    toModify.push({\n                        index: Number.parseInt(numberIndex, 10),\n                        delta: delta[numberIndex],\n                    });\n                }\n            }\n        }\n    }\n    // remove items, in reverse order to avoid sawing our own floor\n    toRemove = toRemove.sort(compare.numerically);\n    for (index = toRemove.length - 1; index >= 0; index--) {\n        index1 = toRemove[index];\n        if (index1 === undefined)\n            continue;\n        const indexDiff = delta[`_${index1}`];\n        const removedValue = array.splice(index1, 1)[0];\n        if ((indexDiff === null || indexDiff === void 0 ? void 0 : indexDiff[2]) === ARRAY_MOVE) {\n            // reinsert later\n            toInsert.push({\n                index: indexDiff[1],\n                value: removedValue,\n            });\n        }\n    }\n    // insert items, in reverse order to avoid moving our own floor\n    toInsert = toInsert.sort(compare.numericallyBy(\"index\"));\n    const toInsertLength = toInsert.length;\n    for (index = 0; index < toInsertLength; index++) {\n        const insertion = toInsert[index];\n        if (insertion === undefined)\n            continue;\n        array.splice(insertion.index, 0, insertion.value);\n    }\n    // apply modifications\n    const toModifyLength = toModify.length;\n    if (toModifyLength > 0) {\n        for (index = 0; index < toModifyLength; index++) {\n            const modification = toModify[index];\n            if (modification === undefined)\n                continue;\n            const child = new PatchContext(array[modification.index], modification.delta);\n            context.push(child, modification.index);\n        }\n    }\n    if (!context.children) {\n        context.setResult(array).exit();\n        return;\n    }\n    context.exit();\n};\npatchFilter.filterName = \"arrays\";\nexport const collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t !== \"a\") {\n        return;\n    }\n    const array = context.left;\n    const length = context.children.length;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const arrayIndex = child.childName;\n        array[arrayIndex] = child.result;\n    }\n    context.setResult(array).exit();\n};\ncollectChildrenPatchFilter.filterName = \"arraysCollectChildren\";\nexport const reverseFilter = function arraysReverseFilter(context) {\n    if (!context.nested) {\n        const nonNestedDelta = context.delta;\n        if (nonNestedDelta[2] === ARRAY_MOVE) {\n            const arrayMoveDelta = nonNestedDelta;\n            context.newName = `_${arrayMoveDelta[1]}`;\n            context\n                .setResult([\n                arrayMoveDelta[0],\n                Number.parseInt(context.childName.substring(1), 10),\n                ARRAY_MOVE,\n            ])\n                .exit();\n        }\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t !== \"a\") {\n        return;\n    }\n    const arrayDelta = nestedDelta;\n    for (const name in arrayDelta) {\n        if (name === \"_t\") {\n            continue;\n        }\n        const child = new ReverseContext(arrayDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\nreverseFilter.filterName = \"arrays\";\nconst reverseArrayDeltaIndex = (delta, index, itemDelta) => {\n    if (typeof index === \"string\" && index[0] === \"_\") {\n        return Number.parseInt(index.substring(1), 10);\n    }\n    if (Array.isArray(itemDelta) && itemDelta[2] === 0) {\n        return `_${index}`;\n    }\n    let reverseIndex = +index;\n    for (const deltaIndex in delta) {\n        const deltaItem = delta[deltaIndex];\n        if (Array.isArray(deltaItem)) {\n            if (deltaItem[2] === ARRAY_MOVE) {\n                const moveFromIndex = Number.parseInt(deltaIndex.substring(1), 10);\n                const moveToIndex = deltaItem[1];\n                if (moveToIndex === +index) {\n                    return moveFromIndex;\n                }\n                if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n                    reverseIndex++;\n                }\n                else if (moveFromIndex >= reverseIndex &&\n                    moveToIndex < reverseIndex) {\n                    reverseIndex--;\n                }\n            }\n            else if (deltaItem[2] === 0) {\n                const deleteIndex = Number.parseInt(deltaIndex.substring(1), 10);\n                if (deleteIndex <= reverseIndex) {\n                    reverseIndex++;\n                }\n            }\n            else if (deltaItem.length === 1 &&\n                Number.parseInt(deltaIndex, 10) <= reverseIndex) {\n                reverseIndex--;\n            }\n        }\n    }\n    return reverseIndex;\n};\nexport const collectChildrenReverseFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t !== \"a\") {\n        return;\n    }\n    const arrayDelta = deltaWithChildren;\n    const length = context.children.length;\n    const delta = {\n        _t: \"a\",\n    };\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        let name = child.newName;\n        if (typeof name === \"undefined\") {\n            if (child.childName === undefined) {\n                throw new Error(\"child.childName is undefined\");\n            }\n            name = reverseArrayDeltaIndex(arrayDelta, child.childName, child.result);\n        }\n        if (delta[name] !== child.result) {\n            // There's no way to type this well.\n            delta[name] = child.result;\n        }\n    }\n    context.setResult(delta).exit();\n};\ncollectChildrenReverseFilter.filterName = \"arraysCollectChildren\";\n", "export const diffFilter = function datesDiffFilter(context) {\n    if (context.left instanceof Date) {\n        if (context.right instanceof Date) {\n            if (context.left.getTime() !== context.right.getTime()) {\n                context.setResult([context.left, context.right]);\n            }\n            else {\n                context.setResult(undefined);\n            }\n        }\n        else {\n            context.setResult([context.left, context.right]);\n        }\n        context.exit();\n    }\n    else if (context.right instanceof Date) {\n        context.setResult([context.left, context.right]).exit();\n    }\n};\ndiffFilter.filterName = \"dates\";\n", "import DiffContext from \"../contexts/diff.js\";\nimport PatchContext from \"../contexts/patch.js\";\nimport ReverseContext from \"../contexts/reverse.js\";\nexport const collectChildrenDiffFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const length = context.children.length;\n    let result = context.result;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        if (typeof child.result === \"undefined\") {\n            continue;\n        }\n        result = result || {};\n        if (child.childName === undefined) {\n            throw new Error(\"diff child.childName is undefined\");\n        }\n        result[child.childName] = child.result;\n    }\n    if (result && context.leftIsArray) {\n        result._t = \"a\";\n    }\n    context.setResult(result).exit();\n};\ncollectChildrenDiffFilter.filterName = \"collectChildren\";\nexport const objectsDiffFilter = (context) => {\n    var _a;\n    if (context.leftIsArray || context.leftType !== \"object\") {\n        return;\n    }\n    const left = context.left;\n    const right = context.right;\n    const propertyFilter = (_a = context.options) === null || _a === void 0 ? void 0 : _a.propertyFilter;\n    for (const name in left) {\n        if (!Object.prototype.hasOwnProperty.call(left, name)) {\n            continue;\n        }\n        if (propertyFilter && !propertyFilter(name, context)) {\n            continue;\n        }\n        const child = new DiffContext(left[name], right[name]);\n        context.push(child, name);\n    }\n    for (const name in right) {\n        if (!Object.prototype.hasOwnProperty.call(right, name)) {\n            continue;\n        }\n        if (propertyFilter && !propertyFilter(name, context)) {\n            continue;\n        }\n        if (typeof left[name] === \"undefined\") {\n            const child = new DiffContext(undefined, right[name]);\n            context.push(child, name);\n        }\n    }\n    if (!context.children || context.children.length === 0) {\n        context.setResult(undefined).exit();\n        return;\n    }\n    context.exit();\n};\nobjectsDiffFilter.filterName = \"objects\";\nexport const patchFilter = function nestedPatchFilter(context) {\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t) {\n        return;\n    }\n    const objectDelta = nestedDelta;\n    for (const name in objectDelta) {\n        const child = new PatchContext(context.left[name], objectDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\npatchFilter.filterName = \"objects\";\nexport const collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t) {\n        return;\n    }\n    const object = context.left;\n    const length = context.children.length;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const property = child.childName;\n        if (Object.prototype.hasOwnProperty.call(context.left, property) &&\n            child.result === undefined) {\n            delete object[property];\n        }\n        else if (object[property] !== child.result) {\n            object[property] = child.result;\n        }\n    }\n    context.setResult(object).exit();\n};\ncollectChildrenPatchFilter.filterName = \"collectChildren\";\nexport const reverseFilter = function nestedReverseFilter(context) {\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t) {\n        return;\n    }\n    const objectDelta = context.delta;\n    for (const name in objectDelta) {\n        const child = new ReverseContext(objectDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\nreverseFilter.filterName = \"objects\";\nexport const collectChildrenReverseFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t) {\n        return;\n    }\n    const length = context.children.length;\n    const delta = {};\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const property = child.childName;\n        if (delta[property] !== child.result) {\n            delta[property] = child.result;\n        }\n    }\n    context.setResult(delta).exit();\n};\ncollectChildrenReverseFilter.filterName = \"collectChildren\";\n", "const TEXT_DIFF = 2;\nconst DEFAULT_MIN_LENGTH = 60;\nlet cachedDiffPatch = null;\nfunction getDiffMatchPatch(options, required) {\n    var _a;\n    if (!cachedDiffPatch) {\n        let instance;\n        if ((_a = options === null || options === void 0 ? void 0 : options.textDiff) === null || _a === void 0 ? void 0 : _a.diffMatchPatch) {\n            instance = new options.textDiff.diffMatchPatch();\n        }\n        else {\n            if (!required) {\n                return null;\n            }\n            const error = new Error(\"The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.\");\n            // eslint-disable-next-line camelcase\n            error.diff_match_patch_not_found = true;\n            throw error;\n        }\n        cachedDiffPatch = {\n            diff: (txt1, txt2) => instance.patch_toText(instance.patch_make(txt1, txt2)),\n            patch: (txt1, patch) => {\n                const results = instance.patch_apply(instance.patch_fromText(patch), txt1);\n                for (const resultOk of results[1]) {\n                    if (!resultOk) {\n                        const error = new Error(\"text patch failed\");\n                        error.textPatchFailed = true;\n                        throw error;\n                    }\n                }\n                return results[0];\n            },\n        };\n    }\n    return cachedDiffPatch;\n}\nexport const diffFilter = function textsDiffFilter(context) {\n    var _a, _b;\n    if (context.leftType !== \"string\") {\n        return;\n    }\n    const left = context.left;\n    const right = context.right;\n    const minLength = ((_b = (_a = context.options) === null || _a === void 0 ? void 0 : _a.textDiff) === null || _b === void 0 ? void 0 : _b.minLength) || DEFAULT_MIN_LENGTH;\n    if (left.length < minLength || right.length < minLength) {\n        context.setResult([left, right]).exit();\n        return;\n    }\n    // large text, try to use a text-diff algorithm\n    const diffMatchPatch = getDiffMatchPatch(context.options);\n    if (!diffMatchPatch) {\n        // diff-match-patch library not available,\n        // fallback to regular string replace\n        context.setResult([left, right]).exit();\n        return;\n    }\n    const diff = diffMatchPatch.diff;\n    context.setResult([diff(left, right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter.filterName = \"texts\";\nexport const patchFilter = function textsPatchFilter(context) {\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta[2] !== TEXT_DIFF) {\n        return;\n    }\n    const textDiffDelta = nonNestedDelta;\n    // text-diff, use a text-patch algorithm\n    const patch = getDiffMatchPatch(context.options, true).patch;\n    context.setResult(patch(context.left, textDiffDelta[0])).exit();\n};\npatchFilter.filterName = \"texts\";\nconst textDeltaReverse = (delta) => {\n    var _a, _b, _c;\n    const headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n    const lines = delta.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (line === undefined)\n            continue;\n        const lineStart = line.slice(0, 1);\n        if (lineStart === \"@\") {\n            const header = headerRegex.exec(line);\n            if (header !== null) {\n                const lineHeader = i;\n                // fix header\n                lines[lineHeader] =\n                    `@@ -${header[3]},${header[4]} +${header[1]},${header[2]} @@`;\n            }\n        }\n        else if (lineStart === \"+\") {\n            lines[i] = `-${(_a = lines[i]) === null || _a === void 0 ? void 0 : _a.slice(1)}`;\n            if (((_b = lines[i - 1]) === null || _b === void 0 ? void 0 : _b.slice(0, 1)) === \"+\") {\n                // swap lines to keep default order (-+)\n                const lineTmp = lines[i];\n                lines[i] = lines[i - 1];\n                lines[i - 1] = lineTmp;\n            }\n        }\n        else if (lineStart === \"-\") {\n            lines[i] = `+${(_c = lines[i]) === null || _c === void 0 ? void 0 : _c.slice(1)}`;\n        }\n    }\n    return lines.join(\"\\n\");\n};\nexport const reverseFilter = function textsReverseFilter(context) {\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta[2] !== TEXT_DIFF) {\n        return;\n    }\n    const textDiffDelta = nonNestedDelta;\n    // text-diff, use a text-diff algorithm\n    context\n        .setResult([textDeltaReverse(textDiffDelta[0]), 0, TEXT_DIFF])\n        .exit();\n};\nreverseFilter.filterName = \"texts\";\n", "export const diffFilter = function trivialMatchesDiffFilter(context) {\n    if (context.left === context.right) {\n        context.setResult(undefined).exit();\n        return;\n    }\n    if (typeof context.left === \"undefined\") {\n        if (typeof context.right === \"function\") {\n            throw new Error(\"functions are not supported\");\n        }\n        context.setResult([context.right]).exit();\n        return;\n    }\n    if (typeof context.right === \"undefined\") {\n        context.setResult([context.left, 0, 0]).exit();\n        return;\n    }\n    if (typeof context.left === \"function\" ||\n        typeof context.right === \"function\") {\n        throw new Error(\"functions are not supported\");\n    }\n    context.leftType = context.left === null ? \"null\" : typeof context.left;\n    context.rightType = context.right === null ? \"null\" : typeof context.right;\n    if (context.leftType !== context.rightType) {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.leftType === \"boolean\" || context.leftType === \"number\") {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.leftType === \"object\") {\n        context.leftIsArray = Array.isArray(context.left);\n    }\n    if (context.rightType === \"object\") {\n        context.rightIsArray = Array.isArray(context.right);\n    }\n    if (context.leftIsArray !== context.rightIsArray) {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.left instanceof RegExp) {\n        if (context.right instanceof RegExp) {\n            context\n                .setResult([context.left.toString(), context.right.toString()])\n                .exit();\n        }\n        else {\n            context.setResult([context.left, context.right]).exit();\n        }\n    }\n};\ndiffFilter.filterName = \"trivial\";\nexport const patchFilter = function trivialMatchesPatchFilter(context) {\n    if (typeof context.delta === \"undefined\") {\n        context.setResult(context.left).exit();\n        return;\n    }\n    context.nested = !Array.isArray(context.delta);\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta.length === 1) {\n        context.setResult(nonNestedDelta[0]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 2) {\n        if (context.left instanceof RegExp) {\n            const regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(nonNestedDelta[1]);\n            if (regexArgs === null || regexArgs === void 0 ? void 0 : regexArgs[1]) {\n                context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n                return;\n            }\n        }\n        context.setResult(nonNestedDelta[1]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 3 && nonNestedDelta[2] === 0) {\n        context.setResult(undefined).exit();\n    }\n};\npatchFilter.filterName = \"trivial\";\nexport const reverseFilter = function trivialReferseFilter(context) {\n    if (typeof context.delta === \"undefined\") {\n        context.setResult(context.delta).exit();\n        return;\n    }\n    context.nested = !Array.isArray(context.delta);\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta.length === 1) {\n        context.setResult([nonNestedDelta[0], 0, 0]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 2) {\n        context.setResult([nonNestedDelta[1], nonNestedDelta[0]]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 3 && nonNestedDelta[2] === 0) {\n        context.setResult([nonNestedDelta[0]]).exit();\n    }\n};\nreverseFilter.filterName = \"trivial\";\n", "import clone from \"./clone.js\";\nimport DiffContext from \"./contexts/diff.js\";\nimport PatchContext from \"./contexts/patch.js\";\nimport ReverseContext from \"./contexts/reverse.js\";\nimport Pipe from \"./pipe.js\";\nimport Processor from \"./processor.js\";\nimport * as arrays from \"./filters/arrays.js\";\nimport * as dates from \"./filters/dates.js\";\nimport * as nested from \"./filters/nested.js\";\nimport * as texts from \"./filters/texts.js\";\nimport * as trivial from \"./filters/trivial.js\";\nclass DiffPatcher {\n    constructor(options) {\n        this.processor = new Processor(options);\n        this.processor.pipe(new Pipe(\"diff\")\n            .append(nested.collectChildrenDiffFilter, trivial.diffFilter, dates.diffFilter, texts.diffFilter, nested.objectsDiffFilter, arrays.diffFilter)\n            .shouldHaveResult());\n        this.processor.pipe(new Pipe(\"patch\")\n            .append(nested.collectChildrenPatchFilter, arrays.collectChildrenPatchFilter, trivial.patchFilter, texts.patchFilter, nested.patchFilter, arrays.patchFilter)\n            .shouldHaveResult());\n        this.processor.pipe(new Pipe(\"reverse\")\n            .append(nested.collectChildrenReverseFilter, arrays.collectChildrenReverseFilter, trivial.reverseFilter, texts.reverseFilter, nested.reverseFilter, arrays.reverseFilter)\n            .shouldHaveResult());\n    }\n    options(options) {\n        return this.processor.options(options);\n    }\n    diff(left, right) {\n        return this.processor.process(new DiffContext(left, right));\n    }\n    patch(left, delta) {\n        return this.processor.process(new PatchContext(left, delta));\n    }\n    reverse(delta) {\n        return this.processor.process(new ReverseContext(delta));\n    }\n    unpatch(right, delta) {\n        return this.patch(right, this.reverse(delta));\n    }\n    clone(value) {\n        return clone(value);\n    }\n}\nexport default DiffPatcher;\n", "import dateReviver from \"./date-reviver.js\";\nimport DiffPatcher from \"./diffpatcher.js\";\nexport { DiffPatcher, dateReviver };\nexport function create(options) {\n    return new DiffPatcher(options);\n}\nlet defaultInstance;\nexport function diff(left, right) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.diff(left, right);\n}\nexport function patch(left, delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.patch(left, delta);\n}\nexport function unpatch(right, delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.unpatch(right, delta);\n}\nexport function reverse(delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.reverse(delta);\n}\nexport function clone(value) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.clone(value);\n}\n", "import * as jsondiffpatch from 'jsondiffpatch';\n\nexport type JsonViewOptions = {\n\texpandAll?: boolean;\n\texpandObjs?: Array<string | RegExp>;\n\tuseViewState?: boolean;\n};\n\nconst DEFAULT_OPTIONS = () => ({\n\texpandAll: false,\n\texpandObjects: [],\n\tuseViewState: true\n});\n\nexport class JsonView {\n\tprivate json: any;\n\tprivate parentContainer: HTMLElement;\n\tprivate options: JsonViewOptions;\n\tprivate viewStates: { [key: string]: boolean } = {}; // viewstate tree for retaining view during state updates\n\n\tconstructor(json: any, parentContainer: HTMLElement, options?: JsonViewOptions) {\n\t\tthis.json = json;\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.options = Object.assign({}, DEFAULT_OPTIONS(), options || {});\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\t\tthis.parentContainer.innerHTML = ''; // Clear existing content\n\t\tconst rootNode = this.drawJsonNode(this.json);\n\t\tthis.parentContainer.appendChild(rootNode);\n\t}\n\n\tprivate toggleExpandNode(childNode: HTMLElement, keyPath: string, toggleButton?: HTMLElement) {\n\t\tconst isCollapsed = childNode.classList.contains('collapsed');\n\t\tchildNode.classList.toggle('collapsed', !isCollapsed);\n\t\tthis.viewStates[keyPath] = !isCollapsed;\n\t\tif (toggleButton) toggleButton.textContent = isCollapsed ? '[-]' : '[+]';\n\t}\n\n\tprivate drawJsonNode(jsonObj: any, currPath: string = ''): HTMLElement {\n\t\tconst nodeContainer = document.createElement('div');\n\t\tnodeContainer.classList.add('json-node');\n\t\tconst propertiesContainer = document.createElement('div');\n\t\tpropertiesContainer.classList.add('json-properties');\n\n\t\tfor (const key in jsonObj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(jsonObj, key)) {\n\t\t\t\tconst keyPath = `${currPath}${key}`;\n\t\t\t\tconst propertyRow = document.createElement('div');\n\t\t\t\tpropertyRow.classList.add('json-property');\n\t\t\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\t\t\tconst label = document.createElement('span');\n\t\t\t\tlabel.classList.add('json-key');\n\t\t\t\tlabel.textContent = key + ': ';\n\n\t\t\t\tconst valueContainer = document.createElement('div');\n\t\t\t\tvalueContainer.classList.add('json-value');\n\n\t\t\t\tconst value = jsonObj[key];\n\t\t\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\t\t\tconst isArray = Array.isArray(value);\n\t\t\t\t//console.log(`value:`, value, 'obj?', isObject, 'array?', isArray);\n\n\t\t\t\tif (isObject) {\n\t\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\t\t\telse label.textContent = key;\n\t\t\t\t\tconst hasChildren = isArray && value.length > 0 ? true : Object.keys(value).length > 0;\n\t\t\t\t\tpropertyRow.classList.add('object');\n\t\t\t\t\t// Create expandable/collapsible toggle button\n\t\t\t\t\tconst toggleButton = document.createElement('button');\n\t\t\t\t\ttoggleButton.classList.add('json-toggle');\n\n\t\t\t\t\t// Recursive call to render child object\n\t\t\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\t\t\t//console.log(`KP`, keyPath)\n\n\t\t\t\t\tif (this.options.expandAll) {\n\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet expand = false;\n\t\t\t\t\t\t// expand empty objects by default:\n\t\t\t\t\t\tif (isArray && hasChildren) {\n\t\t\t\t\t\t\t//console.log(`no children`, keyPath)\n\t\t\t\t\t\t\texpand = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.options.expandObjs?.forEach((e) => {\n\t\t\t\t\t\t\t\tif (new RegExp(e).test(keyPath)) expand = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if a viewstate exists use that always:\n\t\t\t\t\t\tif (this.options.useViewState) {\n\t\t\t\t\t\t\tif (typeof this.viewStates[keyPath] !== 'undefined') expand = !this.viewStates[keyPath];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (expand) {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\t\t\t\tchildNode.classList.add('collapsed'); // Start collapsed\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Toggle function for expanding/collapsing\n\t\t\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\t\t\tvalueContainer.appendChild(childNode);\n\t\t\t\t} else {\n\t\t\t\t\tvalueContainer.textContent = String(value);\n\t\t\t\t}\n\n\t\t\t\tpropertyRow.appendChild(label);\n\t\t\t\tpropertyRow.appendChild(valueContainer);\n\t\t\t\tpropertiesContainer.appendChild(propertyRow);\n\t\t\t}\n\t\t}\n\n\t\tnodeContainer.appendChild(propertiesContainer);\n\t\treturn nodeContainer;\n\t}\n\n\tpublic updateJson(newJson: any): void {\n\t\tconst delta = jsondiffpatch.diff(this.json, newJson);\n\t\tif (!delta) return; // No changes\n\n\t\t// Apply patch to the JSON data\n\t\tjsondiffpatch.patch(this.json, delta);\n\n\t\t// Update only the changed DOM nodes\n\t\tthis.patchDOM(delta);\n\t}\n\n\tprivate patchDOM(delta: any, currentPath: string = ''): void {\n\t\tfor (const key in delta) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(delta, key)) continue;\n\n\t\t\tconst change = delta[key];\n\t\t\tconst keyPath = currentPath ? `${currentPath}${key}` : key;\n\n\t\t\t// Check if this is a jsondiffpatch operation marker\n\t\t\tif (key === '_t') continue; // Array marker\n\n\t\t\t// Find the DOM node for this path\n\t\t\tconst propertyNode = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${keyPath}\"]`\n\t\t\t) as HTMLElement;\n\n\t\t\tif (Array.isArray(change)) {\n\t\t\t\t// Simple value change: [oldValue, newValue]\n\t\t\t\tif (change.length === 2) {\n\t\t\t\t\tthis.updateValueNode(propertyNode, keyPath, this.getValueAtPath(this.json, keyPath));\n\t\t\t\t}\n\t\t\t\t// Deleted value: [oldValue, 0, 0]\n\t\t\t\telse if (change.length === 3 && change[1] === 0 && change[2] === 0) {\n\t\t\t\t\tif (propertyNode) propertyNode.remove();\n\t\t\t\t}\n\t\t\t\t// New value: [newValue]\n\t\t\t\telse if (change.length === 1) {\n\t\t\t\t\tthis.addPropertyNode(keyPath, change[0]);\n\t\t\t\t}\n\t\t\t} else if (typeof change === 'object') {\n\t\t\t\t// Nested object changes - recurse\n\t\t\t\tthis.patchDOM(change, keyPath + '/');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getValueAtPath(obj: any, path: string): any {\n\t\tconst parts = path.split('/').filter((p) => p);\n\t\tlet current = obj;\n\t\tfor (const part of parts) {\n\t\t\tif (current === null || current === undefined) return undefined;\n\t\t\tcurrent = current[part];\n\t\t}\n\t\treturn current;\n\t}\n\n\tprivate updateValueNode(propertyNode: HTMLElement | null, keyPath: string, newValue: any): void {\n\t\tif (!propertyNode) return;\n\n\t\tconst valueContainer = propertyNode.querySelector('.json-value') as HTMLElement;\n\t\tif (!valueContainer) return;\n\n\t\tconst isObject = typeof newValue === 'object' && newValue !== null;\n\n\t\tif (isObject) {\n\t\t\t// Object/array changed - need to redraw the entire subtree\n\t\t\tconst key = keyPath.split('/').filter((p) => p).pop() || '';\n\t\t\tconst parentPath = keyPath.substring(0, keyPath.lastIndexOf(key));\n\n\t\t\t// Clear old content\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tpropertyNode.classList.add('object');\n\n\t\t\t// Redraw the node\n\t\t\tconst label = propertyNode.querySelector('.json-key') as HTMLElement;\n\t\t\tconst isArray = Array.isArray(newValue);\n\n\t\t\tif (label) {\n\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\tif (isArray) {\n\t\t\t\t\tlabel.textContent = `${key} (${newValue.length})`;\n\t\t\t\t} else {\n\t\t\t\t\tlabel.textContent = key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if toggle button already exists\n\t\t\tlet toggleButton = propertyNode.querySelector('.json-toggle') as HTMLElement;\n\t\t\tif (!toggleButton) {\n\t\t\t\ttoggleButton = document.createElement('button');\n\t\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\t\tpropertyNode.insertBefore(toggleButton, label);\n\t\t\t}\n\n\t\t\t// Recursive call to render child object\n\t\t\tconst childNode = this.drawJsonNode(newValue, keyPath + '/');\n\n\t\t\t// Preserve expand state if it exists\n\t\t\tconst wasExpanded = this.viewStates[keyPath];\n\t\t\tif (typeof wasExpanded !== 'undefined') {\n\t\t\t\tif (wasExpanded) {\n\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t} else {\n\t\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t}\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tif (label) {\n\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t}\n\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\t// Simple value - just update text\n\t\t\tpropertyNode.classList.remove('object');\n\t\t\tconst toggleButton = propertyNode.querySelector('.json-toggle');\n\t\t\tif (toggleButton) toggleButton.remove();\n\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tvalueContainer.textContent = String(newValue);\n\t\t}\n\t}\n\n\tprivate addPropertyNode(keyPath: string, value: any): void {\n\t\tconst pathParts = keyPath.split('/').filter((p) => p);\n\t\tconst key = pathParts.pop() || '';\n\t\tconst parentPath = pathParts.join('/');\n\n\t\t// Find parent container\n\t\tlet parentContainer: HTMLElement | null;\n\t\tif (parentPath) {\n\t\t\tconst parentProperty = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${parentPath}\"]`\n\t\t\t) as HTMLElement;\n\t\t\tif (parentProperty) {\n\t\t\t\tparentContainer = parentProperty.querySelector('.json-properties') as HTMLElement;\n\t\t\t} else {\n\t\t\t\treturn; // Parent not found\n\t\t\t}\n\t\t} else {\n\t\t\tparentContainer = this.parentContainer.querySelector('.json-properties') as HTMLElement;\n\t\t}\n\n\t\tif (!parentContainer) return;\n\n\t\t// Create new property row\n\t\tconst propertyRow = document.createElement('div');\n\t\tpropertyRow.classList.add('json-property');\n\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\tconst label = document.createElement('span');\n\t\tlabel.classList.add('json-key');\n\t\tlabel.textContent = key + ': ';\n\n\t\tconst valueContainer = document.createElement('div');\n\t\tvalueContainer.classList.add('json-value');\n\n\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\tconst isArray = Array.isArray(value);\n\n\t\tif (isObject) {\n\t\t\tlabel.classList.add('clickable');\n\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\telse label.textContent = key;\n\t\t\tpropertyRow.classList.add('object');\n\n\t\t\tconst toggleButton = document.createElement('button');\n\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\ttoggleButton.textContent = '[+]';\n\n\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\tchildNode.classList.add('collapsed');\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\tvalueContainer.textContent = String(value);\n\t\t}\n\n\t\tpropertyRow.appendChild(label);\n\t\tpropertyRow.appendChild(valueContainer);\n\t\tparentContainer.appendChild(propertyRow);\n\t}\n} ", "export type ResizeOptions = {\n\thandles?: ('top' | 'left' | 'right' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right')[];\n\tmaxWidth?: number;\n\tmaxHeight?: number;\n\tminWidth?: number;\n\tminHeight?: number;\n\tonResize?: (width: number, height: number) => void;\n};\n\nexport function makeResizable(container: HTMLElement, options: ResizeOptions = {}) {\n\t// Remove existing handles\n\tcontainer.querySelectorAll('.resize-handle').forEach((handle) => handle.remove());\n\n\t// Default options - now includes all sides and corners\n\tconst {\n\t\thandles = ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\tmaxWidth = Infinity,\n\t\tmaxHeight = Infinity,\n\t\tminWidth = 100,\n\t\tminHeight = 100,\n\t\tonResize = () => { }\n\t} = options;\n\n\tlet resizing = false;\n\tlet resizeDirection: string | null = null;\n\tlet startX = 0,\n\t\tstartY = 0;\n\tlet startWidth = 0,\n\t\tstartHeight = 0;\n\tlet startLeft = 0,\n\t\tstartTop = 0;\n\n\tfunction createHandle(position: string) {\n\t\tconst handle = document.createElement('div');\n\t\thandle.classList.add('resize-handle', `resize-${position}`);\n\t\thandle.addEventListener('mousedown', (e) => startResizing(e, position));\n\t\tcontainer.appendChild(handle);\n\t}\n\n\tfunction startResizing(event: MouseEvent, direction: string) {\n\t\tresizing = true;\n\t\tresizeDirection = direction;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Capture initial dimensions and position\n\t\tstartWidth = container.offsetWidth;\n\t\tstartHeight = container.offsetHeight;\n\t\tstartLeft = container.offsetLeft;\n\t\tstartTop = container.offsetTop;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tdocument.addEventListener('mousemove', resize);\n\t\tdocument.addEventListener('mouseup', stopResizing);\n\t}\n\n\tfunction resize(event: MouseEvent) {\n\t\tif (!resizing || !resizeDirection) return;\n\n\t\tlet newWidth = startWidth;\n\t\tlet newHeight = startHeight;\n\t\tlet newLeft = startLeft;\n\t\tlet newTop = startTop;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\t// Handle horizontal resizing\n\t\tif (resizeDirection.includes('right')) {\n\t\t\tnewWidth = Math.min(Math.max(startWidth + deltaX, minWidth), maxWidth);\n\t\t}\n\t\tif (resizeDirection.includes('left')) {\n\t\t\tconst potentialWidth = startWidth - deltaX;\n\t\t\tif (potentialWidth >= minWidth && potentialWidth <= maxWidth) {\n\t\t\t\tnewWidth = potentialWidth;\n\t\t\t\tnewLeft = startLeft + deltaX;\n\t\t\t}\n\t\t}\n\n\t\t// Handle vertical resizing\n\t\tif (resizeDirection.includes('bottom')) {\n\t\t\tnewHeight = Math.min(Math.max(startHeight + deltaY, minHeight), maxHeight);\n\t\t}\n\t\tif (resizeDirection.includes('top')) {\n\t\t\tconst potentialHeight = startHeight - deltaY;\n\t\t\tif (potentialHeight >= minHeight && potentialHeight <= maxHeight) {\n\t\t\t\tnewHeight = potentialHeight;\n\t\t\t\tnewTop = startTop + deltaY;\n\t\t\t}\n\t\t}\n\n\t\tcontainer.style.width = `${newWidth}px`;\n\t\tcontainer.style.height = `${newHeight}px`;\n\t\tcontainer.style.left = `${newLeft}px`;\n\t\tcontainer.style.top = `${newTop}px`;\n\n\t\tonResize(newWidth, newHeight);\n\t}\n\n\tfunction stopResizing() {\n\t\tresizing = false;\n\t\tresizeDirection = null;\n\t\tdocument.removeEventListener('mousemove', resize);\n\t\tdocument.removeEventListener('mouseup', stopResizing);\n\t}\n\n\t// Add handles based on config\n\thandles.forEach((handle) => createHandle(handle));\n}\n\nexport type DragOptions = {\n\tonDragStart?: (e: MouseEvent) => void;\n\tonDrag?: (x: number, y: number) => void | { x?: number; y?: number };\n\tonDragEnd?: () => void;\n};\n\nexport function makeDraggable(\n\telement: HTMLElement,\n\thandleElement?: HTMLElement,\n\toptions: DragOptions = {}\n) {\n\tconst dragHandle = handleElement || element;\n\tlet isDragging = false;\n\tlet startX = 0;\n\tlet startY = 0;\n\tlet initialLeft = 0;\n\tlet initialTop = 0;\n\n\tconst { onDragStart, onDrag, onDragEnd } = options;\n\n\tfunction startDragging(event: MouseEvent) {\n\t\t// Don't start dragging if clicking on buttons or interactive elements\n\t\tconst target = event.target as HTMLElement;\n\t\tif (target.tagName === 'BUTTON' || target.closest('button')) {\n\t\t\treturn;\n\t\t}\n\n\t\tisDragging = true;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Get current computed position (handles both absolute and other positioning)\n\t\tconst computedStyle = getComputedStyle(element);\n\t\tinitialLeft = parseInt(computedStyle.left) || element.offsetLeft;\n\t\tinitialTop = parseInt(computedStyle.top) || element.offsetTop;\n\n\t\t// Ensure element has position fixed or absolute for dragging\n\t\tif (computedStyle.position !== 'absolute' && computedStyle.position !== 'fixed') {\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.left = `${initialLeft}px`;\n\t\t\telement.style.top = `${initialTop}px`;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tdragHandle.style.cursor = 'grabbing';\n\n\t\tif (onDragStart) onDragStart(event);\n\n\t\tdocument.addEventListener('mousemove', drag);\n\t\tdocument.addEventListener('mouseup', stopDragging);\n\t}\n\n\tfunction drag(event: MouseEvent) {\n\t\tif (!isDragging) return;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\tlet newLeft = initialLeft + deltaX;\n\t\tlet newTop = initialTop + deltaY;\n\n\t\t// Call onDrag callback which may modify the position (e.g., for snapping)\n\t\tif (onDrag) {\n\t\t\tconst result = onDrag(newLeft, newTop);\n\t\t\t// If onDrag returns adjusted coordinates, use them\n\t\t\tif (result && typeof result === 'object') {\n\t\t\t\tif (typeof result.x === 'number') newLeft = result.x;\n\t\t\t\tif (typeof result.y === 'number') newTop = result.y;\n\t\t\t}\n\t\t}\n\n\t\telement.style.left = `${newLeft}px`;\n\t\telement.style.top = `${newTop}px`;\n\t}\n\n\tfunction stopDragging() {\n\t\tif (!isDragging) return;\n\n\t\tisDragging = false;\n\t\tdragHandle.style.cursor = 'grab';\n\n\t\tif (onDragEnd) onDragEnd();\n\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t}\n\n\t// Set up drag handle cursor\n\tdragHandle.style.cursor = 'grab';\n\tdragHandle.addEventListener('mousedown', startDragging);\n\n\t// Return cleanup function\n\treturn () => {\n\t\tdragHandle.removeEventListener('mousedown', startDragging);\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t};\n}\n\nexport function getWindowSize(): { width: number; height: number } {\n\tconst width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\tconst height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\treturn { width, height };\n} "],
  "mappings": "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",
  "names": ["require_eventbus_min", "__commonJSMin", "exports", "module", "root", "factory", "EventBusClass", "type", "callback", "scope", "args", "numOfArgs", "i", "numOfCallbacks", "newArray", "listener", "target", "event", "listeners", "concatArgs", "str", "EventBus", "require_fast_safe_stringify", "__commonJSMin", "exports", "module", "stringify", "deterministicStringify", "LIMIT_REPLACE_NODE", "CIRCULAR_REPLACE_NODE", "arr", "replacerStack", "defaultOptions", "obj", "replacer", "spacer", "options", "decirc", "res", "replaceGetterValues", "part", "setReplace", "replace", "val", "k", "parent", "propertyDescriptor", "edgeIndex", "stack", "depth", "i", "keys", "key", "compareFunction", "a", "b", "tmp", "deterministicDecirc", "v", "src_exports", "__export", "DebugPanel", "JsonView", "ScreenPosition", "debug", "getWindowSize", "makeDraggable", "makeResizable", "css", "style", "css", "style", "import_eventbusjs", "import_fast_safe_stringify", "cloneRegExp", "re", "_a", "regexMatch", "clone", "arg", "cloned", "name", "assertNonEmptyArray", "arr", "message", "lastNonEmpty", "arr", "Context", "result", "child", "name", "assertNonEmptyArray", "lastNonEmpty", "DiffContext", "Context", "left", "right", "result", "_a", "_b", "_c", "_d", "clone", "diff_default", "PatchContext", "Context", "left", "delta", "patch_default", "ReverseContext", "Context", "delta", "reverse_default", "Pipe", "name", "input", "debug", "length", "context", "index", "filter", "msg", "args", "filterName", "f", "params", "should", "error", "pipe_default", "Processor", "options", "name", "pipeArg", "pipe", "input", "context", "nextPipe", "lastPipe", "processor_default", "defaultMatch", "array1", "array2", "index1", "index2", "lengthMatrix", "match", "context", "_a", "_b", "_c", "len1", "len2", "x", "y", "matrix", "matrixNewRow", "matrixRowX", "matrixRowBeforeX", "backtrack", "subsequence", "matrixRowIndex1", "valueAtMatrixAbove", "matrixRowBeforeIndex1", "valueAtMatrixLeft", "get", "innerContext", "lcs_default", "ARRAY_MOVE", "arraysHaveMatchByRef", "array1", "array2", "len1", "len2", "index1", "val1", "index2", "val2", "matchItems", "context", "value1", "value2", "objectHash", "hash1", "hash2", "diffFilter", "_a", "_b", "_c", "_d", "_e", "matchContext", "commonHead", "commonTail", "index", "child", "diff_default", "result", "key", "trimmed1", "trimmed2", "seq", "lcs_default", "removedItems", "detectMove", "includeValueOnMove", "removedItemsLength", "indexOnArray2", "isMove", "removeItemIndex1", "resultItem", "compare", "a", "b", "name", "patchFilter", "nestedDelta", "delta", "array", "toRemove", "toInsert", "toModify", "removedOrMovedIndex", "numberIndex", "indexDiff", "removedValue", "toInsertLength", "insertion", "toModifyLength", "modification", "patch_default", "collectChildrenPatchFilter", "length", "arrayIndex", "reverseFilter", "nonNestedDelta", "arrayMoveDelta", "arrayDelta", "reverse_default", "reverseArrayDeltaIndex", "itemDelta", "reverseIndex", "deltaIndex", "deltaItem", "moveFromIndex", "moveToIndex", "collectChildrenReverseFilter", "deltaWithChildren", "diffFilter", "context", "collectChildrenDiffFilter", "context", "length", "result", "index", "child", "objectsDiffFilter", "_a", "left", "right", "propertyFilter", "name", "diff_default", "patchFilter", "nestedDelta", "objectDelta", "patch_default", "collectChildrenPatchFilter", "object", "property", "reverseFilter", "reverse_default", "collectChildrenReverseFilter", "delta", "cachedDiffPatch", "getDiffMatchPatch", "options", "required", "_a", "instance", "error", "txt1", "txt2", "patch", "results", "resultOk", "diffFilter", "context", "_b", "left", "right", "minLength", "diffMatchPatch", "diff", "patchFilter", "nonNestedDelta", "textDiffDelta", "textDeltaReverse", "delta", "_c", "headerRegex", "lines", "i", "line", "lineStart", "header", "lineHeader", "lineTmp", "reverseFilter", "diffFilter", "context", "patchFilter", "nonNestedDelta", "regexArgs", "reverseFilter", "DiffPatcher", "options", "processor_default", "pipe_default", "collectChildrenDiffFilter", "diffFilter", "objectsDiffFilter", "collectChildrenPatchFilter", "patchFilter", "collectChildrenReverseFilter", "reverseFilter", "left", "right", "diff_default", "delta", "patch_default", "reverse_default", "value", "clone", "diffpatcher_default", "defaultInstance", "diff", "left", "right", "diffpatcher_default", "patch", "delta", "DEFAULT_OPTIONS", "JsonView", "json", "parentContainer", "options", "rootNode", "childNode", "keyPath", "toggleButton", "isCollapsed", "jsonObj", "currPath", "nodeContainer", "propertiesContainer", "key", "propertyRow", "label", "valueContainer", "value", "isObject", "isArray", "hasChildren", "expand", "e", "newJson", "delta", "diff", "patch", "currentPath", "change", "propertyNode", "obj", "path", "parts", "p", "current", "part", "newValue", "parentPath", "wasExpanded", "pathParts", "parentProperty", "makeResizable", "container", "options", "handle", "handles", "maxWidth", "maxHeight", "minWidth", "minHeight", "onResize", "resizing", "resizeDirection", "startX", "startY", "startWidth", "startHeight", "startLeft", "startTop", "createHandle", "position", "e", "startResizing", "event", "direction", "resize", "stopResizing", "newWidth", "newHeight", "newLeft", "newTop", "deltaX", "deltaY", "potentialWidth", "potentialHeight", "makeDraggable", "element", "handleElement", "dragHandle", "isDragging", "initialLeft", "initialTop", "onDragStart", "onDrag", "onDragEnd", "startDragging", "target", "computedStyle", "drag", "stopDragging", "result", "getWindowSize", "width", "height", "DEBUG_STATE_NAMESPACE", "ScreenPosition", "MIN_WIDTH", "DebugPanel", "options", "container", "tabContainer", "contentContainer", "toolbar", "hint", "opacityContainer", "opacityLabel", "clearButton", "hideButton", "EventBus", "event", "namespace", "message", "id", "state", "width", "height", "getWindowSize", "makeResizable", "newWidth", "makeDraggable", "x", "y", "panelWidth", "panelHeight", "left", "top", "savedSettings", "opacity", "settingsJson", "error", "settings", "idOrState", "_id", "_state", "content", "debugWrapper", "jsonWrapper", "toggleObjectOpen", "isExpanded", "toggleButton", "label", "jsonView", "JsonView", "tab", "key", "index", "tabNamespace", "el", "activeContent", "logEntry", "logElement", "logText", "copyButton", "deleteButton", "logId", "entry", "safeStringify", "snapPadding", "windowWidth", "windowHeight", "snappedX", "snappedY", "debug"]
}
