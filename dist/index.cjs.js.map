{
  "version": 3,
  "sources": ["../node_modules/fast-safe-stringify/index.js", "../src/index.ts", "../src/DebugPanel/DebugPanel.scss", "../src/JsonView/JsonView.scss", "../src/DebugPanel/DebugPanel.ts", "../src/JsonView/JsonView.ts", "../src/utils/domUtils.ts"],
  "sourcesContent": ["module.exports = stringify\nstringify.default = stringify\nstringify.stable = deterministicStringify\nstringify.stableStringify = deterministicStringify\n\nvar LIMIT_REPLACE_NODE = '[...]'\nvar CIRCULAR_REPLACE_NODE = '[Circular]'\n\nvar arr = []\nvar replacerStack = []\n\nfunction defaultOptions () {\n  return {\n    depthLimit: Number.MAX_SAFE_INTEGER,\n    edgesLimit: Number.MAX_SAFE_INTEGER\n  }\n}\n\n// Regular stringify\nfunction stringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  decirc(obj, '', 0, [], undefined, 0, options)\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(obj, replacer, spacer)\n    } else {\n      res = JSON.stringify(obj, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction setReplace (replace, val, k, parent) {\n  var propertyDescriptor = Object.getOwnPropertyDescriptor(parent, k)\n  if (propertyDescriptor.get !== undefined) {\n    if (propertyDescriptor.configurable) {\n      Object.defineProperty(parent, k, { value: replace })\n      arr.push([parent, k, val, propertyDescriptor])\n    } else {\n      replacerStack.push([val, k, replace])\n    }\n  } else {\n    parent[k] = replace\n    arr.push([parent, k, val])\n  }\n}\n\nfunction decirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        decirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      var keys = Object.keys(val)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        decirc(val[key], key, i, stack, val, depth, options)\n      }\n    }\n    stack.pop()\n  }\n}\n\n// Stable-stringify\nfunction compareFunction (a, b) {\n  if (a < b) {\n    return -1\n  }\n  if (a > b) {\n    return 1\n  }\n  return 0\n}\n\nfunction deterministicStringify (obj, replacer, spacer, options) {\n  if (typeof options === 'undefined') {\n    options = defaultOptions()\n  }\n\n  var tmp = deterministicDecirc(obj, '', 0, [], undefined, 0, options) || obj\n  var res\n  try {\n    if (replacerStack.length === 0) {\n      res = JSON.stringify(tmp, replacer, spacer)\n    } else {\n      res = JSON.stringify(tmp, replaceGetterValues(replacer), spacer)\n    }\n  } catch (_) {\n    return JSON.stringify('[unable to serialize, circular reference is too complex to analyze]')\n  } finally {\n    // Ensure that we restore the object as it was.\n    while (arr.length !== 0) {\n      var part = arr.pop()\n      if (part.length === 4) {\n        Object.defineProperty(part[0], part[1], part[3])\n      } else {\n        part[0][part[1]] = part[2]\n      }\n    }\n  }\n  return res\n}\n\nfunction deterministicDecirc (val, k, edgeIndex, stack, parent, depth, options) {\n  depth += 1\n  var i\n  if (typeof val === 'object' && val !== null) {\n    for (i = 0; i < stack.length; i++) {\n      if (stack[i] === val) {\n        setReplace(CIRCULAR_REPLACE_NODE, val, k, parent)\n        return\n      }\n    }\n    try {\n      if (typeof val.toJSON === 'function') {\n        return\n      }\n    } catch (_) {\n      return\n    }\n\n    if (\n      typeof options.depthLimit !== 'undefined' &&\n      depth > options.depthLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    if (\n      typeof options.edgesLimit !== 'undefined' &&\n      edgeIndex + 1 > options.edgesLimit\n    ) {\n      setReplace(LIMIT_REPLACE_NODE, val, k, parent)\n      return\n    }\n\n    stack.push(val)\n    // Optimize for Arrays. Big arrays could kill the performance otherwise!\n    if (Array.isArray(val)) {\n      for (i = 0; i < val.length; i++) {\n        deterministicDecirc(val[i], i, i, stack, val, depth, options)\n      }\n    } else {\n      // Create a temporary object in the required way\n      var tmp = {}\n      var keys = Object.keys(val).sort(compareFunction)\n      for (i = 0; i < keys.length; i++) {\n        var key = keys[i]\n        deterministicDecirc(val[key], key, i, stack, val, depth, options)\n        tmp[key] = val[key]\n      }\n      if (typeof parent !== 'undefined') {\n        arr.push([parent, k, val])\n        parent[k] = tmp\n      } else {\n        return tmp\n      }\n    }\n    stack.pop()\n  }\n}\n\n// wraps replacer function to handle values we couldn't replace\n// and mark them as replaced value\nfunction replaceGetterValues (replacer) {\n  replacer =\n    typeof replacer !== 'undefined'\n      ? replacer\n      : function (k, v) {\n        return v\n      }\n  return function (key, val) {\n    if (replacerStack.length > 0) {\n      for (var i = 0; i < replacerStack.length; i++) {\n        var part = replacerStack[i]\n        if (part[1] === key && part[0] === val) {\n          val = part[2]\n          replacerStack.splice(i, 1)\n          break\n        }\n      }\n    }\n    return replacer.call(this, key, val)\n  }\n}\n", "// Import styles - these will be auto-injected when the library is used\nimport './DebugPanel/DebugPanel.scss';\nimport './JsonView/JsonView.scss';\n\n// Export main classes and utilities\nexport { DebugPanel, ScreenPosition } from './DebugPanel/DebugPanel';\nexport { JsonView } from './JsonView/JsonView';\nexport { debug } from './DebugPanel/DebugPanel';\nexport { makeResizable, makeDraggable, getWindowSize } from './utils/domUtils';\n\n// Export types for TypeScript users\nexport type {\n\tDebugPanelOptions,\n\tDebugPanelSettings,\n\tResizeOptions,\n\tDragOptions\n} from './types';", "\n        const css = \".debug-panel{position:fixed;z-index:99999;background:#222;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.3);display:flex;flex-direction:column;overflow:hidden;font-family:Arial,sans-serif;color:#fff;transition:transform .2s ease-in-out,visibility .2s ease-in-out}.debug-panel.visible{visibility:visible;transform:translateY(0)}.debug-panel:not(.visible){visibility:hidden;transform:translateY(10px);pointer-events:none}.debug-panel .debug-panel-tabs{display:flex;flex-wrap:wrap;background:#111;padding:5px;gap:5px;border-bottom:1px solid hsla(0,0%,100%,.1);cursor:grab;user-select:none}.debug-panel .debug-panel-tabs:active{cursor:grabbing}.debug-panel .debug-panel-tabs .debug-tab{background:#333;color:#ccc;padding:5px 10px;border:none;border-radius:4px;cursor:pointer;transition:background .2s ease-in-out}.debug-panel .debug-panel-tabs .debug-tab:hover{background:#444;color:#fff}.debug-panel .debug-panel-tabs .debug-tab:focus{outline:none}.debug-panel .debug-panel-tabs .debug-tab.active{background:#007bff;color:#fff}.debug-panel .debug-panel-content{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:0px 15px;background:#1a1a1a}.debug-panel .debug-panel-content .debug-tab-content{display:none;flex-direction:column;flex:1;gap:5px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry{background:#292929;color:#ddd;padding:5px 8px;border-radius:4px;font-size:12px;word-break:break-word;border-left:3px solid #007bff;position:relative;display:flex;align-items:center}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry:hover .debug-copy-button{opacity:1}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-log-entry-text{flex:1;padding-right:70px}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(100,100,100,.8);color:#fff;border:none;cursor:pointer;font-size:12px;font-weight:bold;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease-in-out,background .2s ease-in-out}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-action-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover,.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#969696}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button{right:36px;background:rgba(85,170,255,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-copy-button:hover{background:#28f}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button{right:8px;background:rgba(255,85,85,.8)}.debug-panel .debug-panel-content .debug-tab-content .debug-log-entry .debug-delete-button:hover{background:#f22}.debug-panel .debug-toolbar{display:flex;width:100%;align-items:center;justify-content:flex-end;gap:8px;padding:8px;background:#111;border-top:1px solid hsla(0,0%,100%,.1);flex-wrap:wrap}.debug-panel .debug-toolbar .debug-keyboard-hint{margin-right:auto;color:#999;font-size:11px;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container{display:flex;align-items:center;gap:5px;max-width:100px;min-width:40px;flex-shrink:1;padding:5px 0}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-label{font-size:11px;color:#999;white-space:nowrap}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider{flex:1;min-width:40px;width:100%;max-width:100%;height:4px;background:#444;border-radius:2px;outline:none;-webkit-appearance:none;appearance:none}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb{width:14px;height:14px;background:#007bff;cursor:pointer;border-radius:50%;border:none;position:relative;top:-4px;transition:background .2s}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-thumb:hover{background:#0056b3}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-webkit-slider-runnable-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar .debug-opacity-container .debug-opacity-slider::-moz-range-track{height:4px;background:#444;border-radius:2px}.debug-panel .debug-toolbar button{background:#d9534f;color:#fff;border:none;padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s;white-space:nowrap;flex-shrink:0}.debug-panel .debug-toolbar button:hover{background:#c9302c}.debug-panel .debug-toolbar button:focus{outline:none}.debug-panel .debug-toolbar{container-type:inline-size}@container (max-width: 350px){.debug-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel .debug-toolbar .debug-keyboard-hint{display:none}.debug-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}}.debug-panel.narrow-panel .debug-toolbar{flex-direction:column;align-items:stretch}.debug-panel.narrow-panel .debug-toolbar .debug-keyboard-hint{margin-right:0;text-align:center}.debug-panel.narrow-panel .debug-toolbar .debug-opacity-container{max-width:100%;justify-content:center}.debug-panel .resize-handle{position:absolute;background:hsla(0,0%,100%,.1);z-index:10;transition:background .2s}.debug-panel .resize-handle:hover{background:hsla(0,0%,100%,.3)}.debug-panel .resize-left,.debug-panel .resize-right{top:0;bottom:0;width:6px;cursor:ew-resize}.debug-panel .resize-left{left:-3px}.debug-panel .resize-right{right:-3px}.debug-panel .resize-top,.debug-panel .resize-bottom{left:0;right:0;height:6px;cursor:ns-resize}.debug-panel .resize-top{top:-3px}.debug-panel .resize-bottom{bottom:-3px}.debug-panel .resize-top-left,.debug-panel .resize-top-right,.debug-panel .resize-bottom-left,.debug-panel .resize-bottom-right{width:10px;height:10px}.debug-panel .resize-top-left{left:-3px;top:-3px;cursor:nwse-resize}.debug-panel .resize-top-right{right:-3px;top:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-left{left:-3px;bottom:-3px;cursor:nesw-resize}.debug-panel .resize-bottom-right{right:-3px;bottom:-3px;cursor:nwse-resize}.debug-state{position:relative;flex:1 0 100%;display:flex;flex-direction:column;margin-bottom:10px;margin-left:10px}.debug-state .json-toggle{position:absolute;top:2px;left:-22px;margin:0 10px 0 0;border:none;background:none;cursor:pointer;color:#888;font-size:14px;padding:0;width:20px;height:20px;transition:color .2s}.debug-state .json-toggle:hover{color:#fff}.debug-state .json-toggle:focus{outline:none}.debug-state .debug-state-label{font-size:13px;font-weight:bold;padding:5px 0;color:#ccc}.debug-state .debug-state-label:hover{color:#fff;cursor:pointer;text-decoration:underline}.debug-state .json-wrapper{padding:5px;margin-left:-15px;background:#292929;border-radius:4px;border-left:3px solid #28a745}.debug-state.collapsed .json-wrapper{display:none}\";\n        if (typeof document !== 'undefined') {\n          const style = document.createElement('style');\n          style.textContent = css;\n          document.head.appendChild(style);\n        }\n        export default css;\n      ", "\n        const css = \".json-node{position:relative;margin-left:20px;padding-left:0;font-size:12px;line-height:1.2em}.json-node .json-properties{display:flex;flex-direction:column}.json-node .json-property{position:relative;display:flex;align-items:flex-start;padding:2px 0}.json-node .json-property.object{flex-direction:column}.json-node .json-key{font-weight:bold;margin-right:5px;color:#9cdcfe}.json-node .json-key.clickable{cursor:pointer}.json-node .json-key.clickable:hover{color:#4fc3f7;text-decoration:underline}.json-node .json-value{color:#ce9178;white-space:pre-wrap;word-break:break-word;flex:1}.json-node .json-toggle{position:absolute;top:0px;left:-22px;border:none;background:none;cursor:pointer;color:#888;font-size:12px;padding:0;width:20px;height:20px;transition:color .2s}.json-node .json-toggle:hover{color:#fff}.json-node .json-toggle:focus{outline:none}.json-node .collapsed .json-properties{display:none}\";\n        if (typeof document !== 'undefined') {\n          const style = document.createElement('style');\n          style.textContent = css;\n          document.head.appendChild(style);\n        }\n        export default css;\n      ", "import EventBus from 'eventbusjs';\nimport safeStringify from 'fast-safe-stringify';\nimport { JsonView } from '../JsonView/JsonView';\nimport { getWindowSize, makeResizable, makeDraggable } from '../utils/domUtils';\n\nconst DEBUG_STATE_NAMESPACE = 'objects';\n\nexport enum ScreenPosition {\n\tTopLeft = 'topLeft',\n\tTop = 'top',\n\tTopRight = 'topRight',\n\tRight = 'right',\n\tBottomRight = 'bottomRight',\n\tBottom = 'bottom',\n\tBottomLeft = 'bottomLeft',\n\tLeft = 'left'\n}\n\nconst MIN_WIDTH = 280;\n\ntype LogEntry = {\n\tid: string;\n\tmessage: Array<any> | object | string;\n\ttimestamp: Date;\n};\n\ntype LogEvent = {\n\tnamespace: string;\n\targs: Array<any>;\n};\n\ninterface TabEntries {\n\t[namespace: string]: LogEntry[];\n}\n\ninterface DebugState {\n\tstate: any;\n\tjsonView: JsonView;\n\tisExpanded: boolean;\n}\n\nexport interface DebugPanelSettings {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n\tvisible: boolean;\n\topacity: number;\n}\n\nexport interface DebugPanelOptions {\n\tshow?: boolean;\n\tposition?: ScreenPosition;\n\twidth?: number;\n\theight?: number;\n\tsnap?: boolean;\n\tsnapPadding?: number;\n}\n\n/*\nDebugPanel usage API:\n\ndebug(obj), debug(id, obj)\nlog(...args)\nshow()\nhide()\ntoggle()\n\n*/\n\nexport class DebugPanel {\n\tprivate container: HTMLElement;\n\tprivate tabContainer: HTMLElement;\n\tprivate contentContainer: HTMLElement;\n\tprivate toolbar: HTMLElement;\n\tprivate opacitySlider!: HTMLInputElement;\n\tprivate tabEntries: TabEntries = {};\n\tprivate debugStates: { [id: string]: DebugState } = {};\n\tprivate activeTab: string = 'global';\n\tprivate options: DebugPanelOptions;\n\n\tconstructor(options: DebugPanelOptions = {}) {\n\t\tthis.options = {\n\t\t\tposition: ScreenPosition.BottomRight,\n\t\t\twidth: 600,\n\t\t\theight: 400,\n\t\t\tsnap: true,\n\t\t\tsnapPadding: 20,\n\t\t\t...options\n\t\t};\n\n\t\tthis.container = this.createContainer();\n\t\tthis.tabContainer = this.createTabContainer();\n\t\tthis.contentContainer = this.createContentContainer();\n\n\t\tthis.container.appendChild(this.tabContainer);\n\t\tthis.container.appendChild(this.contentContainer);\n\n\t\tthis.toolbar = this.createGlobalToolbar();\n\t\tthis.container.appendChild(this.toolbar);\n\n\t\tdocument.body.appendChild(this.container);\n\n\t\tthis.addTab(DEBUG_STATE_NAMESPACE);\n\t\tthis.addTab('global');\n\n\t\t// Restore settings first (including visibility) before setting up interactions\n\t\tthis.restoreSettings();\n\t\tthis.setupResizable();\n\t\tthis.setupDraggable();\n\t\tthis.setupEventListeners();\n\t\tthis.setupKeyboardShortcut();\n\n\t\t// Only show if explicitly requested in options AND no saved settings exist\n\t\tif (options.show && !this.loadSettings()) {\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tprivate createContainer(): HTMLElement {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.classList.add('debug-panel');\n\t\tcontainer.style.width = `${this.options.width}px`;\n\t\tcontainer.style.height = `${this.options.height}px`;\n\t\tcontainer.style.position = 'fixed';\n\t\tcontainer.style.opacity = '1'; // Set default opacity\n\t\treturn container;\n\t}\n\n\tprivate createTabContainer(): HTMLElement {\n\t\tconst tabContainer = document.createElement('div');\n\t\ttabContainer.classList.add('debug-panel-tabs');\n\t\treturn tabContainer;\n\t}\n\n\tprivate createContentContainer(): HTMLElement {\n\t\tconst contentContainer = document.createElement('div');\n\t\tcontentContainer.classList.add('debug-panel-content');\n\t\treturn contentContainer;\n\t}\n\n\tprivate createGlobalToolbar(): HTMLElement {\n\t\tconst toolbar = document.createElement('div');\n\t\ttoolbar.classList.add('debug-toolbar');\n\n\t\tconst hint = document.createElement('span');\n\t\thint.classList.add('debug-keyboard-hint');\n\t\thint.textContent = 'Ctrl+Alt+D to hide/show';\n\t\thint.style.color = '#999';\n\t\thint.style.fontSize = '11px';\n\n\t\tconst opacityContainer = document.createElement('div');\n\t\topacityContainer.classList.add('debug-opacity-container');\n\n\t\tconst opacityLabel = document.createElement('label');\n\t\topacityLabel.classList.add('debug-opacity-label');\n\t\topacityLabel.textContent = 'O';\n\t\topacityLabel.style.fontSize = '11px';\n\t\topacityLabel.style.color = '#999';\n\t\topacityLabel.style.marginRight = '5px';\n\n\t\tthis.opacitySlider = document.createElement('input');\n\t\tthis.opacitySlider.type = 'range';\n\t\tthis.opacitySlider.min = '20';\n\t\tthis.opacitySlider.max = '100';\n\t\tthis.opacitySlider.value = '100';\n\t\tthis.opacitySlider.classList.add('debug-opacity-slider');\n\t\tthis.opacitySlider.oninput = () => this.handleOpacityChange();\n\n\t\t//opacityContainer.appendChild(opacityLabel);\n\t\topacityContainer.appendChild(this.opacitySlider);\n\n\t\tconst clearButton = document.createElement('button');\n\t\tclearButton.classList.add('debug-clear-button');\n\t\tclearButton.textContent = 'Clear';\n\t\tclearButton.onclick = () => this.clearCurrentTab();\n\n\t\tconst hideButton = document.createElement('button');\n\t\thideButton.classList.add('debug-hide-button');\n\t\thideButton.textContent = 'Hide';\n\t\thideButton.onclick = () => this.hide();\n\n\t\ttoolbar.appendChild(hint);\n\t\ttoolbar.appendChild(opacityContainer);\n\t\ttoolbar.appendChild(clearButton);\n\t\ttoolbar.appendChild(hideButton);\n\n\t\treturn toolbar;\n\t}\n\n\tprivate setupEventListeners(): void {\n\t\tEventBus.addEventListener('log', (event: any) => {\n\t\t\tconst { namespace, message } = event.target;\n\t\t\tthis.log(namespace, message);\n\t\t});\n\n\t\t// special listener for sending objects to the objects panel\n\t\t// todo:\n\t\tEventBus.addEventListener('debug', (event: any) => {\n\t\t\tconst { id, state } = event.target;\n\t\t\tif (!id || !state) {\n\t\t\t\tconsole.log('Invalid event data for debug-state. Expected {id, state}, got:', event);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.debug(id, state);\n\t\t});\n\t}\n\n\tprivate setupResizable(): void {\n\t\tconst { width, height } = getWindowSize();\n\n\t\tmakeResizable(this.container, {\n\t\t\thandles: ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\t\tmaxWidth: width - 20,\n\t\t\tmaxHeight: height - 20,\n\t\t\tminWidth: 200,\n\t\t\tminHeight: 150,\n\t\t\tonResize: (newWidth: number) => {\n\t\t\t\tthis.updateToolbarLayout(newWidth);\n\t\t\t\tthis.saveSettings();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate setupDraggable(): void {\n\t\tif (this.options.snap) {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDrag: (x: number, y: number) => this.handleSnapWhileDragging(x, y),\n\t\t\t\tonDragEnd: () => this.saveSettings()\n\t\t\t});\n\t\t} else {\n\t\t\tmakeDraggable(this.container, this.tabContainer, {\n\t\t\t\tonDragEnd: () => this.saveSettings()\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate setupPosition(): void {\n\t\tconst { width, height } = getWindowSize();\n\t\tconst panelWidth = this.options.width || 600;\n\t\tconst panelHeight = this.options.height || 400;\n\n\t\tlet left = 0;\n\t\tlet top = 0;\n\n\t\tswitch (this.options.position) {\n\t\t\tcase ScreenPosition.TopLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Top:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.TopRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = 0;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Right:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomRight:\n\t\t\t\tleft = width - panelWidth;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Bottom:\n\t\t\t\tleft = (width - panelWidth) / 2;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.BottomLeft:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = height - panelHeight;\n\t\t\t\tbreak;\n\t\t\tcase ScreenPosition.Left:\n\t\t\t\tleft = 0;\n\t\t\t\ttop = (height - panelHeight) / 2;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.container.style.left = `${left}px`;\n\t\tthis.container.style.top = `${top}px`;\n\t}\n\n\tprivate setupKeyboardShortcut(): void {\n\t\tdocument.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\t\t// Check for Ctrl+Alt+D\n\t\t\tif (event.ctrlKey && event.altKey && event.key.toLowerCase() === 'd') {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tthis.toggle();\n\t\t\t}\n\t\t});\n\t}\n\n\t// Settings management\n\n\tprivate restoreSettings(): void {\n\t\tconst savedSettings = this.loadSettings();\n\n\t\tif (savedSettings) {\n\t\t\t// Restore saved position and size\n\t\t\tthis.container.style.left = `${savedSettings.left}px`;\n\t\t\tthis.container.style.top = `${savedSettings.top}px`;\n\t\t\tthis.container.style.width = `${savedSettings.width}px`;\n\t\t\tthis.container.style.height = `${savedSettings.height}px`;\n\n\t\t\t// Restore opacity\n\t\t\tconst opacity = savedSettings.opacity !== undefined ? savedSettings.opacity : 1;\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t\tif (this.opacitySlider) {\n\t\t\t\tthis.opacitySlider.value = String(Math.round(opacity * 100));\n\t\t\t}\n\n\t\t\t// Restore visibility state without triggering saveSettings\n\t\t\tif (savedSettings.visible) {\n\t\t\t\tthis.container.classList.add('visible');\n\t\t\t} else {\n\t\t\t\tthis.container.classList.remove('visible');\n\t\t\t}\n\t\t} else {\n\t\t\t// Use default position if no saved settings\n\t\t\tthis.setupPosition();\n\t\t\t// Don't set visibility - let the constructor handle it\n\t\t}\n\t}\n\n\tprivate loadSettings(): DebugPanelSettings | null {\n\t\ttry {\n\t\t\tconst settingsJson = localStorage.getItem('debugPanelSettings');\n\t\t\tif (settingsJson) {\n\t\t\t\treturn JSON.parse(settingsJson);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to load debug panel settings:', error);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate saveSettings(): void {\n\t\ttry {\n\t\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\t\tconst settings: DebugPanelSettings = {\n\t\t\t\tleft: parseInt(this.container.style.left) || this.container.offsetLeft,\n\t\t\t\ttop: parseInt(this.container.style.top) || this.container.offsetTop,\n\t\t\t\twidth: this.container.offsetWidth,\n\t\t\t\theight: this.container.offsetHeight,\n\t\t\t\tvisible: this.container.classList.contains('visible'),\n\t\t\t\topacity: opacity\n\t\t\t};\n\t\t\tlocalStorage.setItem('debugPanelSettings', JSON.stringify(settings));\n\t\t} catch (error) {\n\t\t\tconsole.error('Failed to save debug panel settings:', error);\n\t\t}\n\t}\n\n\t// Debug objects\n\n\t// Send any object to the DebugPanel for observation. Use a string id as first argument to label it.\n\tpublic debug(idOrState: any, state?: any): void {\n\t\t//if (typeof idOrState === 'string')\n\t\tlet _id = idOrState;\n\t\tlet _state = state;\n\t\tif (!state && typeof idOrState == 'object') {\n\t\t\t_id = 'object'; // todo: make object IDs?\n\t\t\t_state = idOrState;\n\t\t}\n\n\t\t// todo: this is not efficient, but is how to deal with circular dependencies.\n\t\t// const safeState = safeStringify(_state);\n\t\t// const parsedState = JSON.parse(safeState);\n\n\t\tif (this.debugStates[_id]) {\n\t\t\tthis.updateDebugState(_id, _state); // parsedState);\n\t\t} else {\n\t\t\tthis.addDebugState(_id, _state);// parsedState);\n\t\t}\n\t}\n\n\tprivate updateDebugState(id: string, state: any): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`);\n\t\tif (!content) {\n\t\t\tconsole.error('No content for debug namespace.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst debugWrapper: HTMLElement | null = content.querySelector(`#debug-state-${id}`);\n\t\tif (!debugWrapper) {\n\t\t\tconsole.error(`No debug state found for ${id}.`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst jsonWrapper = debugWrapper.querySelector('.json-wrapper');\n\t\tif (!jsonWrapper) {\n\t\t\tconsole.error(`No json wrapper found for existing state ${id}`);\n\t\t\treturn;\n\t\t}\n\n\t\tjsonWrapper.innerHTML = '';\n\t\tthis.debugStates[id].state = state;\n\t\tthis.debugStates[id].jsonView.updateJson(state);\n\t}\n\n\tprivate addDebugState(id: string, state: any): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${DEBUG_STATE_NAMESPACE}\"]`);\n\t\tif (!content) {\n\t\t\tconsole.error('No content for debug namespace.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst debugWrapper = document.createElement('div');\n\t\tdebugWrapper.classList.add('debug-state');\n\t\tdebugWrapper.setAttribute('id', `debug-state-${id}`);\n\n\t\tconst toggleObjectOpen = () => {\n\t\t\tconst isExpanded = this.debugStates[id].isExpanded;\n\t\t\tthis.debugStates[id].isExpanded = !isExpanded;\n\t\t\tdebugWrapper.classList.toggle('collapsed', isExpanded);\n\t\t\ttoggleButton.textContent = isExpanded ? '[+]' : '[-]';\n\t\t}\n\n\t\tconst toggleButton = document.createElement('button');\n\t\ttoggleButton.classList.add('json-toggle');\n\t\ttoggleButton.textContent = '[-]';\n\t\ttoggleButton.onclick = toggleObjectOpen;\n\t\tdebugWrapper.appendChild(toggleButton);\n\n\t\tconst label = document.createElement('div');\n\t\tlabel.classList.add('debug-state-label');\n\t\tlabel.innerText = id || 'untitled';\n\t\tlabel.onclick = toggleObjectOpen;\n\t\tdebugWrapper.appendChild(label);\n\n\t\tconst jsonWrapper = document.createElement('div');\n\t\tjsonWrapper.classList.add('json-wrapper');\n\t\tdebugWrapper.appendChild(jsonWrapper);\n\n\t\tconst jsonView = new JsonView(state, jsonWrapper as HTMLElement, {\n\t\t\t//expandObjs: [/children/, /children\\/(.*)/, /entry/]\n\t\t});\n\n\t\tthis.debugStates[id] = {\n\t\t\tstate,\n\t\t\tjsonView,\n\t\t\tisExpanded: true\n\t\t};\n\n\t\tcontent.appendChild(debugWrapper);\n\t}\n\n\t// Tab controls\n\n\tprivate addTab(namespace: string): void {\n\t\tif (this.tabEntries[namespace]) return;\n\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tconst tab = document.createElement('button');\n\t\ttab.classList.add('debug-tab');\n\t\ttab.textContent = namespace;\n\t\ttab.onclick = () => this.switchTab(namespace);\n\t\tthis.tabContainer.appendChild(tab);\n\n\t\tconst content = document.createElement('div');\n\t\tcontent.classList.add('debug-tab-content');\n\t\tcontent.dataset.namespace = namespace;\n\t\tthis.contentContainer.appendChild(content);\n\n\t\tif (Object.keys(this.tabEntries).length === 1) {\n\t\t\tthis.switchTab(namespace);\n\t\t}\n\t}\n\n\tprivate clearCurrentTab(): void {\n\t\tthis.clearTab(this.activeTab);\n\t}\n\n\tprivate clearTab(namespace: string): void {\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\t// Clear the data\n\t\tthis.tabEntries[namespace] = [];\n\n\t\tif (namespace === DEBUG_STATE_NAMESPACE) {\n\t\t\t// Clear debug states\n\t\t\tObject.keys(this.debugStates).forEach((key) => {\n\t\t\t\tdelete this.debugStates[key];\n\t\t\t});\n\t\t}\n\n\t\t// Remove all children from content\n\t\tcontent.innerHTML = '';\n\t}\n\n\tprivate switchTab(namespace: string): void {\n\t\tthis.activeTab = namespace;\n\n\t\t// Update tab buttons\n\t\tthis.tabContainer.querySelectorAll('.debug-tab').forEach((tab, index) => {\n\t\t\tconst tabNamespace = Object.keys(this.tabEntries)[index];\n\t\t\ttab.classList.toggle('active', tabNamespace === namespace);\n\t\t});\n\n\t\t// Update content visibility\n\t\tthis.contentContainer.querySelectorAll('.debug-tab-content').forEach((el) => {\n\t\t\t(el as HTMLElement).style.display = 'none';\n\t\t});\n\n\t\tconst activeContent = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`) as HTMLElement;\n\t\tif (activeContent) {\n\t\t\tactiveContent.style.display = 'block';\n\t\t}\n\t}\n\n\t// Log controls\n\n\tpublic log(namespace: string, message: Array<any> | object | string): void {\n\t\tif (!this.tabEntries[namespace]) {\n\t\t\tthis.addTab(namespace);\n\t\t}\n\n\t\tconst logEntry: LogEntry = {\n\t\t\tid: `${namespace}-${Date.now()}-${Math.random()}`,\n\t\t\tmessage,\n\t\t\ttimestamp: new Date()\n\t\t};\n\t\tthis.tabEntries[namespace].push(logEntry);\n\n\t\tconst content = this.contentContainer.querySelector(`[data-namespace=\"${namespace}\"]`);\n\t\tif (!content) return;\n\n\t\tconst logElement = this.createLogElement(logEntry, namespace);\n\t\tcontent.appendChild(logElement);\n\n\t\t// Add to global tab if not already global\n\t\tif (namespace !== 'global') {\n\t\t\tthis.log('global', message);\n\t\t}\n\t}\n\n\tprivate createLogElement(logEntry: LogEntry, namespace: string): HTMLElement {\n\t\tconst logElement = document.createElement('div');\n\t\tlogElement.classList.add('debug-log-entry');\n\t\tlogElement.dataset.logId = logEntry.id;\n\n\t\tconst logText = document.createElement('div');\n\t\tlogText.innerText = `[${logEntry.timestamp.toLocaleTimeString()}] ${this.renderLogEntry(logEntry.message)}`;\n\t\tlogText.classList.add('debug-log-entry-text');\n\n\t\tconst copyButton = document.createElement('button');\n\t\tcopyButton.innerText = '\uD83D\uDCCB';\n\t\tcopyButton.classList.add('debug-copy-button');\n\t\tcopyButton.onclick = () => navigator.clipboard.writeText(logText.innerText);\n\n\t\tconst deleteButton = document.createElement('button');\n\t\tdeleteButton.innerText = '\u274C';\n\t\tdeleteButton.classList.add('debug-delete-button');\n\t\tdeleteButton.onclick = () => this.removeLogEntry(namespace, logEntry.id, logElement);\n\n\t\tlogElement.appendChild(logText);\n\t\tlogElement.appendChild(copyButton);\n\t\tlogElement.appendChild(deleteButton);\n\n\t\treturn logElement;\n\t}\n\n\tprivate removeLogEntry(namespace: string, logId: string, logElement: HTMLElement): void {\n\t\tthis.tabEntries[namespace] = this.tabEntries[namespace].filter((entry) => entry.id !== logId);\n\t\tlogElement.remove();\n\t}\n\n\tprivate renderLogEntry(message: any): string {\n\t\tif (Array.isArray(message)) {\n\t\t\treturn message.join(' ');\n\t\t}\n\t\tif (typeof message === 'object') {\n\t\t\treturn safeStringify(message);\n\t\t}\n\t\treturn String(message);\n\t}\n\n\t// Misc UI helpers\n\n\tprivate updateToolbarLayout(width: number): void {\n\t\t// Toggle narrow-panel class based on width\n\t\tif (width < MIN_WIDTH) {\n\t\t\tthis.container.classList.add('narrow-panel');\n\t\t} else {\n\t\t\tthis.container.classList.remove('narrow-panel');\n\t\t}\n\t}\n\n\tprivate handleOpacityChange(): void {\n\t\tconst opacityPercent = parseInt(this.opacitySlider.value);\n\t\tconst opacity = opacityPercent / 100;\n\n\t\t// Only set opacity when visible\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.container.style.opacity = String(opacity);\n\t\t}\n\n\t\tthis.saveSettings();\n\t}\n\n\tprivate handleSnapWhileDragging(x: number, y: number): { x: number; y: number } {\n\t\tconst snapPadding = this.options.snapPadding || 20;\n\t\tconst { width: windowWidth, height: windowHeight } = getWindowSize();\n\t\tconst panelWidth = this.container.offsetWidth;\n\t\tconst panelHeight = this.container.offsetHeight;\n\n\t\tlet snappedX = x;\n\t\tlet snappedY = y;\n\n\t\t// Snap to left edge\n\t\tif (x < snapPadding) {\n\t\t\tsnappedX = 0;\n\t\t}\n\t\t// Snap to right edge\n\t\telse if (x + panelWidth > windowWidth - snapPadding) {\n\t\t\tsnappedX = windowWidth - panelWidth;\n\t\t}\n\n\t\t// Snap to top edge\n\t\tif (y < snapPadding) {\n\t\t\tsnappedY = 0;\n\t\t}\n\t\t// Snap to bottom edge\n\t\telse if (y + panelHeight > windowHeight - snapPadding) {\n\t\t\tsnappedY = windowHeight - panelHeight;\n\t\t}\n\n\t\t// Return the snapped coordinates\n\t\treturn { x: snappedX, y: snappedY };\n\t}\n\n\t// Panel controls\n\n\tpublic show(): void {\n\t\tthis.container.classList.add('visible');\n\t\t// Restore the opacity setting when showing\n\t\tconst opacity = parseFloat(this.container.style.opacity) || 1;\n\t\tthis.container.style.opacity = String(opacity);\n\t\tthis.saveSettings();\n\t}\n\n\tpublic hide(): void {\n\t\tthis.container.classList.remove('visible');\n\t\tthis.saveSettings();\n\t}\n\n\tpublic toggle(): void {\n\t\tif (this.container.classList.contains('visible')) {\n\t\t\tthis.hide();\n\t\t} else {\n\t\t\tthis.show();\n\t\t}\n\t}\n}\n\n// Utility function to send state to debug panel\nexport function debug(idOrState: string, state?: any): void {\n\tEventBus.dispatch('debug', { id: idOrState, state });\n} ", "import * as jsondiffpatch from 'jsondiffpatch';\n\nexport type JsonViewOptions = {\n\texpandAll?: boolean;\n\texpandObjs?: Array<string | RegExp>;\n\tuseViewState?: boolean;\n};\n\nconst DEFAULT_OPTIONS = () => ({\n\texpandAll: false,\n\texpandObjects: [],\n\tuseViewState: true\n});\n\nexport class JsonView {\n\tprivate json: any;\n\tprivate parentContainer: HTMLElement;\n\tprivate options: JsonViewOptions;\n\tprivate viewStates: { [key: string]: boolean } = {}; // viewstate tree for retaining view during state updates\n\n\tconstructor(json: any, parentContainer: HTMLElement, options?: JsonViewOptions) {\n\t\tthis.json = json;\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.options = Object.assign({}, DEFAULT_OPTIONS(), options || {});\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\t\tthis.parentContainer.innerHTML = ''; // Clear existing content\n\t\tconst rootNode = this.drawJsonNode(this.json);\n\t\tthis.parentContainer.appendChild(rootNode);\n\t}\n\n\tprivate toggleExpandNode(childNode: HTMLElement, keyPath: string, toggleButton?: HTMLElement) {\n\t\tconst isCollapsed = childNode.classList.contains('collapsed');\n\t\tchildNode.classList.toggle('collapsed', !isCollapsed);\n\t\tthis.viewStates[keyPath] = !isCollapsed;\n\t\tif (toggleButton) toggleButton.textContent = isCollapsed ? '[-]' : '[+]';\n\t}\n\n\tprivate drawJsonNode(jsonObj: any, currPath: string = ''): HTMLElement {\n\t\tconst nodeContainer = document.createElement('div');\n\t\tnodeContainer.classList.add('json-node');\n\t\tconst propertiesContainer = document.createElement('div');\n\t\tpropertiesContainer.classList.add('json-properties');\n\n\t\tfor (const key in jsonObj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(jsonObj, key)) {\n\t\t\t\tconst keyPath = `${currPath}${key}`;\n\t\t\t\tconst propertyRow = document.createElement('div');\n\t\t\t\tpropertyRow.classList.add('json-property');\n\t\t\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\t\t\tconst label = document.createElement('span');\n\t\t\t\tlabel.classList.add('json-key');\n\t\t\t\tlabel.textContent = key + ': ';\n\n\t\t\t\tconst valueContainer = document.createElement('div');\n\t\t\t\tvalueContainer.classList.add('json-value');\n\n\t\t\t\tconst value = jsonObj[key];\n\t\t\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\t\t\tconst isArray = Array.isArray(value);\n\t\t\t\t//console.log(`value:`, value, 'obj?', isObject, 'array?', isArray);\n\n\t\t\t\tif (isObject) {\n\t\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\t\t\telse label.textContent = key;\n\t\t\t\t\tconst hasChildren = isArray && value.length > 0 ? true : Object.keys(value).length > 0;\n\t\t\t\t\tpropertyRow.classList.add('object');\n\t\t\t\t\t// Create expandable/collapsible toggle button\n\t\t\t\t\tconst toggleButton = document.createElement('button');\n\t\t\t\t\ttoggleButton.classList.add('json-toggle');\n\n\t\t\t\t\t// Recursive call to render child object\n\t\t\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\t\t\t//console.log(`KP`, keyPath)\n\n\t\t\t\t\tif (this.options.expandAll) {\n\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet expand = false;\n\t\t\t\t\t\t// expand empty objects by default:\n\t\t\t\t\t\tif (isArray && hasChildren) {\n\t\t\t\t\t\t\t//console.log(`no children`, keyPath)\n\t\t\t\t\t\t\texpand = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.options.expandObjs?.forEach((e) => {\n\t\t\t\t\t\t\t\tif (new RegExp(e).test(keyPath)) expand = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if a viewstate exists use that always:\n\t\t\t\t\t\tif (this.options.useViewState) {\n\t\t\t\t\t\t\tif (typeof this.viewStates[keyPath] !== 'undefined') expand = !this.viewStates[keyPath];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (expand) {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\t\t\t\tchildNode.classList.add('collapsed'); // Start collapsed\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Toggle function for expanding/collapsing\n\t\t\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\t\t\tvalueContainer.appendChild(childNode);\n\t\t\t\t} else {\n\t\t\t\t\tvalueContainer.textContent = String(value);\n\t\t\t\t}\n\n\t\t\t\tpropertyRow.appendChild(label);\n\t\t\t\tpropertyRow.appendChild(valueContainer);\n\t\t\t\tpropertiesContainer.appendChild(propertyRow);\n\t\t\t}\n\t\t}\n\n\t\tnodeContainer.appendChild(propertiesContainer);\n\t\treturn nodeContainer;\n\t}\n\n\tpublic updateJson(newJson: any): void {\n\t\tconst delta = jsondiffpatch.diff(this.json, newJson);\n\t\tif (!delta) return; // No changes\n\n\t\t// Apply patch to the JSON data\n\t\tjsondiffpatch.patch(this.json, delta);\n\n\t\t// Update only the changed DOM nodes\n\t\tthis.patchDOM(delta);\n\t}\n\n\tprivate patchDOM(delta: any, currentPath: string = ''): void {\n\t\tfor (const key in delta) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(delta, key)) continue;\n\n\t\t\tconst change = delta[key];\n\t\t\tconst keyPath = currentPath ? `${currentPath}${key}` : key;\n\n\t\t\t// Check if this is a jsondiffpatch operation marker\n\t\t\tif (key === '_t') continue; // Array marker\n\n\t\t\t// Find the DOM node for this path\n\t\t\tconst propertyNode = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${keyPath}\"]`\n\t\t\t) as HTMLElement;\n\n\t\t\tif (Array.isArray(change)) {\n\t\t\t\t// Simple value change: [oldValue, newValue]\n\t\t\t\tif (change.length === 2) {\n\t\t\t\t\tthis.updateValueNode(propertyNode, keyPath, this.getValueAtPath(this.json, keyPath));\n\t\t\t\t}\n\t\t\t\t// Deleted value: [oldValue, 0, 0]\n\t\t\t\telse if (change.length === 3 && change[1] === 0 && change[2] === 0) {\n\t\t\t\t\tif (propertyNode) propertyNode.remove();\n\t\t\t\t}\n\t\t\t\t// New value: [newValue]\n\t\t\t\telse if (change.length === 1) {\n\t\t\t\t\tthis.addPropertyNode(keyPath, change[0]);\n\t\t\t\t}\n\t\t\t} else if (typeof change === 'object') {\n\t\t\t\t// Nested object changes - recurse\n\t\t\t\tthis.patchDOM(change, keyPath + '/');\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getValueAtPath(obj: any, path: string): any {\n\t\tconst parts = path.split('/').filter((p) => p);\n\t\tlet current = obj;\n\t\tfor (const part of parts) {\n\t\t\tif (current === null || current === undefined) return undefined;\n\t\t\tcurrent = current[part];\n\t\t}\n\t\treturn current;\n\t}\n\n\tprivate updateValueNode(propertyNode: HTMLElement | null, keyPath: string, newValue: any): void {\n\t\tif (!propertyNode) return;\n\n\t\tconst valueContainer = propertyNode.querySelector('.json-value') as HTMLElement;\n\t\tif (!valueContainer) return;\n\n\t\tconst isObject = typeof newValue === 'object' && newValue !== null;\n\n\t\tif (isObject) {\n\t\t\t// Object/array changed - need to redraw the entire subtree\n\t\t\tconst key = keyPath.split('/').filter((p) => p).pop() || '';\n\t\t\tconst parentPath = keyPath.substring(0, keyPath.lastIndexOf(key));\n\n\t\t\t// Clear old content\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tpropertyNode.classList.add('object');\n\n\t\t\t// Redraw the node\n\t\t\tconst label = propertyNode.querySelector('.json-key') as HTMLElement;\n\t\t\tconst isArray = Array.isArray(newValue);\n\n\t\t\tif (label) {\n\t\t\t\tlabel.classList.add('clickable');\n\t\t\t\tif (isArray) {\n\t\t\t\t\tlabel.textContent = `${key} (${newValue.length})`;\n\t\t\t\t} else {\n\t\t\t\t\tlabel.textContent = key;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if toggle button already exists\n\t\t\tlet toggleButton = propertyNode.querySelector('.json-toggle') as HTMLElement;\n\t\t\tif (!toggleButton) {\n\t\t\t\ttoggleButton = document.createElement('button');\n\t\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\t\tpropertyNode.insertBefore(toggleButton, label);\n\t\t\t}\n\n\t\t\t// Recursive call to render child object\n\t\t\tconst childNode = this.drawJsonNode(newValue, keyPath + '/');\n\n\t\t\t// Preserve expand state if it exists\n\t\t\tconst wasExpanded = this.viewStates[keyPath];\n\t\t\tif (typeof wasExpanded !== 'undefined') {\n\t\t\t\tif (wasExpanded) {\n\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t} else {\n\t\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\tchildNode.classList.add('collapsed');\n\t\t\t}\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tif (label) {\n\t\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\t}\n\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\t// Simple value - just update text\n\t\t\tpropertyNode.classList.remove('object');\n\t\t\tconst toggleButton = propertyNode.querySelector('.json-toggle');\n\t\t\tif (toggleButton) toggleButton.remove();\n\n\t\t\tvalueContainer.innerHTML = '';\n\t\t\tvalueContainer.textContent = String(newValue);\n\t\t}\n\t}\n\n\tprivate addPropertyNode(keyPath: string, value: any): void {\n\t\tconst pathParts = keyPath.split('/').filter((p) => p);\n\t\tconst key = pathParts.pop() || '';\n\t\tconst parentPath = pathParts.join('/');\n\n\t\t// Find parent container\n\t\tlet parentContainer: HTMLElement | null;\n\t\tif (parentPath) {\n\t\t\tconst parentProperty = this.parentContainer.querySelector(\n\t\t\t\t`.json-property[data-path=\"${parentPath}\"]`\n\t\t\t) as HTMLElement;\n\t\t\tif (parentProperty) {\n\t\t\t\tparentContainer = parentProperty.querySelector('.json-properties') as HTMLElement;\n\t\t\t} else {\n\t\t\t\treturn; // Parent not found\n\t\t\t}\n\t\t} else {\n\t\t\tparentContainer = this.parentContainer.querySelector('.json-properties') as HTMLElement;\n\t\t}\n\n\t\tif (!parentContainer) return;\n\n\t\t// Create new property row\n\t\tconst propertyRow = document.createElement('div');\n\t\tpropertyRow.classList.add('json-property');\n\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\tconst label = document.createElement('span');\n\t\tlabel.classList.add('json-key');\n\t\tlabel.textContent = key + ': ';\n\n\t\tconst valueContainer = document.createElement('div');\n\t\tvalueContainer.classList.add('json-value');\n\n\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\tconst isArray = Array.isArray(value);\n\n\t\tif (isObject) {\n\t\t\tlabel.classList.add('clickable');\n\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\telse label.textContent = key;\n\t\t\tpropertyRow.classList.add('object');\n\n\t\t\tconst toggleButton = document.createElement('button');\n\t\t\ttoggleButton.classList.add('json-toggle');\n\t\t\ttoggleButton.textContent = '[+]';\n\n\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\tchildNode.classList.add('collapsed');\n\n\t\t\ttoggleButton.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\t\t\tlabel.onclick = () => this.toggleExpandNode(childNode, keyPath, toggleButton);\n\n\t\t\tpropertyRow.appendChild(toggleButton);\n\t\t\tvalueContainer.appendChild(childNode);\n\t\t} else {\n\t\t\tvalueContainer.textContent = String(value);\n\t\t}\n\n\t\tpropertyRow.appendChild(label);\n\t\tpropertyRow.appendChild(valueContainer);\n\t\tparentContainer.appendChild(propertyRow);\n\t}\n} ", "export type ResizeOptions = {\n\thandles?: ('top' | 'left' | 'right' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right')[];\n\tmaxWidth?: number;\n\tmaxHeight?: number;\n\tminWidth?: number;\n\tminHeight?: number;\n\tonResize?: (width: number, height: number) => void;\n};\n\nexport function makeResizable(container: HTMLElement, options: ResizeOptions = {}) {\n\t// Remove existing handles\n\tcontainer.querySelectorAll('.resize-handle').forEach((handle) => handle.remove());\n\n\t// Default options - now includes all sides and corners\n\tconst {\n\t\thandles = ['top', 'left', 'right', 'bottom', 'top-left', 'top-right', 'bottom-left', 'bottom-right'],\n\t\tmaxWidth = Infinity,\n\t\tmaxHeight = Infinity,\n\t\tminWidth = 100,\n\t\tminHeight = 100,\n\t\tonResize = () => { }\n\t} = options;\n\n\tlet resizing = false;\n\tlet resizeDirection: string | null = null;\n\tlet startX = 0,\n\t\tstartY = 0;\n\tlet startWidth = 0,\n\t\tstartHeight = 0;\n\tlet startLeft = 0,\n\t\tstartTop = 0;\n\n\tfunction createHandle(position: string) {\n\t\tconst handle = document.createElement('div');\n\t\thandle.classList.add('resize-handle', `resize-${position}`);\n\t\thandle.addEventListener('mousedown', (e) => startResizing(e, position));\n\t\tcontainer.appendChild(handle);\n\t}\n\n\tfunction startResizing(event: MouseEvent, direction: string) {\n\t\tresizing = true;\n\t\tresizeDirection = direction;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Capture initial dimensions and position\n\t\tstartWidth = container.offsetWidth;\n\t\tstartHeight = container.offsetHeight;\n\t\tstartLeft = container.offsetLeft;\n\t\tstartTop = container.offsetTop;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tdocument.addEventListener('mousemove', resize);\n\t\tdocument.addEventListener('mouseup', stopResizing);\n\t}\n\n\tfunction resize(event: MouseEvent) {\n\t\tif (!resizing || !resizeDirection) return;\n\n\t\tlet newWidth = startWidth;\n\t\tlet newHeight = startHeight;\n\t\tlet newLeft = startLeft;\n\t\tlet newTop = startTop;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\t// Handle horizontal resizing\n\t\tif (resizeDirection.includes('right')) {\n\t\t\tnewWidth = Math.min(Math.max(startWidth + deltaX, minWidth), maxWidth);\n\t\t}\n\t\tif (resizeDirection.includes('left')) {\n\t\t\tconst potentialWidth = startWidth - deltaX;\n\t\t\tif (potentialWidth >= minWidth && potentialWidth <= maxWidth) {\n\t\t\t\tnewWidth = potentialWidth;\n\t\t\t\tnewLeft = startLeft + deltaX;\n\t\t\t}\n\t\t}\n\n\t\t// Handle vertical resizing\n\t\tif (resizeDirection.includes('bottom')) {\n\t\t\tnewHeight = Math.min(Math.max(startHeight + deltaY, minHeight), maxHeight);\n\t\t}\n\t\tif (resizeDirection.includes('top')) {\n\t\t\tconst potentialHeight = startHeight - deltaY;\n\t\t\tif (potentialHeight >= minHeight && potentialHeight <= maxHeight) {\n\t\t\t\tnewHeight = potentialHeight;\n\t\t\t\tnewTop = startTop + deltaY;\n\t\t\t}\n\t\t}\n\n\t\tcontainer.style.width = `${newWidth}px`;\n\t\tcontainer.style.height = `${newHeight}px`;\n\t\tcontainer.style.left = `${newLeft}px`;\n\t\tcontainer.style.top = `${newTop}px`;\n\n\t\tonResize(newWidth, newHeight);\n\t}\n\n\tfunction stopResizing() {\n\t\tresizing = false;\n\t\tresizeDirection = null;\n\t\tdocument.removeEventListener('mousemove', resize);\n\t\tdocument.removeEventListener('mouseup', stopResizing);\n\t}\n\n\t// Add handles based on config\n\thandles.forEach((handle) => createHandle(handle));\n}\n\nexport type DragOptions = {\n\tonDragStart?: (e: MouseEvent) => void;\n\tonDrag?: (x: number, y: number) => void | { x?: number; y?: number };\n\tonDragEnd?: () => void;\n};\n\nexport function makeDraggable(\n\telement: HTMLElement,\n\thandleElement?: HTMLElement,\n\toptions: DragOptions = {}\n) {\n\tconst dragHandle = handleElement || element;\n\tlet isDragging = false;\n\tlet startX = 0;\n\tlet startY = 0;\n\tlet initialLeft = 0;\n\tlet initialTop = 0;\n\n\tconst { onDragStart, onDrag, onDragEnd } = options;\n\n\tfunction startDragging(event: MouseEvent) {\n\t\t// Don't start dragging if clicking on buttons or interactive elements\n\t\tconst target = event.target as HTMLElement;\n\t\tif (target.tagName === 'BUTTON' || target.closest('button')) {\n\t\t\treturn;\n\t\t}\n\n\t\tisDragging = true;\n\t\tstartX = event.clientX;\n\t\tstartY = event.clientY;\n\n\t\t// Get current computed position (handles both absolute and other positioning)\n\t\tconst computedStyle = getComputedStyle(element);\n\t\tinitialLeft = parseInt(computedStyle.left) || element.offsetLeft;\n\t\tinitialTop = parseInt(computedStyle.top) || element.offsetTop;\n\n\t\t// Ensure element has position fixed or absolute for dragging\n\t\tif (computedStyle.position !== 'absolute' && computedStyle.position !== 'fixed') {\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.left = `${initialLeft}px`;\n\t\t\telement.style.top = `${initialTop}px`;\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tdragHandle.style.cursor = 'grabbing';\n\n\t\tif (onDragStart) onDragStart(event);\n\n\t\tdocument.addEventListener('mousemove', drag);\n\t\tdocument.addEventListener('mouseup', stopDragging);\n\t}\n\n\tfunction drag(event: MouseEvent) {\n\t\tif (!isDragging) return;\n\n\t\tconst deltaX = event.clientX - startX;\n\t\tconst deltaY = event.clientY - startY;\n\n\t\tlet newLeft = initialLeft + deltaX;\n\t\tlet newTop = initialTop + deltaY;\n\n\t\t// Call onDrag callback which may modify the position (e.g., for snapping)\n\t\tif (onDrag) {\n\t\t\tconst result = onDrag(newLeft, newTop);\n\t\t\t// If onDrag returns adjusted coordinates, use them\n\t\t\tif (result && typeof result === 'object') {\n\t\t\t\tif (typeof result.x === 'number') newLeft = result.x;\n\t\t\t\tif (typeof result.y === 'number') newTop = result.y;\n\t\t\t}\n\t\t}\n\n\t\telement.style.left = `${newLeft}px`;\n\t\telement.style.top = `${newTop}px`;\n\t}\n\n\tfunction stopDragging() {\n\t\tif (!isDragging) return;\n\n\t\tisDragging = false;\n\t\tdragHandle.style.cursor = 'grab';\n\n\t\tif (onDragEnd) onDragEnd();\n\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t}\n\n\t// Set up drag handle cursor\n\tdragHandle.style.cursor = 'grab';\n\tdragHandle.addEventListener('mousedown', startDragging);\n\n\t// Return cleanup function\n\treturn () => {\n\t\tdragHandle.removeEventListener('mousedown', startDragging);\n\t\tdocument.removeEventListener('mousemove', drag);\n\t\tdocument.removeEventListener('mouseup', stopDragging);\n\t};\n}\n\nexport function getWindowSize(): { width: number; height: number } {\n\tconst width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\tconst height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\treturn { width, height };\n} "],
  "mappings": "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",
  "names": ["require_fast_safe_stringify", "__commonJSMin", "exports", "module", "stringify", "deterministicStringify", "LIMIT_REPLACE_NODE", "CIRCULAR_REPLACE_NODE", "arr", "replacerStack", "defaultOptions", "obj", "replacer", "spacer", "options", "decirc", "res", "replaceGetterValues", "part", "setReplace", "replace", "val", "k", "parent", "propertyDescriptor", "edgeIndex", "stack", "depth", "i", "keys", "key", "compareFunction", "a", "b", "tmp", "deterministicDecirc", "v", "src_exports", "__export", "DebugPanel", "JsonView", "ScreenPosition", "debug", "getWindowSize", "makeDraggable", "makeResizable", "__toCommonJS", "css", "style", "css", "style", "import_eventbusjs", "import_fast_safe_stringify", "jsondiffpatch", "DEFAULT_OPTIONS", "JsonView", "json", "parentContainer", "options", "rootNode", "childNode", "keyPath", "toggleButton", "isCollapsed", "jsonObj", "currPath", "nodeContainer", "propertiesContainer", "key", "propertyRow", "label", "valueContainer", "value", "isObject", "isArray", "hasChildren", "expand", "e", "newJson", "delta", "currentPath", "change", "propertyNode", "obj", "path", "parts", "p", "current", "part", "newValue", "parentPath", "wasExpanded", "pathParts", "parentProperty", "makeResizable", "container", "options", "handle", "handles", "maxWidth", "maxHeight", "minWidth", "minHeight", "onResize", "resizing", "resizeDirection", "startX", "startY", "startWidth", "startHeight", "startLeft", "startTop", "createHandle", "position", "e", "startResizing", "event", "direction", "resize", "stopResizing", "newWidth", "newHeight", "newLeft", "newTop", "deltaX", "deltaY", "potentialWidth", "potentialHeight", "makeDraggable", "element", "handleElement", "dragHandle", "isDragging", "initialLeft", "initialTop", "onDragStart", "onDrag", "onDragEnd", "startDragging", "target", "computedStyle", "drag", "stopDragging", "result", "getWindowSize", "width", "height", "DEBUG_STATE_NAMESPACE", "ScreenPosition", "MIN_WIDTH", "DebugPanel", "options", "container", "tabContainer", "contentContainer", "toolbar", "hint", "opacityContainer", "opacityLabel", "clearButton", "hideButton", "EventBus", "event", "namespace", "message", "id", "state", "width", "height", "getWindowSize", "makeResizable", "newWidth", "makeDraggable", "x", "y", "panelWidth", "panelHeight", "left", "top", "savedSettings", "opacity", "settingsJson", "error", "settings", "idOrState", "_id", "_state", "content", "debugWrapper", "jsonWrapper", "toggleObjectOpen", "isExpanded", "toggleButton", "label", "jsonView", "JsonView", "tab", "key", "index", "tabNamespace", "el", "activeContent", "logEntry", "logElement", "logText", "copyButton", "deleteButton", "logId", "entry", "safeStringify", "snapPadding", "windowWidth", "windowHeight", "snappedX", "snappedY", "debug"]
}
