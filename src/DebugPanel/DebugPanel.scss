@mixin font-console {
	font-family:
		system-ui,
		-apple-system,
		BlinkMacSystemFont,
		"Segoe UI",
		Roboto,
		Oxygen,
		Ubuntu,
		Cantarell,
		"Open Sans",
		"Helvetica Neue",
		sans-serif;
}

// DebugPanel.scss
.debug-panel {
	position: fixed;
	z-index: 99999;
	background: #222;
	border-radius: 8px;
	box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
	display: flex;
	flex-direction: column;
	overflow: hidden;
	font-family: Arial, sans-serif;
	color: #fff;
	transition:
		transform 0.2s ease-in-out,
		visibility 0.2s ease-in-out;

	&.visible {
		visibility: visible;
		transform: translateY(0);
	}

	&:not(.visible) {
		visibility: hidden;
		transform: translateY(10px);
		pointer-events: none;
	}

	// Tab Navigation
	.debug-panel-tabs {
		display: flex;
		flex-wrap: wrap;
		background: #1a1a1a;
		padding: 6px 6px 0 6px;
		gap: 3px;
		cursor: grab;
		user-select: none;

		&:active {
			cursor: grabbing;
		}

		.debug-tab {
			background: #2d2d2d;
			color: #888;
			padding: 7px 8px;
			margin: 0;
			border: none;
			border-top-left-radius: 6px;
			border-top-right-radius: 6px;
			cursor: pointer;
			position: relative;
			box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3);
			@include font-console;

			&:hover {
				background: #353535;
				color: #aaa;
			}

			&:focus {
				outline: none;
			}

			&.active {
				background: linear-gradient(to bottom, #3f6d9c, #24384d);
				color: #ffffff;
				box-shadow:
					0 -3px 8px rgba(0, 102, 204, 0.4),
					inset 0 1px 0 rgba(255, 255, 255, 0.2);
				z-index: 1;
			}
		}
	}

	// Content Area
	.debug-panel-content {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow-y: auto;
		padding: 0px 15px;
		background: #0d0d0d;

		.debug-tab-content {
			display: none;
			flex-direction: column;
			flex: 1;
			gap: 5px;

			// Log Entries
			.debug-log-entry {
				background: #292929;
				color: #ddd;
				padding: 5px 8px;
				border-radius: 4px;
				font-size: 12px;
				word-break: break-word;
				border-left: 3px solid #007bff;
				position: relative;
				display: flex;
				align-items: center;

				&:hover {
					.debug-delete-button,
					.debug-copy-button {
						opacity: 1;
					}
				}

				.debug-log-entry-text {
					flex: 1;
					padding-right: 70px;
				}

				.debug-action-button {
					position: absolute;
					top: 50%;
					transform: translateY(-50%);
					background: rgba(100, 100, 100, 0.8);
					color: white;
					border: none;
					cursor: pointer;
					font-size: 12px;
					font-weight: bold;
					width: 20px;
					height: 20px;
					border-radius: 50%;
					display: flex;
					align-items: center;
					justify-content: center;
					opacity: 0;
					transition:
						opacity 0.2s ease-in-out,
						background 0.2s ease-in-out;

					&:hover {
						background: rgba(150, 150, 150, 1);
					}
				}

				.debug-copy-button {
					@extend .debug-action-button;
					right: 36px;
					background: rgba(85, 170, 255, 0.8);

					&:hover {
						background: rgba(34, 136, 255, 1);
					}
				}

				.debug-delete-button {
					@extend .debug-action-button;
					right: 8px;
					background: rgba(223, 161, 152, 0.8);

					&:hover {
						background: rgba(255, 34, 34, 1);
					}
				}
			}
		}
	}

	// Toolbar
	.debug-toolbar {
		display: flex;
		box-sizing: border-box;
		width: 100%;
		align-items: center;
		justify-content: flex-end;
		gap: 2px;
		padding: 8px;
		background: #111;
		border-top: 1px solid rgba(255, 255, 255, 0.1);
		flex-wrap: wrap;

		.debug-keyboard-hint {
			margin-right: auto;
			color: #999;
			font-size: 11px;
			white-space: nowrap;
		}

		.debug-opacity-container {
			display: flex;
			align-items: center;
			gap: 0px;
			max-width: 100px;
			min-width: 40px;
			flex-shrink: 1;
			padding: 4px 0;

			.debug-opacity-label {
				font-size: 11px;
				color: #999;
				white-space: nowrap;
			}

			.debug-opacity-slider {
				flex: 1;
				min-width: 40px;
				width: 100%;
				max-width: 100%;
				height: 4px;
				background: #444;
				border-radius: 2px;
				outline: none;
				-webkit-appearance: none;
				appearance: none;

				&::-webkit-slider-thumb {
					-webkit-appearance: none;
					appearance: none;
					width: 14px;
					height: 14px;
					background: #007bff;
					cursor: pointer;
					border-radius: 50%;
					position: relative;
					top: -4px;
					transition: background 0.2s;

					&:hover {
						background: #0056b3;
					}
				}

				&::-moz-range-thumb {
					width: 14px;
					height: 14px;
					background: #007bff;
					cursor: pointer;
					border-radius: 50%;
					border: none;
					position: relative;
					top: -4px;
					transition: background 0.2s;

					&:hover {
						background: #0056b3;
					}
				}

				&::-webkit-slider-runnable-track {
					height: 4px;
					background: #444;
					border-radius: 2px;
				}

				&::-moz-range-track {
					height: 4px;
					background: #444;
					border-radius: 2px;
				}
			}
		}

		button {
			background: #ba6c38;
			color: white;
			border: none;
			padding: 5px 10px;
			margin: 2px;
			border-radius: 4px;
			font-size: 12px;
			cursor: pointer;
			transition: background 0.2s;
			white-space: nowrap;
			flex-shrink: 0;

			&:hover {
				background: #c9302c;
			}

			&:focus {
				outline: none;
			}
		}
	}

	// Responsive layout for narrow panels
	.debug-toolbar {
		container-type: inline-size;

		// When panel width is less than 400px, stack toolbar vertically
		@container (max-width: 350px) {
			flex-direction: column;
			align-items: stretch;

			.debug-keyboard-hint {
				display: none;
			}

			.debug-opacity-container {
				max-width: 100%;
				justify-content: center;
			}
		}
	}

	// Container query alternative using JavaScript-set class
	&.narrow-panel {
		.debug-toolbar {
			flex-direction: column;
			align-items: stretch;

			.debug-keyboard-hint {
				margin-right: 0;
				text-align: center;
			}

			.debug-opacity-container {
				max-width: 100%;
				justify-content: center;
			}
		}
	}

	// Resize Handles
	.resize-handle {
		position: absolute;
		background: rgba(255, 255, 255, 0.1);
		z-index: 10;
		transition: background 0.2s;

		&:hover {
			background: rgba(255, 255, 255, 0.3);
		}
	}

	.resize-left,
	.resize-right {
		top: 0;
		bottom: 0;
		width: 6px;
		cursor: ew-resize;
	}

	.resize-left {
		left: -3px;
	}

	.resize-right {
		right: -3px;
	}

	.resize-top,
	.resize-bottom {
		left: 0;
		right: 0;
		height: 6px;
		cursor: ns-resize;
	}

	.resize-top {
		top: -3px;
	}

	.resize-bottom {
		bottom: -3px;
	}

	.resize-top-left,
	.resize-top-right,
	.resize-bottom-left,
	.resize-bottom-right {
		width: 10px;
		height: 10px;
	}

	.resize-top-left {
		left: -3px;
		top: -3px;
		cursor: nwse-resize;
	}

	.resize-top-right {
		right: -3px;
		top: -3px;
		cursor: nesw-resize;
	}

	.resize-bottom-left {
		left: -3px;
		bottom: -3px;
		cursor: nesw-resize;
	}

	.resize-bottom-right {
		right: -3px;
		bottom: -3px;
		cursor: nwse-resize;
	}
}

// Debug State Container
.debug-state {
	position: relative;
	flex: 1 0 100%;
	display: flex;
	flex-direction: column;
	margin-bottom: 5px;
	margin-left: 10px;

	.json-toggle {
		position: absolute;
		top: 2px;
		left: -22px;
		margin: 0 10px 0 0;
		border: none;
		background: none;
		cursor: pointer;
		color: #888;
		font-size: 14px;
		padding: 0;
		width: 20px;
		height: 20px;
		transition: color 0.2s;

		&:hover {
			color: #fff;
		}

		&:focus {
			outline: none;
		}
	}

	.debug-state-label {
		font-size: 13px;
		font-weight: bold;
		padding: 5px 0;
		color: #ccc;
		&:hover {
			color: #fff;
			cursor: pointer;
			text-decoration: underline;
		}
	}

	.json-wrapper {
		position: relative;
		padding: 5px;
		margin-left: -15px;
		background: #292929;
		border-radius: 4px;
		border-left: 3px solid #28a745;

		> .json-node {
			//margin-left: 5px;
		}

		.debug-state-hover-actions {
			position: absolute;
			top: 4px;
			right: 4px;
			display: flex;
			gap: 6px;
			opacity: 0;
			transition: opacity 0.2s ease-in-out;
			z-index: 10;
		}

		&:hover .debug-state-hover-actions {
			opacity: 1;
		}

		.debug-state-action-button {
			background: rgba(100, 100, 100, 0.8);
			color: white;
			border: none;
			cursor: pointer;
			font-size: 16px;
			width: 28px;
			height: 28px;
			border-radius: 4px;
			display: flex;
			align-items: center;
			justify-content: center;
			padding: 0;
			transition:
				background 0.2s ease-in-out,
				transform 0.1s ease-in-out;

			&:hover {
				transform: scale(1.1);
			}

			&:active {
				transform: scale(0.95);
			}

			&:focus {
				outline: none;
			}
		}

		.debug-state-copy-button {
			background: rgba(85, 170, 255, 0.8);

			&:hover {
				background: rgba(34, 136, 255, 1);
			}
		}

		.debug-state-delete-button {
			background: rgba(255, 85, 85, 0.8);

			&:hover {
				background: rgba(255, 34, 34, 1);
			}
		}
	}

	&.collapsed {
		.json-wrapper {
			display: none;
		}
	}
}
